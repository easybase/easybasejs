{"version":3,"sources":["webpack://EasyBase/webpack/universalModuleDefinition","webpack://EasyBase/webpack/bootstrap","webpack://EasyBase/./node_modules/easyqb/src/lib-util/index.js","webpack://EasyBase/./node_modules/@analytics/cookie-utils/lib/analytics-util-cookie.browser.es.js","webpack://EasyBase/./node_modules/cross-fetch/dist/browser-ponyfill.js","webpack://EasyBase/./src/EasybaseProvider/g.ts","webpack://EasyBase/./node_modules/@analytics/storage-utils/lib/analytics-util-storage.browser.es.js","webpack://EasyBase/./node_modules/easyqb/src/lib-sq/common/from_items.js","webpack://EasyBase/./node_modules/easyqb/src/lib-sq/common/values_array.js","webpack://EasyBase/./node_modules/easyqb/src/lib-sq/common/conditions.js","webpack://EasyBase/./node_modules/fast-deep-equal/index.js","webpack://EasyBase/./node_modules/easyqb/src/index.js","webpack://EasyBase/./node_modules/easyqb/src/lib-sq/common/expressions.js","webpack://EasyBase/./node_modules/easyqb/src/lib-sq/common/limit_offset.js","webpack://EasyBase/./node_modules/dlv/index.js","webpack://EasyBase/./node_modules/easyqb/src/lib-util/tagged_template.js","webpack://EasyBase/./node_modules/easyqb/src/lib-sq/clauses/index.js","webpack://EasyBase/./node_modules/@analytics/google-analytics/lib/analytics-plugin-ga.browser.es.js","webpack://EasyBase/./node_modules/analytics-utils/lib/analytics-utils.browser.es.js","webpack://EasyBase/./node_modules/@analytics/core/lib/analytics.browser.es.js","webpack://EasyBase/./node_modules/analytics/lib/analytics.browser.es.js","webpack://EasyBase/./node_modules/process/browser.js","webpack://EasyBase/(webpack)/buildin/global.js","webpack://EasyBase/./node_modules/easyqb/src/lib-core/index.js","webpack://EasyBase/./node_modules/easyqb/src/builder-sq/index.js","webpack://EasyBase/./node_modules/easyqb/src/builder-sq/context.js","webpack://EasyBase/./node_modules/easyqb/src/builder-expression/index.js","webpack://EasyBase/./node_modules/easyqb/src/builder-expression/compile.js","webpack://EasyBase/./node_modules/easyqb/src/lib-util/build_utils.js","webpack://EasyBase/./node_modules/easyqb/src/lib-util/change_case.js","webpack://EasyBase/./node_modules/easyqb/src/dialect-postgres/index.js","webpack://EasyBase/./node_modules/easyqb/src/dialect-postgres/query.js","webpack://EasyBase/./node_modules/easyqb/src/lib-sq/index.js","webpack://EasyBase/./node_modules/easyqb/src/lib-sq/methods.js","webpack://EasyBase/./node_modules/easyqb/src/lib-sq/query.js","webpack://EasyBase/./node_modules/easyqb/src/lib-sq/clauses/with.js","webpack://EasyBase/./node_modules/easyqb/src/lib-sq/clauses/select.js","webpack://EasyBase/./node_modules/easyqb/src/lib-sq/clauses/from.js","webpack://EasyBase/./node_modules/easyqb/src/lib-sq/clauses/where.js","webpack://EasyBase/./node_modules/easyqb/src/lib-sq/clauses/group.js","webpack://EasyBase/./node_modules/easyqb/src/lib-sq/clauses/having.js","webpack://EasyBase/./node_modules/easyqb/src/lib-sq/clauses/setop.js","webpack://EasyBase/./node_modules/easyqb/src/lib-sq/clauses/order.js","webpack://EasyBase/./node_modules/easyqb/src/lib-sq/clauses/limit.js","webpack://EasyBase/./node_modules/easyqb/src/lib-sq/clauses/offset.js","webpack://EasyBase/./node_modules/easyqb/src/lib-sq/clauses/delete.js","webpack://EasyBase/./node_modules/easyqb/src/lib-sq/clauses/returning.js","webpack://EasyBase/./node_modules/easyqb/src/lib-sq/clauses/insert.js","webpack://EasyBase/./node_modules/easyqb/src/lib-sq/clauses/update.js","webpack://EasyBase/./node_modules/easyqb/src/lib-sq/clauses/set.js","webpack://EasyBase/./node_modules/easyqb/src/lib-sq/common/index.js","webpack://EasyBase/./node_modules/easyqb/src/dialect-postgres/expression.js","webpack://EasyBase/./node_modules/easyqb/src/lib-expression/index.js","webpack://EasyBase/./node_modules/easyqb/src/lib-expression/util.js","webpack://EasyBase/./node_modules/easyqb/src/dialect-postgres/parameterize.js","webpack://EasyBase/./src/EasybaseProvider/types.ts","webpack://EasyBase/./src/EasybaseProvider/object-observer.js","webpack://EasyBase/./src/EasybaseProvider/utils.ts","webpack://EasyBase/./src/EasybaseProvider/auth.ts","webpack://EasyBase/./src/EasybaseProvider/table.ts","webpack://EasyBase/./src/EasybaseProvider/db.ts","webpack://EasyBase/./src/EasybaseProvider/EasybaseProvider.ts","webpack://EasyBase/./src/index.ts"],"names":["root","factory","exports","module","define","amd","window","webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","installedModules","0","__webpack_require__","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","p","jsonpScriptSrc","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","oldJsonpFunction","slice","s","buildUtils","changeCase","taggedTemplate","cookie","ttl","path","domain","secure","arguments","encodeURIComponent","Date","toUTCString","decodeURIComponent","split","hasCookieSupport","valueSet","indexOf","getCookie","setCookie","removeCookie","global","self","this","__self__","F","fetch","DOMException","support","Blob","viewClasses","isArrayBufferView","ArrayBuffer","isView","obj","toString","normalizeName","String","test","TypeError","toLowerCase","normalizeValue","iteratorFor","items","iterator","next","done","Headers","headers","map","forEach","append","Array","isArray","header","getOwnPropertyNames","consumed","body","bodyUsed","fileReaderReady","reader","result","readBlobAsArrayBuffer","blob","FileReader","readAsArrayBuffer","bufferClone","buf","view","Uint8Array","byteLength","set","buffer","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","FormData","_bodyFormData","URLSearchParams","DataView","_bodyArrayBuffer","rejected","arrayBuffer","then","text","readAsText","chars","fromCharCode","join","readArrayBufferAsText","formData","decode","json","JSON","parse","oldValue","has","callback","thisArg","keys","values","entries","methods","Request","input","options","method","upcased","url","credentials","signal","toUpperCase","referrer","form","trim","bytes","replace","Response","bodyInit","status","ok","statusText","clone","response","redirectStatuses","redirect","RangeError","location","stack","constructor","init","aborted","xhr","XMLHttpRequest","abortXhr","abort","rawHeaders","getAllResponseHeaders","line","parts","responseURL","responseText","ontimeout","onabort","open","withCredentials","responseType","setRequestHeader","addEventListener","onreadystatechange","readyState","removeEventListener","send","polyfill","ponyfill","ctx","default","GlobalNamespace","__assign","assign","apply","_g","gFactory","integration","googleAnalyticsId","startsWith","analytics","app","plugins","trackingId","debug","_typeof","_defineProperty","configurable","writable","ownKeys","enumerableOnly","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","_objectSpread2","source","getOwnPropertyDescriptors","defineProperties","parseFloat","globalContext","COOKIE","hasStorage","localStorage","setItem","removeItem","hasLocalStorage","hasCookies","getAll","getItem","getStorageType","storage","useGlobal","useLocal","useCookie","index","storageType","_value","saveValue","stringify","setAll","current","previous","cookieValues","globalValues","removeAll","locations","isObject","buildCall","mapJoin","objectMapJoin","conditions","valuesArray","start","end","txt","item","fromItem","args","on","using","arg","build","buildObject","mapKey","columns","array","uniqueKeys","j","isTaggedTemplate","buildTaggedTemplate","valuesList","callbackfn","equal","a","b","RegExp","flags","valueOf","core","dialect","from","parameterize","def","undef","strings","raw","wth","select","where","group","having","setop","order","limit","offset","del","returning","insert","update","_objectSpread","concat","defaultConfig","anonymizeIp","customDimensions","resetCustomDimensionsOnPage","setCustomDimensionsToPage","loadedInstances","googleAnalytics$1","pluginConfig","pageCalledOnce","_getInstanceDetails","getInstanceDetails","instanceName","instancePrefix","config","initialize","pluginApi","instance","g","scriptSrc","customScriptSrc","gaNotLoaded","q","getElementsByTagName","async","parentNode","insertBefore","gaConfig","cookieDomain","siteSpeedSampleRate","sampleRate","allowLinker","cookieConfig","ga","ga_debug","trace","tasks","taskName","task","traits","user","dimensions","formatObjectIntoDimensions$1","page","_ref","payload","properties","campaign","getState","resetDimensions","reduce","acc","pathname","pageView","title","pageData","finalPayload","addCampaignData","setCustomDimensions","track","_ref2","label","trackEvent$1","hitType","category","nonInteraction","identify","_ref3","identifyVisitor$1","userId","loaded","gaplugins","scripts","querySelectorAll","scriptLoaded","eventData","opts","_getInstanceDetails2","eventAction","eventLabel","eventCategory","eventValue","format","campaignData","medium","content","keyword","campaignName","campaignSource","campaignMedium","campaignContent","campaignKeyword","dimensionKey","get$1","props","id","conf","_getInstanceDetails3","custom","Math","round","isFunction","x","isString","isBoolean","proto","getPrototypeOf","inBrowser","paramsParse","query","temp","params","re","exec","k","v","substring","prop","arr","getParamsAsObject","match","search","getSearchString","keyPath","lastKeyIndex","uuid","u","rb","random","arrayWithoutHoles","arr2","iterableToArray","iter","nonIterableSpread","toConsumableArray","createCommonjsModule","fn","_typeof_1","_typeof2","regenerator","runtime","Op","hasOwn","$Symbol","iteratorSymbol","asyncIteratorSymbol","asyncIterator","toStringTagSymbol","wrap","innerFn","outerFn","tryLocsList","protoGenerator","Generator","generator","context","Context","_invoke","state","doneResult","delegate","delegateResult","maybeInvokeDelegate","ContinueSentinel","sent","_sent","dispatchException","abrupt","record","tryCatch","makeInvokeMethod","GeneratorFunction","GeneratorFunctionPrototype","IteratorPrototype","getProto","NativeIteratorPrototype","Gp","defineIteratorMethods","AsyncIterator","PromiseImpl","previousPromise","callInvokeWithMethodAndArg","invoke","__await","unwrapped","info","resultName","nextLoc","pushTryEntry","locs","entry","tryLoc","catchLoc","finallyLoc","afterLoc","tryEntries","resetTryEntry","completion","reset","iterable","iteratorMethod","isNaN","displayName","isGeneratorFunction","genFun","ctor","mark","setPrototypeOf","__proto__","awrap","reverse","pop","skipTempReset","prev","charAt","stop","rootRecord","rval","exception","handle","loc","caught","hasCatch","hasFinally","finallyEntry","complete","finish","thrown","delegateYield","regeneratorRuntime","accidentalStrictMode","Function","asyncGeneratorStep","gen","_next","_throw","asyncToGenerator","objectSpread2","FUNC","UNDEF","ACTION_TEST","$$observable","observable","msg","createStore","reducer","preloadedState","enhancer","currentReducer","currentState","currentListeners","nextListeners","isDispatching","ensureCanMutateNextListeners","subscribe","listener","isSubscribed","splice","dispatch","action","listeners","base","replaceReducer","nextReducer","outerSubscribe","observer","observeState","unsubscribe","getUndefinedStateErrorMessage","actionType","combineReducers","reducers","reducerKeys","finalReducers","shapeAssertionError","finalReducerKeys","initialState","REDUCER","assertReducerShape","hasChanged","nextState","_i","_key","previousStateForKey","nextStateForKey","errorMessage","compose","_len","funcs","applyMiddleware","middlewares","chain","store","_dispatch","middlewareAPI","middleware","coreEvents","nonEvents","EVENTS","curr","registerPluginType","pluginReadyType","isReservedAction","includes","ID","ANONID","ANON_ID","PREFIX","USER_ID","USER_TRAITS","utmRegex","propRegex","traitRegex","initializeMiddleware","_instance$storage","bootstrap","persistedUser","anonymousId","paramsArray","an_uid","an_event","groupedParams","cleanName","keyName","userReducer","setItemEnd","getPersistedUserData","tempKey","getUserPropFunc","currentId","persistedInfo","identifyMiddleware","currentTraits","userIdChanged","old","runCallback","waitForReady","predicate","queue","ms","_","processQueue","getPlugins","pluginMethods","_store$getState","offline","actions","pipeline","plugin","process","processIndex","requeue","requeueIndex","processAction","currentPlugin","currentMethod","enrichedPayload","enrich","pluginEvent","called","reQueueActions","heartBeat","setInterval","arrayWithHoles","iterableToArrayLimit","_arr","_n","_d","_e","_s","nonIterableRest","slicedToArray","fitlerDisabledPlugins","allPlugins","settings","fromCallOptions","enabled","endsWithStartRegex","bootstrapRegex","readyRegex","runPlugins","_x","_x2","_x3","_x4","_x5","_callee","eventsInfo","pluginObject","originalType","updatedType","activePlugins","allActivePluginKeys","allMatches","actionBefore","actionDuring","afterName","actionAfter","_context","initializeStart","fromEnable","initialized","getAllMatchingCalls","processEvent","exact","before","namespaced","beforeNS","shouldAbortAll","during","duringNS","after","afterNS","meta","hasCallback","rid","_x6","_processEvent","_callee5","EVENTS$$1","isStartEvent","abortable","makeArgs","queueData","payloads","resolvedAction","endAction","_context5","pluginName","argumentFactory","thing","methodName","addToQueue","_ref6","_callee3","scoped","curScope","scopedPayload","_context3","_ref7","_callee2","count","curScopeData","genAbort","val","returnValue","_context2","currentAct","pname","otherPlug","reason","callsite","caller","validateMethod","getConfig","_x10","_x11","_x12","_x7","_x8","_x9","_ref9","_callee4","lastLoop","currentActionValue","payloadValue","funcArgs","merged","nameSpaceEvent","updatedPayload","_context4","shouldAbort","abortDispatch","_x13","_x14","_x15","originalAction","abortEvent","pluginState","pluginData","getPluginFunctions","getEventNames","eventType","namespace","formatMethod","postFix","word","_nameSpacedEvents$map","_nameSpacedEvents$map2","beforeFuncs","duringFuncs","afterFuncs","_ref4","_ref5","pluginsCount","isArray$1","abortablePlugins","otherPlugin","abortF","pluginsToAbort","abortFunction","notAbortableError","formatPayload","actionName","getNameSpacedAction","sub","subText","pluginMiddleware","systemEvents","isReady","updatedAction","pluginsArray","allRegisteredPlugins","completed","failed","disabled","waitForPluginsToLoad","updated","enablePlugin","disablePlugin","initializeEnd","events","calls","ready","storageMiddleware","osName","locale","timeZone","classCallCheck","Constructor","DynamicMiddleware","_this","position","findIndex","act","createReducer","newState","getNameFromEventType","isEnabled","Boolean","_name","_plugin","togglePluginStatus","baseName","pluginKey","os","navigator","appVersion","getBrowserOS","_navigator","language","languages","userLanguage","getBrowserLocale","Intl","DateTimeFormat","resolvedOptions","getTimeZone","sessionId","version","onLine","userAgent","library","timezone","online","excludeItems","makeContext","serialize","hashRegex","urlPath","matches","currentUrl","canonical","tag","tags","getAttribute","canonicalUrl","href","_document","_window","innerWidth","innerHeight","hash","width","height","initialState$1","last","history","viewData","initialState$2","trackReducer","trackEvent","initialState$3","queueReducer","actionChain","listen","func","toAdd","ev","watch","cb","Debug","createStore$$1","origDispatch","composeWithDebug","ensureArray","singleOrArray","getCallbackFromArgs","argArray","processArray","timeStamp","getTime","deferredPromiseResolver","resolver","generateMeta","possibleCallbacks","ts","customReducers","initialUser","parsedOptions","NAMESPACE","ERROR_URL","definedEvents","enabledFromMerge","enabledFromPluginConfig","pluginEnabled","appendArguments","allEvents","allEventsUnique","Set","getUserProp","customPlugins","pluginEvents","uniqueEvents","allSystemEvents","sort","allPluginEvents","addMiddleware","removeMiddleware","dynamicMiddlewares","nonAbortable","visitorInfo","an_aid","_page","_track","_identify","enable","disable","resolvedId","identifyStart","previousId","eventName","trackStart","pageStart","resetStart","startRegex","beforeHandler","afterHandler","handler","once","detachListener","actionData","_private","dispatchData","setItemStart","removeItemStart","setAnonymousId","enrichMiddleware","storeAPI","coreReducers","composeEnhancers","composeWithGlobalDebug","devTools","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","traceLimit","initialConfig","intialPluginState","enhanceDispatch","callbacks","newEvent","pluginKeys","enabledPlugins","disabledPlugins","originalArgs","argsToPass","registerPlugins","defaultSettings","cachedSetTimeout","cachedClearTimeout","defaultSetTimout","defaultClearTimeout","runTimeout","fun","currentQueue","draining","queueIndex","cleanUpNextTick","drainQueue","len","run","marker","runClearTimeout","Item","noop","nextTick","browser","env","argv","versions","addListener","off","removeListener","removeAllListeners","emit","prependListener","prependOnceListener","binding","cwd","chdir","dir","umask","createQueryBuilder","createExpressionBuilder","memoize","normalKey","_build","unparameterized","escape","expression","defaultContext","createNewContext","createChain","createReducers","updateContext","applyReducers","express","builderProperties","newContext","queries","inheritedContext","methodProperties","extend","builder","executeProperties","one","oneCallback","tableName","userAssociatedRecordsOnly","allCallback","_tableName","_methodProperties","inherit","whr","separator","sql","ret","frm","grp","hav","ord","with","createExpressionCompiler","aggregator","op","columnName","expressions","compile","max","min","avg","sum","buildCalls","pushCall","createCallsCompiler","expressionTable","exp","minArgs","maxArgs","numArgs","callsCompiler","mapJoinWrap","close","cache","given_key","clauses","common","fromItems","distinctOn","distinct","delete","rollup","cube","groupingSets","withRecursive","recursive","return","groupBy","union","unionAll","intersect","intersectAll","except","exceptAll","orderBy","leftJoin","rightJoin","fullJoin","crossJoin","naturalJoin","naturalLeftJoin","naturalRightJoin","naturalFullJoin","clause","str","userType","buildDistinct","buildArg","buildArrayArg","buildCubeOrRollupArg","buildCubeOrRollupArrayArg","first","by","nulls","limitOffset","buildValuesArray","unaryPre","unaryPost","unaryFunction","binary","ternary","nary","naryFunction","oneValue","compositeValue","membership","quantifiedComparison","dateBinary","row","unknown","boolean","number","string","table","and","or","not","isTrue","isNotTrue","isFalse","isNotFalse","isUnknown","isNotUnknown","comparison","eq","neq","lt","gt","lte","gte","between","isDistinctFrom","isNotDistinctFrom","isNull","isNotNull","in","notIn","eqAny","neqAny","ltAny","gtAny","lteAny","gteAny","eqAll","neqAll","ltAll","gtAll","lteAll","gteAll","dateComparison","dateLt","dateGt","dateLte","dateGte","math","add","mul","div","mod","sqrt","cbrt","fact","abs","like","notLike","unnest","Number","MAX_SAFE_INTEGER","op1","op2","arg1","arg2","buildValuesList","inDate","getMonth","getFullYear","getDate","escapeLiteral","hasBackslash","escaped","POST_TYPES","DB_STATUS","EXECUTE_COUNT","oMetaKey","validObservableOptionKeys","validObserverOptionKeys","pathsOf","pathsFrom","propertiesBluePrint","observe","observers","some","warn","invalidOptions","option","processObserveOptions","unobserve","oMeta","ol","al","prepareObject","getObservedOf","prepareArray","prepareTypedArray","filterChanges","changes","oPath","change","oPathsOf","oPathsFrom","callObserverSafe","callObserversFromMT","batches","callObservers","relevantChanges","newPath","tmp","currentObservable","queueMicrotask","find","tmpa","parent","ownKey","ArrayOMeta","proxy","TypedArrayOMeta","ObjectOMeta","proxiedReverse","tmpObserved","proxiedSort","comparator","proxiedFill","filVal","tarLen","fill","tmpTarget","detach","proxiedCopyWithin","dest","copyWithin","nItem","oItem","proxiedArrayMethods","poppedIndex","popResult","pushContent","initialLength","pushResult","Reflect","shiftResult","unshift","unshiftContent","unshiftResult","splLen","spliceContent","startIndex","removed","inserted","spliceResult","newTarLen","proxiedTypedArrayMethods","souLen","OMetaBase","cloningFunction","targetClone","revocable","Proxy","processOptions","newValue","super","Observable","freeze","__spreadArray","to","il","utilsFactory","globals","generateAuthBody","stamp","now","token","token_time","session","generateBareUrl","integrationID","log","logging","__awaiter","_arguments","P","fulfilled","step","__generator","f","y","trys","ops","verb","authFactory","_a","_clearTokens","refreshToken","newTokenCallback","userID","initAuth","t1","integrationType","resData","validTokenRes","elapsed","error_8","floor","ebconfig","HANDSHAKE","tt","mounted","tokenPost","VALID_TOKEN","success","postType","req_res","error_9","_auth","ErrorCode","REQUEST_TOKEN","code","errorCode","tokenPostAttachment","customHeaders","regularAuthbody","attachmentAuth","error_10","UPLOAD_ATTACHMENT","signUp","newUserID","password","userAttributes","signUpRes","error_5","SIGN_UP","setUserAttribute","setAttrsRes","error_2","SET_ATTRIBUTE","getUserAttributes","attrsRes","error_1","USER_ATTRIBUTES","signIn","resData_1","error_6","Sha256","digest","hashOut","hexHash","signOut","resetUserPassword","currentPassword","newPassword","error_7","RESET_PASSWORD","forgotPassword","username","emailTemplate","error_3","FORGOT_PASSWORD_SEND","forgotPasswordConfirm","error_4","FORGOT_PASSWORD_CONFIRM","EasybaseProvider","_b","_c","Query","fullOptions","res","queryName","GET_QUERY","fullTableSize","TABLE_SIZE","tableTypes","COLUMN_TYPES","tableFactory","_listenerIndex","_listeners","_runListeners","trx","PENDING","ALL","EASY_QB","SUCCESS","ERROR","ONE","db","dbEventListener","currKey","dbFactory","_isFrameInitialized","_frameConfiguration","_observedChangeStack","_recordIdMap","WeakMap","_observableFrame","_frame","isSyncing","sync","_realignFrames","newData","isNewDataTheSame","newDataNoId","_id","oldframe","currNewEle","allChanges","SYNC_STACK","GET_FRAME","_updateRecordAttachment","_frameRecord","ext","ele","attachment","uri","configureFrame","addRecord","insertAtEnd","newRecord","SYNC_INSERT","deleteRecord","SYNC_DELETE","Frame","currentConfiguration","updateRecordImage","updateRecordVideo","updateRecordFile","isBadInt","my_int","isBadString","my_string","isBadIntegrationID","isBadObject","my_obj","authentication","customQuery","fetch_body","post","my_bool","updateValues","Delete","callFunction","route","postBody"],"mappings":"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","file":"bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"EasyBase\"] = factory();\n\telse\n\t\troot[\"EasyBase\"] = factory();\n})(window, function() {\nreturn "," \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t};\n\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t0: 0\n \t};\n\n\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"\" + chunkId + \".bundle.js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonpEasyBase\"] = window[\"webpackJsonpEasyBase\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 53);\n","const buildUtils = require('./build_utils')\nconst changeCase = require('./change_case')\nconst taggedTemplate = require('./tagged_template')\n\nmodule.exports = {\n  ...buildUtils,\n  ...changeCase,\n  ...taggedTemplate\n}","/*\n// set\ncookie('test', 'a')\n\n// complex set - cookie(name, value, ttl, path, domain, secure)\ncookie('test', 'a', 60*60*24, '/api', '*.example.com', true)\n\n// get\ncookie('test')\n\n// destroy\ncookie('test', '', -1)\n*/\nfunction cookie(name, value, ttl, path, domain, secure) {\n  if (typeof window === 'undefined') return;\n  /* Set values */\n\n  if (arguments.length > 1) {\n    // eslint-disable-next-line no-return-assign\n    return document.cookie = name + '=' + encodeURIComponent(value) + ( // eslint-disable-next-line operator-linebreak\n    !ttl ? '' : // Has TTL set expiration on cookie\n    '; expires=' + new Date(+new Date() + ttl * 1000).toUTCString() + ( // If path set path\n    !path ? '' : '; path=' + path) + ( // If domain set domain\n    !domain ? '' : '; domain=' + domain) + ( // If secure set secure\n    !secure ? '' : '; secure'));\n  }\n\n  return decodeURIComponent((('; ' + document.cookie).split('; ' + name + '=')[1] || '').split(';')[0]);\n}\n\nfunction hasCookieSupport() {\n  try {\n    var key = '_c_'; // Try to set cookie\n\n    cookie(key, '1');\n    var valueSet = document.cookie.indexOf(key) !== -1; // Cleanup cookie\n\n    cookie(key, '', -1);\n    return valueSet;\n  } catch (e) {\n    return false;\n  }\n}\n\n/**\n * Get a cookie value\n * @param  {string} name - key of cookie\n * @return {string} value of cookie\n */\n\nvar getCookie = cookie;\n/**\n * Set a cookie value\n * @param {string} name  - key of cookie\n * @param {string} value - value of cookie\n * @param {string} days  - days to keep cookie\n */\n\nvar setCookie = cookie;\n/**\n * Remove a cookie value.\n * @param {string} name  - key of cookie\n */\n\nfunction removeCookie(name) {\n  return cookie(name, '', -1);\n}\n\nexport { hasCookieSupport, setCookie, getCookie, removeCookie };\n","var global = typeof self !== 'undefined' ? self : this;\nvar __self__ = (function () {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = global.DOMException\n}\nF.prototype = global;\nreturn new F();\n})();\n(function(self) {\n\nvar irrelevant = (function (exports) {\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  Object.defineProperty(exports, '__esModule', { value: true });\n\n  return exports;\n\n}({}));\n})(__self__);\n__self__.fetch.ponyfill = true;\n// Remove \"polyfill\" property added by whatwg-fetch\ndelete __self__.fetch.polyfill;\n// Choose between native implementation (global) or custom implementation (__self__)\n// var ctx = global.fetch ? global : __self__;\nvar ctx = __self__; // this line disable service worker support temporarily\nexports = ctx.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = ctx.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = ctx.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = ctx.Headers\nexports.Request = ctx.Request\nexports.Response = ctx.Response\nmodule.exports = exports\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nimport Analytics from 'analytics';\nimport googleAnalytics from '@analytics/google-analytics';\nvar GlobalNamespace;\n(function (GlobalNamespace) {\n})(GlobalNamespace || (GlobalNamespace = {}));\nvar _g = __assign({}, GlobalNamespace);\nexport default _g;\nexport function gFactory(integration, options) {\n    if (integration && options && options.googleAnalyticsId) {\n        if (options.googleAnalyticsId.startsWith(\"G-\")) {\n            // TODO: handle GA4 https://github.com/DavidWells/analytics\n            console.error(\"Google Analytics 4 tracking Id detected. This version is not supported, please use Universal Analytics instead https://support.google.com/analytics/answer/10269537?hl=en\");\n            return __assign({}, GlobalNamespace);\n        }\n        else {\n            var analytics = Analytics({\n                app: integration,\n                plugins: [\n                    googleAnalytics({\n                        trackingId: options.googleAnalyticsId,\n                        debug: process ? process.env.NODE_ENV === 'development' : false\n                    })\n                ]\n            });\n            return __assign(__assign({}, GlobalNamespace), { analytics: analytics });\n        }\n    }\n    else {\n        return __assign({}, GlobalNamespace);\n    }\n}\n","import { hasCookieSupport, getCookie, setCookie, removeCookie } from '@analytics/cookie-utils';\nexport { getCookie, setCookie, removeCookie, hasCookieSupport } from '@analytics/cookie-utils';\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nfunction hasLocalStorage() {\n\n  try {\n    if (typeof localStorage === 'undefined' || typeof JSON === 'undefined') {\n      return false;\n    } // test for safari private\n\n\n    localStorage.setItem('_t_', '1');\n    localStorage.removeItem('_t_');\n  } catch (err) {\n    return false;\n  }\n\n  return true;\n}\n\nfunction parse(input) {\n  var value;\n\n  try {\n    value = JSON.parse(input);\n\n    if (typeof value === 'undefined') {\n      value = input;\n    }\n\n    if (value === 'true') {\n      value = true;\n    }\n\n    if (value === 'false') {\n      value = false;\n    }\n\n    if (parseFloat(value) === value && _typeof(value) !== 'object') {\n      value = parseFloat(value);\n    }\n  } catch (e) {\n    value = input;\n  }\n\n  return value;\n}\n\nvar globalContext = (typeof self === \"undefined\" ? \"undefined\" : _typeof(self)) === 'object' && self.self === self && self || (typeof global === \"undefined\" ? \"undefined\" : _typeof(global)) === 'object' && global.global === global && global || undefined;\n\nvar ALL = '*';\nvar LOCAL_STORAGE = 'localStorage';\nvar COOKIE = 'cookie';\nvar GLOBAL = 'global'; // Verify support\n\nvar hasStorage = hasLocalStorage();\nvar hasCookies = hasCookieSupport();\n/**\n * Get storage item from localStorage, cookie, or window\n * @param  {string} key - key of item to get\n * @param  {object|string} [options] - storage options. If string location of where to get storage\n * @param  {string} [options.storage] - Define type of storage to pull from.\n * @return {Any}  the value of key\n */\n\nfunction getItem(key) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if (!key) return null;\n  var storageType = getStorageType(options); // Get value from all locations\n\n  if (storageType === ALL) return getAll(key);\n  /* 1. Try localStorage */\n\n  if (useLocal(storageType)) {\n    var value = localStorage.getItem(key);\n    if (value || storageType === LOCAL_STORAGE) return parse(value);\n  }\n  /* 2. Fallback to cookie */\n\n\n  if (useCookie(storageType)) {\n    var _value = getCookie(key);\n\n    if (_value || storageType === COOKIE) return parse(_value);\n  }\n  /* 3. Fallback to window/global. */\n\n\n  return globalContext[key] || null;\n}\n\nfunction getAll(key) {\n  return {\n    cookie: parse(getCookie(key)),\n    localStorage: parse(localStorage.getItem(key)),\n    global: globalContext[key] || null\n  };\n}\n/**\n * Store values in localStorage, cookie, or window\n * @param {string} key - key of item to set\n * @param {*} value - value of item to set\n * @param {object|string} [options] - storage options. If string location of where to get storage\n * @param {string} [options.storage] - Define type of storage to pull from.\n * @returns {object} returns old value, new values, & location of storage\n */\n\n\nfunction setItem(key, value) {\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n  if (!key || typeof value === 'undefined') {\n    return;\n  }\n\n  var data = {};\n  var storageType = getStorageType(options);\n  var saveValue = JSON.stringify(value);\n  var setAll = storageType === ALL;\n  /* 1. Try localStorage */\n\n  if (useLocal(storageType)) {\n    // console.log('SET as localstorage', saveValue)\n    var values = {\n      current: value,\n      previous: parse(localStorage.getItem(key)) // Set LocalStorage item\n\n    };\n    localStorage.setItem(key, saveValue);\n\n    if (!setAll) {\n      return _objectSpread2({\n        location: LOCAL_STORAGE\n      }, values);\n    } // Set object\n\n\n    data[LOCAL_STORAGE] = values;\n  }\n  /* 2. Fallback to cookie */\n\n\n  if (useCookie(storageType)) {\n    // console.log('SET as cookie', saveValue)\n    var cookieValues = {\n      current: value,\n      previous: parse(getCookie(key)) // Set Cookie\n\n    };\n    setCookie(key, saveValue);\n\n    if (!setAll) {\n      return _objectSpread2({\n        location: COOKIE\n      }, cookieValues);\n    } // Set object\n\n\n    data[COOKIE] = cookieValues;\n  }\n  /* 3. Fallback to window/global */\n\n\n  var globalValues = {\n    current: value,\n    previous: globalContext[key] // Set global value\n\n  };\n  globalContext[key] = value;\n\n  if (!setAll) {\n    return _objectSpread2({\n      location: GLOBAL\n    }, globalValues);\n  } // Set object\n\n\n  data[GLOBAL] = globalValues;\n  return data;\n}\n/**\n * Remove values from localStorage, cookie, or window\n * @param {string} key - key of item to set\n * @param {object|string} [options] - storage options. If string location of where to get storage\n * @param {string} [options.storage] - Define type of storage to pull from.\n */\n\nfunction removeItem(key) {\n  var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  if (!key) return false;\n  var storageType = getStorageType(options);\n  var removeAll = storageType === ALL;\n  var locations = [];\n\n  if (removeAll || useLocal(storageType)) {\n    /* 1. Try localStorage */\n    localStorage.removeItem(key);\n    locations.push(LOCAL_STORAGE);\n  }\n\n  if (removeAll || useCookie(storageType)) {\n    /* 2. Fallback to cookie */\n    removeCookie(key);\n    locations.push(COOKIE);\n  }\n  /* 3. Fallback to window/global */\n\n\n  if (removeAll || useGlobal(storageType)) {\n    globalContext[key] = undefined;\n    locations.push(GLOBAL);\n  }\n\n  return locations;\n}\n\nfunction getStorageType(options) {\n  return typeof options === 'string' ? options : options.storage;\n}\n\nfunction useGlobal(storage) {\n  return !storage || storage === GLOBAL;\n}\n\nfunction useLocal(storage) {\n  // If has localStorage and storage option not defined, or is set to 'localStorage' or '*'\n  return hasStorage && (!storage || storage === LOCAL_STORAGE || storage === ALL);\n}\n\nfunction useCookie(storage) {\n  // If has cookies and storage option not defined, or is set to 'cookies' or '*'\n  return hasCookies && (!storage || storage === COOKIE || storage === ALL);\n}\nvar index = {\n  getItem: getItem,\n  setItem: setItem,\n  removeItem: removeItem\n};\n\nexport default index;\nexport { ALL, LOCAL_STORAGE, COOKIE, GLOBAL, getItem, setItem, removeItem, globalContext, hasLocalStorage as hasLocalStorageSupport };\n","const {\n  isObject,\n  buildCall,\n  mapJoin,\n  objectMapJoin\n} = require('../../lib-util')\nconst conditions = require('./conditions')\nconst valuesArray = require('./values_array')\n\nmodule.exports = (ctx, items, start = 0, end = items.length) => {\n  if (end > items.length) end = items.length\n  let txt = ''\n  for (let i = start; i < end; ++i) {\n    const item = items[i]\n    if (i !== start) txt += item.join\n    txt += fromItem(ctx, item.args)\n    if (item.on) txt += ` on ${conditions(ctx, item.on)}`\n    else if (item.using) txt += ` using (${using(ctx, item.using)})`\n  }\n  return txt\n}\n\nconst usingArg = (ctx, arg) => {\n  if (typeof arg === 'string') return arg\n  if (typeof arg === 'function') return ctx.build(arg)\n  throw Error('Error: Invalid .using arg')\n}\nconst using = mapJoin(buildCall(mapJoin(usingArg)))\n\nconst fromArg = (ctx, arg) => {\n  if (typeof arg === 'string') return arg\n  if (typeof arg === 'function') return ctx.build(arg)\n  if (isObject(arg)) return buildObject(ctx, arg)\n  throw Error('Error: Invalid .from argument:', arg)\n}\n\nconst buildProperty = (ctx, key, value) => {\n  if (typeof value === 'string') return `${value} ${ctx.mapKey(key)}`\n  if (typeof value === 'function')\n    return `${ctx.build(value)} ${ctx.mapKey(key)}`\n  if (Array.isArray(value)) {\n    const { columns, values } = valuesArray(ctx, value)\n    return `(${values}) ${ctx.mapKey(key)}(${columns})`\n  }\n  throw Error('Error: Invalid .from argument')\n}\n\nconst buildObject = objectMapJoin(buildProperty)\nconst fromItem = buildCall(mapJoin(fromArg))\n","const { mapJoin } = require('../../lib-util')\n\nmodule.exports = (ctx, array) => {\n  const keys = uniqueKeys(array)\n  return {\n    columns: columns(ctx, keys),\n    values: values(ctx, array, keys)\n  }\n}\n\n// gets unique keys in object array\nconst uniqueKeys = array => {\n  const keys = {}\n  for (const object of array) {\n    for (const key in object) {\n      keys[key] = true\n    }\n  }\n  return Object.keys(keys)\n}\n\n// gets column string from unique keys of object array\nconst columns = mapJoin((ctx, arg) => ctx.mapKey(arg))\n\n// gets values string of object array\nconst values = (ctx, source, keys) => {\n  let txt = 'values '\n  for (let i = 0; i < source.length; ++i) {\n    if (i !== 0) txt += ', '\n    txt += '('\n    const object = source[i]\n    for (let j = 0; j < keys.length; ++j) {\n      if (j !== 0) txt += ', '\n      txt += value(ctx, object[keys[j]])\n    }\n    txt += ')'\n  }\n  return txt\n}\n\nconst value = (ctx, arg) => {\n  if (arg === undefined) return 'default'\n  return ctx.build(arg)\n}\n","const {\n  isTaggedTemplate,\n  buildTaggedTemplate,\n  isObject,\n  mapJoin,\n  objectMapJoin\n} = require('../../lib-util')\n\nconst buildCall = callbackfn => (ctx, args) =>\n  isTaggedTemplate(args)\n    ? `(${buildTaggedTemplate(ctx, args)})`\n    : callbackfn(ctx, args)\n\nconst buildArg = (ctx, arg) =>\n  isObject(arg) ? buildObject(ctx, arg) : ctx.build(arg)\n\nconst valuesList = mapJoin((ctx, arg) => ctx.build(arg))\n\nconst buildProperty = (ctx, key, value) => {\n  const name = ctx.mapKey(key)\n  if (value === null) return `(${name} is null)`\n  if (Array.isArray(value)) return `(${name} in (${valuesList(ctx, value)}))`\n  return `(${name} = ${ctx.build(value)})`\n}\n\nconst buildObject = objectMapJoin(buildProperty, ' and ')\nmodule.exports = mapJoin(buildCall(mapJoin(buildArg, ' and ')), ' and ')\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","const core = require('./lib-core')\nconst dialect = require('./dialect-postgres')\n\nconst a = core({ dialect });\na.from = undefined;\nmodule.exports = a;\n","const {\n  isObject,\n  buildCall,\n  mapJoin,\n  objectMapJoin\n} = require('../../lib-util')\n\nconst buildArg = (ctx, arg) => {\n  if (typeof arg === 'string') return arg\n  if (isObject(arg)) return buildObject(ctx, arg)\n  return ctx.build(arg)\n}\n\nconst buildProperty = (ctx, key, value) => {\n  const expression = typeof value === 'string' ? value : ctx.build(value)\n  return `${expression} ${ctx.mapKey(key)}`\n}\n\nconst buildObject = objectMapJoin(buildProperty)\nmodule.exports = mapJoin(buildCall(mapJoin(buildArg)))\n","const { isTaggedTemplate, buildTaggedTemplate } = require('../../lib-util')\n\nmodule.exports = (ctx, args) => {\n  if (isTaggedTemplate(args)) return buildTaggedTemplate(ctx, args)\n  const arg = args[0]\n  if (typeof arg === 'number') return ctx.parameterize(arg)\n  if (typeof arg === 'function') return ctx.build(arg)\n  throw Error('Error: Invalid limit/offset argument')\n}\n","export default function dlv(obj, key, def, p, undef) {\n\tkey = key.split ? key.split('.') : key;\n\tfor (p = 0; p < key.length; p++) {\n\t\tobj = obj ? obj[key[p]] : undef;\n\t}\n\treturn obj === undef ? def : obj;\n}\n","const isTaggedTemplate = ([strings]) => Array.isArray(strings) && strings.raw\n\nconst buildTaggedTemplate = (ctx, [strings, ...args]) => {\n  let txt = strings[0]\n  for (let i = 0; i < args.length; ++i) {\n    txt += ctx.build(args[i]) + strings[i + 1]\n  }\n  return txt\n}\n\nmodule.exports = {\n  isTaggedTemplate,\n  buildTaggedTemplate\n}","module.exports = {\n  wth: require('./with'),\n  select: require('./select'),\n  from: require('./from'),\n  where: require('./where'),\n  group: require('./group'),\n  having: require('./having'),\n  setop: require('./setop'),\n  order: require('./order'),\n  limit: require('./limit'),\n  offset: require('./offset'),\n  del: require('./delete'),\n  returning: require('./returning'),\n  insert: require('./insert'),\n  update: require('./update'),\n  set: require('./set')\n}\n","// googleAnalytics events from a node server environment.\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    var ownKeys = Object.keys(source);\n\n    if (typeof Object.getOwnPropertySymbols === 'function') {\n      ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) {\n        return Object.getOwnPropertyDescriptor(source, sym).enumerable;\n      }));\n    }\n\n    ownKeys.forEach(function (key) {\n      _defineProperty(target, key, source[key]);\n    });\n  }\n\n  return target;\n}\n\n/* global ga */\nvar defaultConfig = {\n  /* See description below */\n  trackingId: null,\n\n  /* See description below */\n  debug: false,\n\n  /* See description below */\n  anonymizeIp: false,\n\n  /* See description below */\n  customDimensions: {},\n\n  /* See description below */\n  resetCustomDimensionsOnPage: [],\n\n  /* See description below */\n  setCustomDimensionsToPage: true\n  /* Custom metrics https://bit.ly/3c5de88 */\n  // TODO customMetrics: { key: 'metric1' }\n\n  /* Content groupings https://bit.ly/39Zt3Me */\n  // TODO contentGroupings: { key: 'contentGroup1' }\n\n};\nvar loadedInstances = {};\n/**\n * Google analytics plugin\n * @link https://getanalytics.io/plugins/google-analytics/\n * @link https://analytics.google.com/analytics/web/\n * @link https://developers.google.com/analytics/devguides/collection/analyticsjs\n * @param {object}  pluginConfig - Plugin settings\n * @param {string}  pluginConfig.trackingId - Google Analytics site tracking Id\n * @param {boolean} [pluginConfig.debug] - Enable Google Analytics debug mode\n * @param {boolean} [pluginConfig.anonymizeIp] - Enable [Anonymizing IP addresses](https://bit.ly/3c660Rd) sent to Google Analytics. [See details below](#anonymize-visitor-ips)\n * @param {object}  [pluginConfig.customDimensions] - Map [Custom dimensions](https://bit.ly/3c5de88) to send extra information to Google Analytics. [See details below](#using-ga-custom-dimensions)\n * @param {object}  [pluginConfig.resetCustomDimensionsOnPage] - Reset custom dimensions by key on analytics.page() calls. Useful for single page apps.\n * @param {boolean} [pluginConfig.setCustomDimensionsToPage] - Mapped dimensions will be set to the page & sent as properties of all subsequent events on that page. If false, analytics will only pass custom dimensions as part of individual events\n * @param {string}  [pluginConfig.instanceName] - Custom tracker name for google analytics. Use this if you need multiple googleAnalytics scripts loaded\n * @param {string}  [pluginConfig.customScriptSrc] - Custom URL for google analytics script, if proxying calls\n * @param {object}  [pluginConfig.cookieConfig] - Additional cookie properties for configuring the [ga cookie](https://developers.google.com/analytics/devguides/collection/analyticsjs/cookies-user-id#configuring_cookie_field_settings)\n * @param {object}  [pluginConfig.tasks] - [Set custom google analytic tasks](https://developers.google.com/analytics/devguides/collection/analyticsjs/tasks)\n * @return {*}\n * @example\n *\n * googleAnalytics({\n *   trackingId: 'UA-1234567'\n * })\n */\n\nfunction googleAnalytics$1() {\n  var pluginConfig = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var pageCalledOnce = false; // Allow for multiple google analytics instances\n\n  var _getInstanceDetails = getInstanceDetails(pluginConfig),\n      instanceName = _getInstanceDetails.instanceName,\n      instancePrefix = _getInstanceDetails.instancePrefix;\n\n  return {\n    name: 'google-analytics',\n    config: _objectSpread({}, defaultConfig, pluginConfig),\n    // Load google analytics\n    initialize: function initialize(pluginApi) {\n      var config = pluginApi.config,\n          instance = pluginApi.instance;\n      if (!config.trackingId) throw new Error('No GA trackingId defined');\n      var customDimensions = config.customDimensions,\n          customScriptSrc = config.customScriptSrc; // var to hoist\n\n      var scriptSrc = customScriptSrc || 'https://www.google-analytics.com/analytics.js'; // Load google analytics script to page\n\n      if (gaNotLoaded(scriptSrc)) {\n        /* eslint-disable */\n        (function (i, s, o, g, r, a, m) {\n          i['GoogleAnalyticsObject'] = r;\n          i[r] = i[r] || function () {\n            (i[r].q = i[r].q || []).push(arguments);\n          }, i[r].l = 1 * new Date();\n          a = s.createElement(o), m = s.getElementsByTagName(o)[0];\n          a.async = 1;\n          a.src = g;\n          m.parentNode.insertBefore(a, m);\n        })(window, document, 'script', scriptSrc, 'ga');\n        /* eslint-enable */\n\n      } // Initialize tracker instance on page\n\n\n      if (!loadedInstances[instanceName]) {\n        var gaConfig = _objectSpread({\n          cookieDomain: config.domain || 'auto',\n          siteSpeedSampleRate: config.siteSpeedSampleRate || 1,\n          sampleRate: config.sampleRate || 100,\n          allowLinker: true\n        }, config.cookieConfig);\n\n        if (instanceName) {\n          gaConfig.name = instanceName;\n        }\n\n        ga('create', config.trackingId, gaConfig);\n\n        if (config.debug) {\n          // Disable sends to GA http://bit.ly/2Ro0vTR\n          ga(\"\".concat(instancePrefix, \"set\"), 'sendHitTask', null);\n          window.ga_debug = {\n            trace: true\n          };\n        }\n\n        if (config.anonymizeIp) {\n          ga(\"\".concat(instancePrefix, \"set\"), 'anonymizeIp', true);\n        }\n\n        if (config.tasks) {\n          var taskList = ['customTask', 'previewTask', 'checkProtocolTask', 'validationTask', 'checkStorageTask', 'historyImportTask', 'samplerTask', 'buildHitTask', 'sendHitTask', 'timingTask', 'displayFeaturesTask'];\n          taskList.forEach(function (taskName) {\n            if (config.tasks.hasOwnProperty(taskName)) {\n              var task = config.tasks[taskName];\n\n              if (typeof task === 'function') {\n                ga(config.tasks[taskName]);\n              } else if (task === null) {\n                ga(\"\".concat(instancePrefix, \"set\"), taskName, task);\n              }\n            }\n          });\n        }\n        /* set custom dimensions from user traits */\n\n\n        var user = instance.user() || {};\n        var traits = user.traits || {};\n\n        if (Object.keys(traits).length && customDimensions && Object.keys(customDimensions).length) {\n          var dimensions = formatObjectIntoDimensions$1(traits, config);\n          ga(\"\".concat(instancePrefix, \"set\"), dimensions);\n        }\n\n        loadedInstances[instanceName] = true;\n      }\n    },\n    // Google Analytics page view\n    page: function page(_ref) {\n      var payload = _ref.payload,\n          config = _ref.config,\n          instance = _ref.instance;\n      var properties = payload.properties;\n      var resetCustomDimensionsOnPage = config.resetCustomDimensionsOnPage,\n          customDimensions = config.customDimensions;\n      var campaign = instance.getState('context.campaign');\n      if (gaNotLoaded()) return;\n      /* If dimensions are specifiied to reset, clear them before page view */\n\n      if (resetCustomDimensionsOnPage && resetCustomDimensionsOnPage.length) {\n        var resetDimensions = resetCustomDimensionsOnPage.reduce(function (acc, key) {\n          if (customDimensions[key]) {\n            acc[customDimensions[key]] = null; // { dimension1: null } etc\n          }\n\n          return acc;\n        }, {});\n\n        if (Object.keys(resetDimensions).length) {\n          // Reset custom dimensions\n          ga(\"\".concat(instancePrefix, \"set\"), resetDimensions);\n        }\n      }\n\n      var path = properties.path || document.location.pathname;\n      var pageView = {\n        page: path,\n        title: properties.title,\n        location: properties.url\n      };\n      var pageData = {\n        page: path,\n        title: properties.title // allow referrer override if referrer was manually set\n\n      };\n\n      if (properties.referrer !== document.referrer) {\n        pageData.referrer = properties.referrer;\n      }\n\n      var campaignData = addCampaignData(campaign);\n      var dimensions = setCustomDimensions(properties, config, instancePrefix);\n      /* Dimensions will only be included in the event if config.setCustomDimensionsToPage is false */\n\n      var finalPayload = _objectSpread({}, pageView, campaignData, dimensions);\n\n      ga(\"\".concat(instancePrefix, \"set\"), pageData); // Remove location for SPA tracking after initial page view\n\n      if (pageCalledOnce) {\n        delete finalPayload.location;\n      }\n      /* send page view to GA */\n\n\n      ga(\"\".concat(instancePrefix, \"send\"), 'pageview', finalPayload); // Set after initial page view\n\n      pageCalledOnce = true;\n    },\n\n    /**\n     * Google Analytics track event\n     * @example\n     *\n     * analytics.track('playedVideo', {\n     *   category: 'Videos',\n     *   label: 'Fall Campaign',\n     *   value: 42\n     * })\n     */\n    track: function track(_ref2) {\n      var payload = _ref2.payload,\n          config = _ref2.config,\n          instance = _ref2.instance;\n      var properties = payload.properties,\n          event = payload.event;\n      var label = properties.label,\n          value = properties.value,\n          category = properties.category,\n          nonInteraction = properties.nonInteraction;\n      var campaign = instance.getState('context.campaign'); // TODO inline this trackEvent\n\n      trackEvent$1({\n        hitType: 'event',\n        event: event,\n        label: label,\n        category: category || 'All',\n        value: value,\n        nonInteraction: nonInteraction,\n        campaign: campaign\n      }, config, payload);\n    },\n    identify: function identify(_ref3) {\n      var payload = _ref3.payload,\n          config = _ref3.config;\n      identifyVisitor$1(payload.userId, payload.traits, config);\n    },\n    loaded: function loaded() {\n      return !!window.gaplugins;\n    }\n  };\n}\n\nfunction gaNotLoaded(scriptSrc) {\n  if (scriptSrc) {\n    return !scriptLoaded(scriptSrc);\n  }\n\n  return typeof ga === 'undefined';\n}\n\nfunction getInstanceDetails(pluginConfig) {\n  var instanceName = pluginConfig.instanceName;\n  return {\n    instancePrefix: instanceName ? \"\".concat(instanceName, \".\") : '',\n    instanceName: instanceName\n  };\n}\n/**\n * Send event tracking to Google Analytics\n * @param  {object} eventData - GA event payload\n * @param  {string} [eventData.hitType = 'event'] - hitType https://bit.ly/2Jab9L1 one of 'pageview', 'screenview', 'event', 'transaction', 'item', 'social', 'exception', 'timing'\n * @param  {string} [eventData.event] - event Action https://bit.ly/2CUzeoz\n * @param  {string} [eventData.label] - event Label http://bit.ly/2oo8eb3\n * @param  {string} [eventData.category] - event Category http://bit.ly/2EAy9UP\n * @param  {string} [eventData.nonInteraction = false] - nonInteraction https://bit.ly/2CUzeoz\n * @return {object} sent data\n */\n\n\nfunction trackEvent$1(eventData) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var payload = arguments.length > 2 ? arguments[2] : undefined;\n  if (gaNotLoaded()) return;\n\n  var _getInstanceDetails2 = getInstanceDetails(opts),\n      instancePrefix = _getInstanceDetails2.instancePrefix;\n\n  var data = {\n    // hitType https://bit.ly/2Jab9L1 one of 'pageview', 'screenview', 'event', 'transaction', 'item', 'social', 'exception', 'timing'\n    hitType: eventData.hitType || 'event',\n    // eventAction https://bit.ly/2CUzeoz\n    eventAction: eventData.event,\n    // eventLabel http://bit.ly/2oo8eb3\n    eventLabel: eventData.label,\n    // eventCategory http://bit.ly/2EAy9UP\n    eventCategory: eventData.category || 'All',\n    // nonInteraction https://bit.ly/2CUzeoz\n    nonInteraction: eventData.nonInteraction !== undefined ? !!eventData.nonInteraction : false\n  };\n\n  if (eventData.value) {\n    // how much is this action worth?\n    data.eventValue = format(eventData.value);\n  }\n  /* Attach campaign data */\n\n\n  var campaignData = addCampaignData(eventData);\n  /* Set Dimensions or return them for payload is config.setCustomDimensionsToPage is false */\n\n  var dimensions = setCustomDimensions(payload.properties, opts, instancePrefix);\n\n  var finalPayload = _objectSpread({}, data, campaignData, dimensions);\n  /* Send data to Google Analytics */\n\n\n  ga(\"\".concat(instancePrefix, \"send\"), 'event', finalPayload);\n  return finalPayload;\n}\n/**\n * Add campaign data to GA payload https://bit.ly/34qFCPn\n * @param {Object} [campaignData={}] [description]\n * @param {String} [campaignData.campaignName] - Name of campaign\n * @param {String} [campaignData.campaignSource] - Source of campaign\n * @param {String} [campaignData.campaignMedium] - Medium of campaign\n * @param {String} [campaignData.campaignContent] - Content of campaign\n * @param {String} [campaignData.campaignKeyword] - Keyword of campaign\n */\n\nfunction addCampaignData() {\n  var campaignData = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var campaign = {};\n  var name = campaignData.name,\n      source = campaignData.source,\n      medium = campaignData.medium,\n      content = campaignData.content,\n      keyword = campaignData.keyword;\n  if (name) campaign.campaignName = name;\n  if (source) campaign.campaignSource = source;\n  if (medium) campaign.campaignMedium = medium;\n  if (content) campaign.campaignContent = content;\n  if (keyword) campaign.campaignKeyword = keyword;\n  return campaign;\n}\n/* Todo add includeSearch options \\_()_/\nfunction getPagePath(props, opts = {}) {\n  if (!props) return\n  if (opts.includeSearch && props.search) {\n    return `${props.path}${props.search}`\n  }\n  return props.path\n}\n*/\n// properties, data=opts\n\n\nfunction formatObjectIntoDimensions$1(properties) {\n  var opts = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var customDimensions = opts.customDimensions; // TODO map opts.customMetrics; Object.keys(customMetrics) { key: 'metric1' }\n  // TODO map opts.contentGroupings; Object.keys(contentGroupings) { key: 'contentGroup1' }\n\n  /* Map values from payload to any defined custom dimensions */\n\n  return Object.keys(customDimensions).reduce(function (acc, key) {\n    var dimensionKey = customDimensions[key];\n    var value = get$1(properties, key) || properties[key];\n\n    if (typeof value === 'boolean') {\n      value = value.toString();\n    }\n\n    if (value || value === 0) {\n      acc[dimensionKey] = value;\n      return acc;\n    }\n\n    return acc;\n  }, {});\n}\n\nfunction get$1(obj, key, def, p, undef) {\n  key = key.split ? key.split('.') : key;\n\n  for (p = 0; p < key.length; p++) {\n    obj = obj ? obj[key[p]] : undef;\n  }\n\n  return obj === undef ? def : obj;\n}\n\nfunction setCustomDimensions() {\n  var props = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var opts = arguments.length > 1 ? arguments[1] : undefined;\n  var instancePrefix = arguments.length > 2 ? arguments[2] : undefined;\n  var customDimensions = formatObjectIntoDimensions$1(props, opts);\n\n  if (!Object.keys(customDimensions).length) {\n    return {};\n  } // If setCustomDimensionsToPage false, don't save custom dimensions from event to page\n\n\n  if (!opts.setCustomDimensionsToPage) {\n    return customDimensions;\n  } // Set custom dimensions\n\n\n  ga(\"\".concat(instancePrefix, \"set\"), customDimensions);\n  return {};\n}\n/**\n * Identify a visitor by Id\n * @param  {string} id - unique visitor ID\n */\n\n\nfunction identifyVisitor$1(id) {\n  var traits = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var conf = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  if (gaNotLoaded()) return;\n\n  var _getInstanceDetails3 = getInstanceDetails(conf),\n      instancePrefix = _getInstanceDetails3.instancePrefix;\n\n  if (id) ga(\"\".concat(instancePrefix, \"set\"), 'userId', id);\n\n  if (Object.keys(traits).length) {\n    var custom = formatObjectIntoDimensions$1(traits, conf);\n    ga(\"\".concat(instancePrefix, \"set\"), custom);\n  }\n}\n\nfunction scriptLoaded(scriptSrc) {\n  var scripts = document.querySelectorAll('script[src]');\n  return !!Object.keys(scripts).filter(function (key) {\n    return (scripts[key].src || '') === scriptSrc;\n  }).length;\n}\n\nfunction format(value) {\n  if (!value || value < 0) return 0;\n  return Math.round(value);\n}\n\nvar browser = /*#__PURE__*/Object.freeze({\n  default: googleAnalytics$1,\n  trackEvent: trackEvent$1,\n  identifyVisitor: identifyVisitor$1\n});\n\n/* This module will shake out unused code + work in browser and node  */\n\nvar index = googleAnalytics$1;\n/* init for CDN usage. globalName.init() */\n\nvar init = googleAnalytics$1;\n/* Standalone API */\n\nvar initialize$1 = undefined;\nvar page = undefined;\nvar track = trackEvent$1;\nvar identify = identifyVisitor$1;\n\nexport default index;\nexport { init, identify, track, page, initialize$1 as initialize };\n","export { default as dotProp } from 'dlv';\nexport { default as storage, getCookie, setCookie, globalContext, removeCookie } from '@analytics/storage-utils';\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") {\n    _typeof = function (obj) {\n      return typeof obj;\n    };\n  } else {\n    _typeof = function (obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n    };\n  }\n\n  return _typeof(obj);\n}\n\nfunction isFunction(x) {\n  return typeof x === 'function';\n}\n/** \n * @param x\n * @return {x is string}\n */\n\nfunction isString(x) {\n  return typeof x === 'string';\n}\n/** \n * @param x\n * @return {x is undefined}\n */\n\nfunction isUndefined(x) {\n  return typeof x === 'undefined';\n}\n/** \n * @param x\n * @return {x is boolean}\n */\n\nfunction isBoolean(x) {\n  return typeof x === 'boolean';\n}\n/** \n * @template T\n * @param x\n * @return {x is Array<T>}\n */\n\nfunction isArray(x) {\n  return Array.isArray(x);\n}\n/** \n * @param obj\n * @return {obj is Object}\n */\n\nfunction isObject(obj) {\n  if (_typeof(obj) !== 'object' || obj === null) return false;\n  var proto = obj;\n\n  while (Object.getPrototypeOf(proto) !== null) {\n    proto = Object.getPrototypeOf(proto);\n  }\n\n  return Object.getPrototypeOf(obj) === proto;\n}\n\nfunction decode(s) {\n  try {\n    return decodeURIComponent(s.replace(/\\+/g, ' '));\n  } catch (e) {\n    return null;\n  }\n}\n\nvar inBrowser = typeof document !== 'undefined';\n\n/**\n * @returns {string | undefined}\n */\n\nfunction getBrowserLocale() {\n  if (!inBrowser) return;\n  var _navigator = navigator,\n      language = _navigator.language,\n      languages = _navigator.languages,\n      userLanguage = _navigator.userLanguage;\n  if (userLanguage) return userLanguage; // IE only\n\n  return languages && languages.length ? languages[0] : language;\n}\n\nfunction getTimeZone() {\n  try {\n    return Intl.DateTimeFormat().resolvedOptions().timeZone;\n  } catch (error) {}\n}\n\n/**\n * @param {string | null | undefined} ref\n * @returns {boolean | undefined}\n */\n\nfunction isExternalReferrer(ref) {\n  if (!inBrowser) return false;\n  var referrer = ref || document.referrer;\n\n  if (referrer) {\n    var port = window.document.location.port;\n    var _ref = referrer.split('/')[2];\n\n    if (port) {\n      _ref = _ref.replace(\":\".concat(port), '');\n    }\n\n    return _ref !== window.location.hostname;\n  }\n\n  return false;\n}\n\n/**\n * Check if a script is loaded\n * @param  {String|RegExp} script - Script src as string or regex\n * @return {Boolean} is script loaded\n */\n\nfunction isScriptLoaded(script) {\n  if (!inBrowser) return true;\n  var scripts = document.getElementsByTagName('script');\n  return !!Object.keys(scripts).filter(function (key) {\n    var src = scripts[key].src;\n\n    if (typeof script === 'string') {\n      return src.indexOf(script) !== -1;\n    } else if (script instanceof RegExp) {\n      return src.match(script);\n    }\n\n    return false;\n  }).length;\n}\n\nfunction noOp() {}\n\nfunction paramsClean(url, param) {\n  var search = (url.split('?') || [,])[1]; // eslint-disable-line\n\n  if (!search || search.indexOf(param) === -1) {\n    return url;\n  } // remove all utm params from URL search\n\n\n  var regex = new RegExp(\"(\\\\&|\\\\?)\".concat(param, \"([_A-Za-z0-9\\\"+=.\\\\/\\\\-@%]+)\"), 'g');\n  var cleanSearch = \"?\".concat(search).replace(regex, '').replace(/^&/, '?'); // replace search params with clean params\n\n  var cleanURL = url.replace(\"?\".concat(search), cleanSearch); // use browser history API to clean the params\n\n  return cleanURL;\n}\n\n/**\n * Get a given query parameter value\n * @param  {string} param - Key of parameter to find\n * @param  {string} url - url to search\n * @return {string} match\n */\n\nfunction getValueParamValue(param, url) {\n  return decode((RegExp(\"\".concat(param, \"=(.+?)(&|$)\")).exec(url) || [, ''])[1]);\n}\n\n/**\n * Get search string from given url\n * @param  {string} [url] - optional url string. If no url, window.location.search will be used\n * @return {string} url search string\n */\n\nfunction getSearchString(url) {\n  if (url) {\n    var p = url.match(/\\?(.*)/);\n    return p && p[1] ? p[1].split('#')[0] : '';\n  }\n\n  return inBrowser && window.location.search.substring(1);\n}\n/**\n * Parse url parameters into javascript object\n * @param  {string} [url] - URI to parse. If no url supplied window.location will be used\n * @return {object} parsed url parameters\n */\n\n\nfunction paramsParse(url) {\n  return getParamsAsObject(getSearchString(url));\n}\n/*\n?first=abc&a[]=123&a[]=false&b[]=str&c[]=3.5&a[]=last\nhttps://random.url.com?Target=Report&Method=getStats&fields%5B%5D=Offer.name&fields%5B%5D=Advertiser.company&fields%5B%5D=Stat.clicks&fields%5B%5D=Stat.conversions&fields%5B%5D=Stat.cpa&fields%5B%5D=Stat.payout&fields%5B%5D=Stat.date&fields%5B%5D=Stat.offer_id&fields%5B%5D=Affiliate.company&groups%5B%5D=Stat.offer_id&groups%5B%5D=Stat.date&filters%5BStat.affiliate_id%5D%5Bconditional%5D=EQUAL_TO&filters%5BStat.affiliate_id%5D%5Bvalues%5D=1831&limit=9999\nhttps://random.url.com?Target=Offer&Method=findAll&filters%5Bhas_goals_enabled%5D%5BTRUE%5D=1&filters%5Bstatus%5D=active&fields%5B%5D=id&fields%5B%5D=name&fields%5B%5D=default_goal_name\nhttp://localhost:3000/?Target=Offer&Method=findAll&filters[has_goals_enabled][TRUE]=1&filters[status]=active&filters[wow]arr[]=yaz&filters[wow]arr[]=naz&fields[]=id&fields[]=name&fields[]=default_goal_name */\n\nfunction getParamsAsObject(query) {\n  var params = {};\n  var temp;\n  var re = /([^&=]+)=?([^&]*)/g;\n\n  while (temp = re.exec(query)) {\n    var k = decode(temp[1]);\n    var v = decode(temp[2]);\n\n    if (k.substring(k.length - 2) === '[]') {\n      k = k.substring(0, k.length - 2);\n      (params[k] || (params[k] = [])).push(v);\n    } else {\n      params[k] = v === '' ? true : v;\n    }\n  }\n\n  for (var prop in params) {\n    var arr = prop.split('[');\n\n    if (arr.length > 1) {\n      assign(params, arr.map(function (x) {\n        return x.replace(/[?[\\]\\\\ ]/g, '');\n      }), params[prop]);\n      delete params[prop];\n    }\n  }\n\n  return params;\n}\n\nfunction assign(obj, keyPath, value) {\n  var lastKeyIndex = keyPath.length - 1;\n\n  for (var i = 0; i < lastKeyIndex; ++i) {\n    var key = keyPath[i];\n\n    if (!(key in obj)) {\n      obj[key] = {};\n    }\n\n    obj = obj[key];\n  }\n\n  obj[keyPath[lastKeyIndex]] = value;\n}\n/*\nhttps://github.com/choojs/nanoquery/blob/791cbdfe49cc380f0b2f93477572128946171b46/browser.js\nvar reg = /([^?=&]+)(=([^&]*))?/g\n\nfunction qs (url) {\n  var obj = {}\n  url.replace(/^.*\\?/, '').replace(reg, function (a0, a1, a2, a3) {\n    var value = decodeURIComponent(a3)\n    var key = decodeURIComponent(a1)\n    if (obj.hasOwnProperty(key)) {\n      if (Array.isArray(obj[key])) obj[key].push(value)\n      else obj[key] = [obj[key], value]\n    } else {\n      obj[key] = value\n    }\n  })\n  return obj\n}\n*/\n\n/**\n * Removes params from url in browser\n * @param  {string}   param       - param key to remove from current URL\n * @param  {() => void} [callback]  - callback function to run. Only runs in browser\n * @return {PromiseLike<void>}\n */\n\nfunction paramsRemove(param, callback) {\n  if (!inBrowser) return Promise.resolve();\n  return new Promise(function (resolve, reject) {\n    if (window.history && window.history.replaceState) {\n      var url = window.location.href;\n      var cleanUrl = paramsClean(url, param);\n\n      if (url !== cleanUrl) {\n        /* replace URL with history API */\n        // eslint-disable-next-line no-restricted-globals\n        history.replaceState({}, '', cleanUrl);\n      }\n    }\n\n    if (callback) callback();\n    return resolve();\n  });\n}\n\n/**\n * Get host domain of url\n * @param  {String} url - href of page\n * @return {String} hostname of page\n *\n * @example\n *  getDomainHost('https://subdomain.my-site.com/')\n *  > subdomain.my-site.com\n */\n\nfunction getDomainHost(url) {\n  if (!inBrowser) return null;\n  var a = document.createElement('a');\n  a.setAttribute('href', url);\n  return a.hostname;\n}\n/**\n * Get host domain of url\n * @param  {String} url - href of page\n * @return {String} base hostname of page\n *\n * @example\n *  getDomainBase('https://subdomain.my-site.com/')\n *  > my-site.com\n */\n\nfunction getDomainBase(url) {\n  var host = getDomainHost(url) || '';\n  return host.split('.').slice(-2).join('.');\n}\n/**\n * Remove TLD from domain string\n * @param  {String} baseDomain - host name of site\n * @return {String}\n * @example\n *  trimTld('google.com')\n *  > google\n */\n\nfunction trimTld(baseDomain) {\n  var arr = baseDomain.split('.');\n  return arr.length > 1 ? arr.slice(0, -1).join('.') : baseDomain;\n}\nvar url = {\n  trimTld: trimTld,\n  getDomainBase: getDomainBase,\n  getDomainHost: getDomainHost\n};\n\nvar googleKey = 'google';\n/**\n * @typedef {{\n *  campaign: string,\n *  referrer?: string,\n * } & DomainObject & Object.<string, any>} ReferrerObject\n */\n\n/**\n * Checks a given url and parses referrer data\n * @param  {String} [referrer] - (optional) referring URL\n * @param  {String} [currentUrl] - (optional) the current url\n * @return {ReferrerObject}     [description]\n */\n\nfunction parseReferrer(referrer, currentUrl) {\n  if (!inBrowser) return false; // default referral data\n\n  var refData = {\n    'source': '(direct)',\n    'medium': '(none)',\n    'campaign': '(not set)' // Add raw ref url if external\n\n  };\n\n  if (referrer && isExternalReferrer(referrer)) {\n    refData.referrer = referrer;\n  }\n\n  var domainInfo = parseDomain(referrer); // Read referrer URI and infer source\n\n  if (domainInfo && Object.keys(domainInfo).length) {\n    refData = Object.assign({}, refData, domainInfo);\n  } // Read URI params and use set utm params\n\n\n  var params = paramsParse(currentUrl);\n  var paramKeys = Object.keys(params);\n\n  if (!paramKeys.length) {\n    return refData;\n  } // set campaign params off GA matches\n\n\n  var gaParams = paramKeys.reduce(function (acc, key) {\n    // match utm params & dclid (display) & gclid (cpc)\n    if (key.match(/^utm_/)) {\n      acc[\"\".concat(key.replace(/^utm_/, ''))] = params[key];\n    } // https://developers.google.com/analytics/devguides/collection/protocol/v1/parameters\n    // dclid - cpc Cost-Per-Thousand Impressions\n    // gclid - cpc Cost per Click\n\n\n    if (key.match(/^(d|g)clid/)) {\n      acc['source'] = googleKey;\n      acc['medium'] = params.gclid ? 'cpc' : 'cpm';\n      acc[key] = params[key];\n    }\n\n    return acc;\n  }, {});\n  return Object.assign({}, refData, gaParams);\n}\n/**\n * @typedef {{\n *  source: string,\n *  medium: string,\n *  term?: string\n * }} DomainObject\n */\n\n/**\n * Client side domain parser for determining marketing data.\n * @param  {String} referrer - ref url\n * @return {DomainObject | boolean}\n */\n\nfunction parseDomain(referrer) {\n  if (!referrer || !inBrowser) return false;\n  var referringDomain = getDomainBase(referrer);\n  var a = document.createElement('a');\n  a.href = referrer; // Shim for the billion google search engines\n\n  if (a.hostname.indexOf(googleKey) > -1) {\n    referringDomain = googleKey;\n  } // If is search engine\n\n\n  if (searchEngines[referringDomain]) {\n    var searchEngine = searchEngines[referringDomain];\n    var queryParam = typeof searchEngine === 'string' ? searchEngine : searchEngine.p;\n    var termRegex = new RegExp(queryParam + '=.*?([^&#]*|$)', 'gi');\n    var term = a.search.match(termRegex);\n    return {\n      source: searchEngine.n || trimTld(referringDomain),\n      medium: 'organic',\n      term: (term ? term[0].split('=')[1] : '') || '(not provided)'\n    };\n  } // Default\n\n\n  var medium = !isExternalReferrer(referrer) ? 'internal' : 'referral';\n  return {\n    source: a.hostname,\n    medium: medium\n  };\n}\n/**\n * Search engine query string data\n * @type {Object}\n */\n\n\nvar Q = 'q';\nvar QUERY = 'query';\nvar searchEngines = {\n  'daum.net': Q,\n  'eniro.se': 'search_word',\n  'naver.com': QUERY,\n  'yahoo.com': 'p',\n  'msn.com': Q,\n  'aol.com': Q,\n  'ask.com': Q,\n  'baidu.com': 'wd',\n  'yandex.com': 'text',\n  'rambler.ru': 'words',\n  'google': Q,\n  'bing.com': {\n    'p': Q,\n    'n': 'live'\n  }\n};\n\n/**\n * @return {string}\n */\nfunction uuid() {\n  var u = '',\n      m = 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx',\n      i = 0,\n      rb = Math.random() * 0xffffffff | 0;\n\n  while (i++ < 36) {\n    var c = m[i - 1],\n        r = rb & 0xf,\n        v = c == 'x' ? r : r & 0x3 | 0x8;\n    u += c == '-' || c == '4' ? c : v.toString(16);\n    rb = i % 8 == 0 ? Math.random() * 0xffffffff | 0 : rb >> 4;\n  }\n\n  return u;\n}\n\nfunction throttle(func, wait) {\n  var context, args, result;\n  var timeout = null;\n  var previous = 0;\n\n  var later = function later() {\n    previous = new Date();\n    timeout = null;\n    result = func.apply(context, args);\n  };\n\n  return function () {\n    var now = new Date();\n\n    if (!previous) {\n      previous = now;\n    }\n\n    var remaining = wait - (now - previous);\n    context = this;\n    args = arguments;\n\n    if (remaining <= 0) {\n      clearTimeout(timeout);\n      timeout = null;\n      previous = now;\n      result = func.apply(context, args);\n    } else if (!timeout) {\n      timeout = setTimeout(later, remaining);\n    }\n\n    return result;\n  };\n}\n\nexport { isFunction, isString, isArray, isObject, isUndefined, isBoolean, decode as decodeUri, getBrowserLocale, getTimeZone, inBrowser, isExternalReferrer, isScriptLoaded, noOp, paramsClean, getValueParamValue as paramsGet, paramsParse, paramsRemove, parseReferrer, url, uuid, throttle };\n","import { isObject, globalContext, uuid, isFunction, isBoolean, isString, inBrowser, getBrowserLocale, getTimeZone, isArray, paramsParse, dotProp } from 'analytics-utils';\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) {\n    for (var i = 0, arr2 = new Array(arr.length); i < arr.length; i++) {\n      arr2[i] = arr[i];\n    }\n\n    return arr2;\n  }\n}\n\nvar arrayWithoutHoles = _arrayWithoutHoles;\n\nfunction _iterableToArray(iter) {\n  if (Symbol.iterator in Object(iter) || Object.prototype.toString.call(iter) === \"[object Arguments]\") return Array.from(iter);\n}\n\nvar iterableToArray = _iterableToArray;\n\nfunction _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance\");\n}\n\nvar nonIterableSpread = _nonIterableSpread;\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || nonIterableSpread();\n}\n\nvar toConsumableArray = _toConsumableArray;\n\nfunction createCommonjsModule(fn, module) {\n\treturn module = { exports: {} }, fn(module, module.exports), module.exports;\n}\n\nvar _typeof_1 = createCommonjsModule(function (module) {\nfunction _typeof2(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof2 = function _typeof2(obj) { return typeof obj; }; } else { _typeof2 = function _typeof2(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof2(obj); }\n\nfunction _typeof(obj) {\n  if (typeof Symbol === \"function\" && _typeof2(Symbol.iterator) === \"symbol\") {\n    module.exports = _typeof = function _typeof(obj) {\n      return _typeof2(obj);\n    };\n  } else {\n    module.exports = _typeof = function _typeof(obj) {\n      return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : _typeof2(obj);\n    };\n  }\n\n  return _typeof(obj);\n}\n\nmodule.exports = _typeof;\n});\n\nvar runtime_1 = createCommonjsModule(function (module) {\n/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  IteratorPrototype[iteratorSymbol] = function () {\n    return this;\n  };\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = Gp.constructor = GeneratorFunctionPrototype;\n  GeneratorFunctionPrototype.constructor = GeneratorFunction;\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  AsyncIterator.prototype[asyncIteratorSymbol] = function () {\n    return this;\n  };\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  Gp[iteratorSymbol] = function() {\n    return this;\n  };\n\n  Gp.toString = function() {\n    return \"[object Generator]\";\n  };\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  module.exports\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n}\n});\n\nvar regenerator = runtime_1;\n\nfunction asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) {\n  try {\n    var info = gen[key](arg);\n    var value = info.value;\n  } catch (error) {\n    reject(error);\n    return;\n  }\n\n  if (info.done) {\n    resolve(value);\n  } else {\n    Promise.resolve(value).then(_next, _throw);\n  }\n}\n\nfunction _asyncToGenerator(fn) {\n  return function () {\n    var self = this,\n        args = arguments;\n    return new Promise(function (resolve, reject) {\n      var gen = fn.apply(self, args);\n\n      function _next(value) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"next\", value);\n      }\n\n      function _throw(err) {\n        asyncGeneratorStep(gen, resolve, reject, _next, _throw, \"throw\", err);\n      }\n\n      _next(undefined);\n    });\n  };\n}\n\nvar asyncToGenerator = _asyncToGenerator;\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar defineProperty = _defineProperty;\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar objectSpread2 = _objectSpread2;\n\nvar FUNC = 'function';\nvar UNDEF = 'undefined';\nvar REDUCER = 'reducer';\nvar base = '@@redux/';\nvar ACTION_INIT = base + 'INIT';\nvar ACTION_TEST = base + Math.random().toString(36);\n\nvar $$observable =\n/* #__PURE__ */\nfunction () {\n  return (typeof Symbol === \"undefined\" ? \"undefined\" : _typeof_1(Symbol)) === FUNC && Symbol.observable || '@@observable';\n}();\n/*\n * Creates a Redux store that holds the state tree.\n * The only way to change the data in the store is to call `dispatch()` on it.\n *\n * There should only be a single store in your app. To specify how different\n * parts of the state tree respond to actions, you may combine several reducers\n * into a single reducer function by using `combineReducers`.\n *\n * @param {Function} reducer A function that returns the next state tree, given\n * the current state tree and the action to handle.\n *\n * @param {any} [preloadedState] The initial state. You may optionally specify it\n * to hydrate the state from the server in universal apps, or to restore a\n * previously serialized user session.\n * If you use `combineReducers` to produce the root reducer function, this must be\n * an object with the same shape as `combineReducers` keys.\n *\n * @param {Function} [enhancer] The store enhancer. You may optionally specify it\n * to enhance the store with third-party capabilities such as middleware,\n * time travel, persistence, etc. The only store enhancer that ships with Redux\n * is `applyMiddleware()`.\n *\n * @returns {Store} A Redux store that lets you read the state, dispatch actions\n * and subscribe to changes.\n */\n\n\nvar msg = ' != ' + FUNC;\nfunction createStore(reducer, preloadedState, enhancer) {\n  if (_typeof_1(preloadedState) === FUNC && _typeof_1(enhancer) === UNDEF) {\n    enhancer = preloadedState;\n    preloadedState = undefined;\n  }\n\n  if (_typeof_1(enhancer) !== UNDEF) {\n    if (_typeof_1(enhancer) !== FUNC) {\n      throw new Error('enhancer' + msg);\n    }\n\n    return enhancer(createStore)(reducer, preloadedState);\n  }\n\n  if (_typeof_1(reducer) !== FUNC) {\n    throw new Error(REDUCER + msg);\n  }\n\n  var currentReducer = reducer;\n  var currentState = preloadedState;\n  var currentListeners = [];\n  var nextListeners = currentListeners;\n  var isDispatching = false;\n\n  function ensureCanMutateNextListeners() {\n    if (nextListeners === currentListeners) {\n      nextListeners = currentListeners.slice();\n    }\n  }\n  /*\n   * Reads the state tree managed by the store.\n   *\n   * @returns {any} The current state tree of your application.\n   */\n\n\n  function getState() {\n    return currentState;\n  }\n  /*\n   * Adds a change listener. It will be called any time an action is dispatched,\n   * and some part of the state tree may potentially have changed. You may then\n   * call `getState()` to read the current state tree inside the callback.\n   *\n   * You may call `dispatch()` from a change listener, with the following\n   * caveats:\n   *\n   * 1. The subscriptions are snapshotted just before every `dispatch()` call.\n   * If you subscribe or unsubscribe while the listeners are being invoked, this\n   * will not have any effect on the `dispatch()` that is currently in progress.\n   * However, the next `dispatch()` call, whether nested or not, will use a more\n   * recent snapshot of the subscription list.\n   *\n   * 2. The listener should not expect to see all state changes, as the state\n   * might have been updated multiple times during a nested `dispatch()` before\n   * the listener is called. It is, however, guaranteed that all subscribers\n   * registered before the `dispatch()` started will be called with the latest\n   * state by the time it exits.\n   *\n   * @param {Function} listener A callback to be invoked on every dispatch.\n   * @returns {Function} A function to remove this change listener.\n   */\n\n\n  function subscribe(listener) {\n    if (_typeof_1(listener) !== FUNC) {\n      throw new Error('Listener' + msg);\n    }\n\n    var isSubscribed = true;\n    ensureCanMutateNextListeners();\n    nextListeners.push(listener);\n    return function unsubscribe() {\n      if (!isSubscribed) {\n        return;\n      }\n\n      isSubscribed = false;\n      ensureCanMutateNextListeners();\n      var index = nextListeners.indexOf(listener);\n      nextListeners.splice(index, 1);\n    };\n  }\n  /**\n   * Dispatches an action. It is the only way to trigger a state change.\n   *\n   * The `reducer` function, used to create the store, will be called with the\n   * current state tree and the given `action`. Its return value will\n   * be considered the **next** state of the tree, and the change listeners\n   * will be notified.\n   *\n   * The base implementation only supports plain object actions. If you want to\n   * dispatch a Promise, an Observable, a thunk, or something else, you need to\n   * wrap your store creating function into the corresponding middleware. For\n   * example, see the documentation for the `redux-thunk` package. Even the\n   * middleware will eventually dispatch plain object actions using this method.\n   *\n   * @param {Object} action A plain object representing what changed. It is\n   * a good idea to keep actions serializable so you can record and replay user\n   * sessions, or use the time travelling `redux-devtools`. An action must have\n   * a `type` property which may not be `undefined`. It is a good idea to use\n   * string constants for action types.\n   *\n   * @returns {Object} For convenience, the same action object you dispatched.\n   *\n   * Note that, if you use a custom middleware, it may wrap `dispatch()` to\n   * return something else (for example, a Promise you can await).\n   */\n\n\n  function dispatch(action) {\n    /* // add default info to actions... \n    console.log('dispatch before', _action)\n    const action = {\n      ..._action,\n      ...{\n        action: {\n          ..._action.action,\n          ...{ customInfo: 'yoooo'} \n        }\n      }\n    }\n    console.log('dispatch after', action)\n    /** */\n    if (!isObject(action)) {\n      throw new Error('Act != obj');\n    }\n\n    if (_typeof_1(action.type) === UNDEF) {\n      throw new Error('ActType ' + UNDEF);\n    }\n\n    if (isDispatching) {\n      throw new Error('Dispatch in ' + REDUCER);\n    }\n\n    try {\n      isDispatching = true;\n      currentState = currentReducer(currentState, action);\n    } finally {\n      isDispatching = false;\n    }\n\n    var listeners = currentListeners = nextListeners;\n\n    for (var i = 0; i < listeners.length; i++) {\n      var listener = listeners[i];\n      listener();\n    }\n\n    return action;\n  }\n  /**\n   * Replaces the reducer currently used by the store to calculate the state.\n   *\n   * You might need this if your app implements code splitting and you want to\n   * load some of the reducers dynamically. You might also need this if you\n   * implement a hot reloading mechanism for Redux.\n   *\n   * @param {Function} nextReducer The reducer for the store to use instead.\n   * @returns {void}\n   */\n\n\n  function replaceReducer(nextReducer) {\n    if (_typeof_1(nextReducer) !== FUNC) {\n      throw new Error('next ' + REDUCER + msg);\n    }\n\n    currentReducer = nextReducer;\n    dispatch({\n      type: ACTION_INIT\n    });\n  }\n  /**\n   * Interoperability point for observable/reactive libraries.\n   * @returns {observable} A minimal observable of state changes.\n   * For more information, see the observable proposal:\n   * https://github.com/tc39/proposal-observable\n   */\n\n\n  function observable() {\n    var outerSubscribe = subscribe;\n    return defineProperty({\n      /*\n       * The minimal observable subscription method.\n       * @param {Object} observer Any object that can be used as an observer.\n       * The observer object should have a `next` method.\n       * @returns {subscription} An object with an `unsubscribe` method that can\n       * be used to unsubscribe the observable from the store, and prevent further\n       * emission of values from the observable.\n       */\n      subscribe: function subscribe(observer) {\n        if (_typeof_1(observer) !== 'object') {\n          throw new TypeError('Observer != obj');\n        }\n\n        function observeState() {\n          if (observer.next) {\n            observer.next(getState());\n          }\n        }\n\n        observeState();\n        var unsubscribe = outerSubscribe(observeState);\n        return {\n          unsubscribe: unsubscribe\n        };\n      }\n    }, $$observable, function () {\n      return this;\n    });\n  } // When a store is created, an \"INIT\" action is dispatched so that every\n  // reducer returns their initial state. This effectively populates\n  // the initial state tree.\n\n\n  dispatch({\n    type: ACTION_INIT\n  });\n  return defineProperty({\n    dispatch: dispatch,\n    subscribe: subscribe,\n    getState: getState,\n    replaceReducer: replaceReducer\n  }, $$observable, observable);\n}\n\nfunction getUndefinedStateErrorMessage(key, action) {\n  var actionType = action && action.type;\n  var actionName = actionType && actionType.toString() || '?';\n  return 'action ' + actionName + REDUCER + ' ' + key + ' returns ' + UNDEF;\n}\n\nfunction assertReducerShape(reducers) {\n  Object.keys(reducers).forEach(function (key) {\n    var reducer = reducers[key];\n    var initialState = reducer(undefined, {\n      type: ACTION_INIT\n    });\n\n    if (_typeof_1(initialState) === UNDEF || _typeof_1(reducer(undefined, {\n      type: ACTION_TEST\n    })) === UNDEF) {\n      throw new Error(REDUCER + ' ' + key + ' ' + UNDEF);\n    }\n  });\n}\n/**\n * Turns an object whose values are different reducer functions, into a single\n * reducer function. It will call every child reducer, and gather their results\n * into a single state object, whose keys correspond to the keys of the passed\n * reducer functions.\n *\n * @param {Object} reducers An object whose values correspond to different\n * reducer functions that need to be combined into one. One handy way to obtain\n * it is to use ES6 `import * as reducers` syntax. The reducers may never return\n * undefined for any action. Instead, they should return their initial state\n * if the state passed to them was undefined, and the current state for any\n * unrecognized action.\n *\n * @returns {Function} A reducer function that invokes every reducer inside the\n * passed object, and builds a state object with the same shape.\n */\n\n\nfunction combineReducers(reducers) {\n  var reducerKeys = Object.keys(reducers);\n  var finalReducers = {};\n\n  for (var i = 0; i < reducerKeys.length; i++) {\n    var key = reducerKeys[i];\n\n    if (_typeof_1(reducers[key]) === FUNC) {\n      finalReducers[key] = reducers[key];\n    }\n  }\n\n  var finalReducerKeys = Object.keys(finalReducers);\n\n  var shapeAssertionError;\n\n  try {\n    assertReducerShape(finalReducers);\n  } catch (e) {\n    shapeAssertionError = e;\n  }\n\n  return function combination() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var action = arguments.length > 1 ? arguments[1] : undefined;\n\n    if (shapeAssertionError) {\n      throw shapeAssertionError;\n    }\n\n    var hasChanged = false;\n    var nextState = {};\n\n    for (var _i = 0; _i < finalReducerKeys.length; _i++) {\n      var _key = finalReducerKeys[_i];\n      var reducer = finalReducers[_key];\n      var previousStateForKey = state[_key];\n      var nextStateForKey = reducer(previousStateForKey, action);\n\n      if (_typeof_1(nextStateForKey) === UNDEF) {\n        var errorMessage = getUndefinedStateErrorMessage(_key, action);\n        throw new Error(errorMessage);\n      }\n\n      nextState[_key] = nextStateForKey;\n      hasChanged = hasChanged || nextStateForKey !== previousStateForKey;\n    }\n\n    return hasChanged ? nextState : state;\n  };\n}\n\nfunction compose() {\n  for (var _len = arguments.length, funcs = new Array(_len), _key = 0; _key < _len; _key++) {\n    funcs[_key] = arguments[_key];\n  }\n\n  if (funcs.length === 0) {\n    return function (arg) {\n      return arg;\n    };\n  }\n\n  if (funcs.length === 1) {\n    return funcs[0];\n  }\n\n  return funcs.reduce(function (a, b) {\n    return function () {\n      return a(b.apply(void 0, arguments));\n    };\n  });\n}\n\n/**\n * Creates a store enhancer that applies middleware to the dispatch method\n * of the Redux store. This is handy for a variety of tasks, such as expressing\n * asynchronous actions in a concise manner, or logging every action payload.\n *\n * See `redux-thunk` package as an example of the Redux middleware.\n *\n * Because middleware is potentially asynchronous, this should be the first\n * store enhancer in the composition chain.\n *\n * Note that each middleware will be given the `dispatch` and `getState` functions\n * as named arguments.\n *\n * @param {...Function} middlewares The middleware chain to be applied.\n * @returns {Function} A store enhancer applying the middleware.\n */\n\nfunction applyMiddleware() {\n  for (var _len = arguments.length, middlewares = new Array(_len), _key = 0; _key < _len; _key++) {\n    middlewares[_key] = arguments[_key];\n  }\n\n  return function (createStore) {\n    return function (reducer, preloadedState, enhancer) {\n      var store = createStore(reducer, preloadedState, enhancer);\n      var _dispatch = store.dispatch;\n      var chain = [];\n      var middlewareAPI = {\n        getState: store.getState,\n        dispatch: function dispatch(action) {\n          return _dispatch(action);\n        }\n      };\n      chain = middlewares.map(function (middleware) {\n        return middleware(middlewareAPI);\n      });\n      _dispatch = compose.apply(void 0, toConsumableArray(chain))(store.dispatch);\n      return objectSpread2(objectSpread2({}, store), {}, {\n        dispatch: _dispatch\n      });\n    };\n  };\n}\n\nvar coreEvents = [\n/**\n * `bootstrap` - Fires when analytics library starts up.\n * This is the first event fired. '.on/once' listeners are not allowed on bootstrap\n * Plugins can attach logic to this event\n */\n'bootstrap',\n/**\n * `params` - Fires when analytics parses URL parameters\n */\n'params',\n/**\n * `campaign` - Fires if params contain \"utm\" parameters\n */\n'campaign',\n/**\n * `initializeStart` - Fires before 'initialize', allows for plugins to cancel loading of other plugins\n */\n'initializeStart',\n/**\n * `initialize` - Fires when analytics loads plugins\n */\n'initialize',\n/**\n * `initializeEnd` - Fires after initialize, allows for plugins to run logic after initialization methods run\n */\n'initializeEnd',\n/**\n * `ready` - Fires when all analytic providers are fully loaded. This waits for 'initialize' and 'loaded' to return true\n */\n'ready',\n/**\n * `resetStart` - Fires if analytic.reset() is called.\n * Use this event to cancel reset based on a specific condition\n */\n'resetStart',\n/**\n * `reset` - Fires if analytic.reset() is called.\n * Use this event to run custom cleanup logic (if needed)\n */\n'reset',\n/**\n * `resetEnd` - Fires after analytic.reset() is called.\n * Use this event to run a callback after user data is reset\n */\n'resetEnd',\n/******************\n * Page Events\n ******************/\n\n/**\n * `pageStart` - Fires before 'page' events fire.\n *  This allows for dynamic page view cancellation based on current state of user or options passed in.\n */\n'pageStart',\n/**\n * `page` - Core analytics hook for page views.\n *  If your plugin or integration tracks page views, this is the event to fire on.\n */\n'page',\n/**\n * `pageEnd` - Fires after all registered 'page' methods fire.\n */\n'pageEnd',\n/**\n * `pageAborted` - Fires if 'page' call is cancelled by a plugin\n */\n'pageAborted',\n/****************\n * Track Events\n ***************/\n\n/**\n * `trackStart` - Called before the 'track' events fires.\n *  This allows for dynamic page view cancellation based on current state of user or options passed in.\n */\n'trackStart',\n/**\n * `track` - Core analytics hook for event tracking.\n *  If your plugin or integration tracks custom events, this is the event to fire on.\n */\n'track',\n/**\n * `trackEnd` - Fires after all registered 'track' events fire from plugins.\n */\n'trackEnd',\n/**\n * `trackAborted` - Fires if 'track' call is cancelled by a plugin\n */\n'trackAborted',\n/******************\n * Identify Events\n ******************/\n\n/**\n * `identifyStart` - Called before the 'identify' events fires.\n * This allows for dynamic page view cancellation based on current state of user or options passed in.\n */\n'identifyStart',\n/**\n * `identify` - Core analytics hook for user identification.\n *  If your plugin or integration identifies users or user traits, this is the event to fire on.\n */\n'identify',\n/**\n * `identifyEnd` - Fires after all registered 'identify' events fire from plugins.\n */\n'identifyEnd',\n/**\n * `identifyAborted` - Fires if 'track' call is cancelled by a plugin\n */\n'identifyAborted',\n/**\n * `userIdChanged` - Fires when a user id is updated\n */\n'userIdChanged',\n/******************\n * Plugin Events\n ******************/\n\n/**\n * `registerPlugins` - Fires when analytics is registering plugins\n */\n'registerPlugins',\n/**\n * `enablePlugin` - Fires when 'analytics.plugins.enable()' is called\n */\n'enablePlugin',\n/**\n * `disablePlugin` - Fires when 'analytics.plugins.disable()' is called\n */\n'disablePlugin',\n/*\n * `loadPlugin` - Fires when 'analytics.loadPlugin()' is called\n */\n// 'loadPlugin',\n\n/******************\n * Browser activity events\n ******************/\n\n/**\n * `online` - Fires when browser network goes online.\n * This fires only when coming back online from an offline state.\n */\n'online',\n/**\n * `offline` - Fires when browser network goes offline.\n */\n'offline',\n/******************\n * Storage events\n ******************/\n\n/**\n * `setItemStart` - Fires when analytics.storage.setItem is initialized.\n * This event gives plugins the ability to intercept keys & values and alter them before they are persisted.\n */\n'setItemStart',\n/**\n * `setItem` - Fires when analytics.storage.setItem is called.\n * This event gives plugins the ability to intercept keys & values and alter them before they are persisted.\n */\n'setItem',\n/**\n * `setItemEnd` - Fires when setItem storage is complete.\n */\n'setItemEnd',\n/**\n * `setItemAborted` - Fires when setItem storage is cancelled by a plugin.\n */\n'setItemAborted',\n/**\n * `removeItemStart` - Fires when analytics.storage.removeItem is initialized.\n * This event gives plugins the ability to intercept removeItem calls and abort / alter them.\n */\n'removeItemStart',\n/**\n * `removeItem` - Fires when analytics.storage.removeItem is called.\n * This event gives plugins the ability to intercept removeItem calls and abort / alter them.\n */\n'removeItem',\n/**\n * `removeItemEnd` - Fires when removeItem storage is complete.\n */\n'removeItemEnd',\n/**\n * `removeItemAborted` - Fires when removeItem storage is cancelled by a plugin.\n */\n'removeItemAborted'];\n/* Keys on a plugin that are not considered events */\n\nvar nonEvents = ['name', 'EVENTS', 'config', 'loaded'];\nvar pluginEvents = {\n  registerPluginType: function registerPluginType(name) {\n    return \"registerPlugin:\".concat(name);\n  },\n  pluginReadyType: function pluginReadyType(name) {\n    return \"ready:\".concat(name);\n  }\n};\nvar EVENTS = coreEvents.reduce(function (acc, curr) {\n  acc[curr] = curr;\n  return acc;\n}, pluginEvents);\nfunction isReservedAction(type) {\n  return coreEvents.includes(type);\n}\n\nvar LIBRARY_NAME = 'analytics';\nvar ID = 'userId';\nvar ANONID = 'anonymousId';\nvar ERROR_URL = 'https://lytics.dev/errors/';\nvar PREFIX = '__';\n\n/**\n * Anonymous visitor Id localstorage key\n * @typedef {String} ANON_ID\n */\n\nvar ANON_ID = PREFIX + 'anon_id'; // __anon_id\n\n/**\n * Visitor Id localstorage key\n * @typedef {String} USER_ID\n */\n\nvar USER_ID = PREFIX + 'user_id'; // __user_id\n\n/**\n * Visitor traits localstorage key\n * @typedef {String} USER_TRAITS\n */\n\nvar USER_TRAITS = PREFIX + 'user_traits'; // __user_traits\n\nvar constants = /*#__PURE__*/Object.freeze({\n  ANON_ID: ANON_ID,\n  USER_ID: USER_ID,\n  USER_TRAITS: USER_TRAITS\n});\n\nvar utmRegex = /^utm_/;\nvar propRegex = /^an_prop_/;\nvar traitRegex = /^an_trait_/; // Middleware runs during EVENTS.initialize\n\nfunction initializeMiddleware(instance) {\n  var _instance$storage = instance.storage,\n      setItem = _instance$storage.setItem,\n      getItem = _instance$storage.getItem;\n  return function (store) {\n    return function (next) {\n      return function (action) {\n        /* Handle bootstrap event */\n        if (action.type === EVENTS.bootstrap) {\n          var params = action.params,\n              user = action.user,\n              persistedUser = action.persistedUser;\n          /* 1. Set anonymous ID */\n\n          if (persistedUser.anonymousId !== user.anonymousId) {\n            setItem(ANON_ID, user.anonymousId);\n          }\n          /* 2. Set userId */\n\n\n          if (persistedUser.userId !== user.userId) {\n            setItem(USER_ID, user.userId);\n          }\n          /* 3. Parse url params */\n\n\n          var paramsArray = Object.keys(action.params);\n\n          if (paramsArray.length) {\n            var an_uid = params.an_uid,\n                an_event = params.an_event;\n            var groupedParams = paramsArray.reduce(function (acc, key) {\n              // match utm params & dclid (display) & gclid (cpc)\n              if (key.match(utmRegex) || key.match(/^(d|g)clid/)) {\n                var cleanName = key.replace(utmRegex, '');\n                var keyName = cleanName === 'campaign' ? 'name' : cleanName;\n                acc.campaign[keyName] = params[key];\n              }\n\n              if (key.match(propRegex)) {\n                acc.props[key.replace(propRegex, '')] = params[key];\n              }\n\n              if (key.match(traitRegex)) {\n                acc.traits[key.replace(traitRegex, '')] = params[key];\n              }\n\n              return acc;\n            }, {\n              campaign: {},\n              props: {},\n              traits: {}\n            });\n            store.dispatch(objectSpread2(objectSpread2({\n              type: EVENTS.params,\n              raw: params\n            }, groupedParams), an_uid ? {\n              userId: an_uid\n            } : {}));\n            /* If userId set, call identify */\n\n            if (an_uid) {\n              // timeout to debounce and make sure integration is registered. Todo refactor\n              setTimeout(function () {\n                return instance.identify(an_uid, groupedParams.traits);\n              }, 0);\n            }\n            /* If tracking event set, call track */\n\n\n            if (an_event) {\n              // timeout to debounce and make sure integration is registered. Todo refactor\n              setTimeout(function () {\n                return instance.track(an_event, groupedParams.props);\n              }, 0);\n            } // if url has utm params\n\n\n            if (Object.keys(groupedParams.campaign).length) {\n              store.dispatch({\n                type: EVENTS.campaign,\n                campaign: groupedParams.campaign\n              });\n            }\n          }\n        }\n\n        return next(action);\n      };\n    };\n  };\n}\n\n/* user reducer */\n\nfunction userReducer(storage) {\n  return function user() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var action = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    if (action.type === EVENTS.setItemEnd) {\n      // Set anonymousId if changed by storage.setItem\n      if (action.key === ANON_ID) {\n        return objectSpread2(objectSpread2({}, state), {\n          anonymousId: action.value\n        });\n      } // Set userId if changed by storage.setItem\n\n\n      if (action.key === USER_ID) {\n        return objectSpread2(objectSpread2({}, state), {\n          userId: action.value\n        });\n      }\n    }\n\n    switch (action.type) {\n      case EVENTS.identify:\n        return Object.assign({}, state, {\n          userId: action.userId,\n          traits: objectSpread2(objectSpread2({}, state.traits), action.traits)\n        });\n\n      case EVENTS.reset:\n        // Side effect to fix race condition in Node. TODO refactor\n        // This is from default storage.removeItem: (key) => globalContext[key] = undefined\n        [USER_ID, ANON_ID, USER_TRAITS].forEach(function (key) {\n          // sync storage, not instance.storage\n          storage.removeItem(key);\n        });\n        return Object.assign({}, state, {\n          userId: null,\n          // TODO reset anon id automatically?\n          anonymousId: null,\n          traits: {}\n        });\n\n      default:\n        return state;\n    }\n  };\n}\nfunction getPersistedUserData(storage) {\n  return {\n    userId: storage.getItem(USER_ID),\n    anonymousId: storage.getItem(ANON_ID),\n    traits: storage.getItem(USER_TRAITS) || {}\n  };\n}\nvar tempKey = function tempKey(key) {\n  return PREFIX + 'TEMP' + PREFIX + key;\n};\nfunction getUserPropFunc(storage) {\n  return function getUserProp(key, instance, payload) {\n    /* 1. Try current state */\n    var currentId = instance.getState('user')[key];\n\n    if (currentId) {\n      /*\n      console.log(`from state ${key}`, currentId)\n      /** */\n      return currentId;\n    }\n    /* 2. Try event payload */\n\n\n    if (payload && isObject(payload) && payload[key]) {\n      /*\n      console.log(`from payload ${key}`, payload[key])\n      /** */\n      return payload[key];\n    }\n    /* 3. Try persisted data */\n\n\n    var persistedInfo = getPersistedUserData(storage)[key];\n\n    if (persistedInfo) {\n      /*\n      console.log(`from persistedInfo ${key}`, persistedInfo)\n      /** */\n      return persistedInfo;\n    }\n    /* 4. Else, try to get in memory placeholder. TODO watch this for future issues */\n\n\n    if (globalContext[tempKey(key)]) {\n      /*\n      console.log(`from global ${key}`, globalContext[tempKey(key)])\n      /** */\n      return globalContext[tempKey(key)];\n    } // return null instead of undefined for consistency\n\n\n    return null;\n  };\n}\n\nfunction identifyMiddleware(instance) {\n  var _instance$storage = instance.storage,\n      setItem = _instance$storage.setItem,\n      removeItem = _instance$storage.removeItem,\n      getItem = _instance$storage.getItem;\n  return function (store) {\n    return function (next) {\n      return function (action) {\n        var userId = action.userId,\n            traits = action.traits,\n            options = action.options;\n        /* Reset user id and traits */\n\n        if (action.type === EVENTS.reset) {\n          // Remove stored data\n          [USER_ID, USER_TRAITS, ANON_ID].forEach(function (key) {\n            // Fires async removeItem dispatch\n            removeItem(key);\n          });\n          [ID, ANONID, 'traits'].forEach(function (key) {\n            globalContext[tempKey(key)] = undefined;\n          });\n        }\n\n        if (action.type === EVENTS.identify) {\n          /* If no anon id. Set it! */\n          if (!getItem(ANON_ID)) {\n            setItem(ANON_ID, uuid());\n          }\n\n          var currentId = getItem(USER_ID);\n          var currentTraits = getItem(USER_TRAITS) || {};\n\n          if (currentId && currentId !== userId) {\n            store.dispatch({\n              type: EVENTS.userIdChanged,\n              old: {\n                userId: currentId,\n                traits: currentTraits\n              },\n              \"new\": {\n                userId: userId,\n                traits: traits\n              },\n              options: options\n            });\n          }\n          /* Save user id */\n\n\n          if (userId) {\n            setItem(USER_ID, userId);\n          }\n          /* Save user traits */\n\n\n          if (traits) {\n            setItem(USER_TRAITS, objectSpread2(objectSpread2({}, currentTraits), traits));\n          }\n        }\n\n        return next(action);\n      };\n    };\n  };\n}\n\nvar stack = {};\n/*\nwindow.callBackStack = stack\n/** */\n\nfunction runCallback(id, payload) {\n  if (stack[id] && isFunction(stack[id])) {\n    // console.log(`run ${id}`)\n    stack[id](payload);\n    delete stack[id];\n  }\n}\n\nfunction waitForReady(data, predicate, timeout) {\n  return new Promise(function (resolve, reject) {\n    if (predicate()) {\n      return resolve(data);\n    } // Timeout. Add to queue\n\n\n    if (timeout < 1) {\n      return reject(objectSpread2(objectSpread2({}, data), {}, {\n        queue: true\n      })); // eslint-disable-line\n    } // Else recursive retry\n\n\n    return pause(10).then(function (_) {\n      return waitForReady(data, predicate, timeout - 10).then(resolve, reject);\n    });\n  });\n}\n\nfunction pause(ms) {\n  return new Promise(function (resolve) {\n    return setTimeout(resolve, ms);\n  });\n}\n\nfunction processQueue(store, getPlugins, instance) {\n  var pluginMethods = getPlugins();\n\n  var _store$getState = store.getState(),\n      plugins = _store$getState.plugins,\n      context = _store$getState.context,\n      queue = _store$getState.queue,\n      user = _store$getState.user;\n\n  var isOnline = !context.offline;\n  /* If network connection found and there is items in queue, process them all */\n\n  if (isOnline && queue && queue.actions && queue.actions.length) {\n    var pipeline = queue.actions.reduce(function (acc, item, index) {\n      var isLoaded = plugins[item.plugin].loaded;\n\n      if (isLoaded) {\n        acc.process.push(item);\n        acc.processIndex.push(index);\n      } else {\n        acc.requeue.push(item);\n        acc.requeueIndex.push(index);\n      }\n\n      return acc;\n    }, {\n      processIndex: [],\n      process: [],\n      requeue: [],\n      requeueIndex: []\n    });\n\n    if (pipeline.processIndex && pipeline.processIndex.length) {\n      pipeline.processIndex.forEach(function (i) {\n        var processAction = queue.actions[i]; // console.log('RePROCESS THIS>', processAction)\n        // Call methods directly right now\n\n        var currentPlugin = processAction.plugin;\n        var currentMethod = processAction.payload.type;\n        var method = pluginMethods[currentPlugin][currentMethod];\n\n        if (method && isFunction(method)) {\n          /* enrich queued payload with userId / anon id if missing */\n\n          /* TODO hoist enrich into where action queued? */\n          // console.log('before', processAction.payload)\n          var enrichedPayload = enrich(processAction.payload, user); // console.log('user.userId', user.userId)\n          // console.log('user.anonymousId', user.anonymousId)\n          // console.log('after enrich', enrichedPayload)\n\n          method({\n            payload: enrichedPayload,\n            config: plugins[currentPlugin].config,\n            instance: instance\n          });\n          /* Then redispatch for .on listeners / other middleware */\n\n          var pluginEvent = \"\".concat(currentMethod, \":\").concat(currentPlugin);\n          store.dispatch(objectSpread2(objectSpread2({}, enrichedPayload), {}, {\n            type: pluginEvent,\n\n            /* Internal data for analytics engine */\n            _: {\n              called: pluginEvent,\n              from: 'queueDrain'\n            }\n          }));\n        }\n      });\n      /* Removed processed actions */\n\n      var reQueueActions = queue.actions.filter(function (value, index) {\n        // !~ === return pipeline.processIndex.indexOf(index) === -1\n        return !~pipeline.processIndex.indexOf(index);\n      });\n      /* Set queue actions. TODO refactor to non mutatable or move out of redux */\n\n      queue.actions = reQueueActions;\n    }\n  }\n}\n/* Heartbeat retries queued events */\n\nfunction heartBeat(store, getPlugins, instance) {\n  // 3e3 === 3000 ms\n  return setInterval(function () {\n    return processQueue(store, getPlugins, instance);\n  }, 3e3);\n} // Assign userId && anonymousId values if present in payload but null\n\nfunction enrich() {\n  var payload = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var user = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  return [ID, ANONID].reduce(function (acc, key) {\n    if (payload.hasOwnProperty(key) && user[key] && user[key] !== payload[key]) {\n      // console.log(`${key} stale update with ${user[key]}`)\n      acc[key] = user[key];\n    }\n\n    return acc;\n  }, payload);\n}\n\nfunction _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nvar arrayWithHoles = _arrayWithHoles;\n\nfunction _iterableToArrayLimit(arr, i) {\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nvar iterableToArrayLimit = _iterableToArrayLimit;\n\nfunction _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance\");\n}\n\nvar nonIterableRest = _nonIterableRest;\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || nonIterableRest();\n}\n\nvar slicedToArray = _slicedToArray;\n\nfunction fitlerDisabledPlugins(allPlugins) {\n  var settings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  return Object.keys(allPlugins).filter(function (name) {\n    var fromCallOptions = options.plugins || {}; // If enabled/disabled by options. Override settings\n\n    if (isBoolean(fromCallOptions[name])) {\n      return fromCallOptions[name];\n    } // If all: false disable everything unless true explicitly set\n\n\n    if (fromCallOptions.all === false) {\n      return false;\n    } // else use state.plugin settings\n\n\n    if (settings[name] && settings[name].enabled === false) {\n      return false;\n    }\n\n    return true;\n  }).map(function (name) {\n    return allPlugins[name];\n  });\n}\n\nvar endsWithStartRegex = /Start$/;\nvar bootstrapRegex = /^bootstrap/;\nvar readyRegex = /^ready/;\nfunction runPlugins (_x, _x2, _x3, _x4, _x5) {\n  return _ref.apply(this, arguments);\n}\n/**\n * Async reduce over matched plugin methods\n * Fires plugin functions\n */\n\nfunction _ref() {\n  _ref = asyncToGenerator(\n  /*#__PURE__*/\n  regenerator.mark(function _callee(action, getPlugins, instance, store, eventsInfo) {\n    var pluginObject, originalType, updatedType, state, activePlugins, allActivePluginKeys, allMatches, actionBefore, actionDuring, afterName, actionAfter;\n    return regenerator.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            pluginObject = isFunction(getPlugins) ? getPlugins() : getPlugins;\n            originalType = action.type;\n            updatedType = originalType.replace(endsWithStartRegex, '');\n            /* If action already dispatched exit early. This makes it so plugin methods are not fired twice. */\n\n            if (!(action._ && action._.called)) {\n              _context.next = 5;\n              break;\n            }\n\n            return _context.abrupt(\"return\", action);\n\n          case 5:\n            state = instance.getState();\n            /* Remove plugins that are disabled by options or by settings */\n\n            activePlugins = fitlerDisabledPlugins(pluginObject, state.plugins, action.options);\n            /* If analytics.plugin.enable calls do special behavior */\n\n            if (originalType === EVENTS.initializeStart && action.fromEnable) {\n              // Return list of all enabled plugins that have NOT been initialized yet\n              activePlugins = Object.keys(state.plugins).filter(function (name) {\n                var info = state.plugins[name];\n                return action.plugins.includes(name) && !info.initialized;\n              }).map(function (name) {\n                return pluginObject[name];\n              });\n            } // console.log(`engine activePlugins ${action.type}`, activePlugins)\n\n\n            allActivePluginKeys = activePlugins.map(function (p) {\n              return p.name;\n            }); // console.log('allActivePluginKeys', allActivePluginKeys)\n\n            allMatches = getAllMatchingCalls(originalType, activePlugins, pluginObject); // console.log('allMatches', allMatches)\n\n            /* @TODO cache matches and purge on enable/disable/add plugin */\n\n            /**\n             * Process all 'actionBefore' hooks\n             * Example:\n             *  This is processes 'pageStart' methods from plugins and update the event to send through the chain\n             */\n\n            _context.next = 12;\n            return processEvent({\n              action: action,\n              data: {\n                exact: allMatches.before,\n                namespaced: allMatches.beforeNS\n              },\n              state: state,\n              allPlugins: pluginObject,\n              allMatches: allMatches,\n              instance: instance,\n              store: store,\n              EVENTS: eventsInfo\n            });\n\n          case 12:\n            actionBefore = _context.sent;\n\n            if (!shouldAbortAll(actionBefore, allActivePluginKeys.length)) {\n              _context.next = 15;\n              break;\n            }\n\n            return _context.abrupt(\"return\", actionBefore);\n\n          case 15:\n            if (!(originalType === updatedType)) {\n              _context.next = 19;\n              break;\n            }\n\n            /* If type the same don't double process */\n            actionDuring = actionBefore;\n            _context.next = 22;\n            break;\n\n          case 19:\n            _context.next = 21;\n            return processEvent({\n              action: objectSpread2(objectSpread2({}, actionBefore), {}, {\n                type: updatedType\n              }),\n              data: {\n                exact: allMatches.during,\n                namespaced: allMatches.duringNS\n              },\n              state: state,\n              allPlugins: pluginObject,\n              allMatches: allMatches,\n              instance: instance,\n              store: store,\n              EVENTS: eventsInfo\n            });\n\n          case 21:\n            actionDuring = _context.sent;\n\n          case 22:\n            if (!originalType.match(endsWithStartRegex)) {\n              _context.next = 28;\n              break;\n            }\n\n            afterName = \"\".concat(updatedType, \"End\");\n            _context.next = 26;\n            return processEvent({\n              action: objectSpread2(objectSpread2({}, actionDuring), {}, {\n                type: afterName\n              }),\n              data: {\n                exact: allMatches.after,\n                namespaced: allMatches.afterNS\n              },\n              state: state,\n              allPlugins: pluginObject,\n              allMatches: allMatches,\n              instance: instance,\n              store: store,\n              EVENTS: eventsInfo\n            });\n\n          case 26:\n            actionAfter = _context.sent;\n\n            // console.log('____ actionAfter', actionAfter)\n\n            /* Fire callback if supplied */\n            if (actionAfter.meta && actionAfter.meta.hasCallback) {\n              /*\n              console.log('End of engine action has callback')\n              console.log(actionAfter.meta)\n              console.log('stack', stack)\n              /** */\n              // @TODO figure out exact args calls and .on will get\n              runCallback(actionAfter.meta.rid, {\n                payload: actionAfter\n              });\n            }\n\n          case 28:\n            return _context.abrupt(\"return\", actionBefore);\n\n          case 29:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _ref.apply(this, arguments);\n}\n\nfunction processEvent(_x6) {\n  return _processEvent.apply(this, arguments);\n}\n\nfunction _processEvent() {\n  _processEvent = asyncToGenerator(\n  /*#__PURE__*/\n  regenerator.mark(function _callee5(_ref2) {\n    var data, action, instance, state, allPlugins, allMatches, store, EVENTS$$1, plugins, context, method, isStartEvent, abortable, makeArgs, queueData, payloads, resolvedAction, endAction;\n    return regenerator.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            data = _ref2.data, action = _ref2.action, instance = _ref2.instance, state = _ref2.state, allPlugins = _ref2.allPlugins, allMatches = _ref2.allMatches, store = _ref2.store, EVENTS$$1 = _ref2.EVENTS;\n            plugins = state.plugins, context = state.context;\n            method = action.type;\n            isStartEvent = method.match(endsWithStartRegex); // console.log(`data ${method}`, data)\n            // console.log(`data allMatches ${method}`, allMatches)\n\n            abortable = data.exact.map(function (x) {\n              return x.pluginName;\n            });\n            /* If abort is called from xyzStart */\n\n            if (isStartEvent) {\n              abortable = allMatches.during.map(function (x) {\n                return x.pluginName;\n              });\n            }\n            /* make args for functions to concume */\n\n\n            makeArgs = argumentFactory(instance, abortable); // console.log('makeArgs', makeArgs)\n\n            /* Check if plugin loaded, if not mark action for queue */\n\n            queueData = data.exact.reduce(function (acc, thing) {\n              var pluginName = thing.pluginName,\n                  methodName = thing.methodName;\n              var addToQueue = false; // Queue actions if plugin not loaded except for initialize and reset\n\n              if (!methodName.match(/^initialize/) && !methodName.match(/^reset/)) {\n                addToQueue = !plugins[pluginName].loaded;\n              }\n              /* If offline and its a core method. Add to queue */\n\n\n              if (context.offline && methodName.match(/^(page|track|identify)/)) {\n                addToQueue = true;\n              }\n\n              acc[\"\".concat(pluginName)] = addToQueue;\n              return acc;\n            }, {});\n            /* generate plugin specific payloads */\n\n            _context5.next = 10;\n            return data.exact.reduce(\n            /*#__PURE__*/\n            function () {\n              var _ref6 = asyncToGenerator(\n              /*#__PURE__*/\n              regenerator.mark(function _callee3(scoped, curr, i) {\n                var pluginName, curScope, scopedPayload;\n                return regenerator.wrap(function _callee3$(_context3) {\n                  while (1) {\n                    switch (_context3.prev = _context3.next) {\n                      case 0:\n                        pluginName = curr.pluginName;\n                        _context3.next = 3;\n                        return scoped;\n\n                      case 3:\n                        curScope = _context3.sent;\n\n                        if (!(data.namespaced && data.namespaced[pluginName])) {\n                          _context3.next = 11;\n                          break;\n                        }\n\n                        _context3.next = 7;\n                        return data.namespaced[pluginName].reduce(\n                        /*#__PURE__*/\n                        function () {\n                          var _ref7 = asyncToGenerator(\n                          /*#__PURE__*/\n                          regenerator.mark(function _callee2(acc, p, count) {\n                            var curScopeData, genAbort, val, returnValue;\n                            return regenerator.wrap(function _callee2$(_context2) {\n                              while (1) {\n                                switch (_context2.prev = _context2.next) {\n                                  case 0:\n                                    genAbort = function _ref8(currentAct, pname, otherPlug) {\n                                      return function (reason, plugins) {\n                                        var callsite = otherPlug || pname; // console.log(`__abort msg: ${reason}`)\n                                        // console.log(`__abort ${pname}`)\n                                        // console.log(`__abort xxx: ${plugins}`)\n                                        // console.log(`__abort otherPlug`, otherPlug)\n\n                                        return objectSpread2(objectSpread2({}, currentAct), {}, {\n                                          abort: {\n                                            reason: reason,\n                                            plugins: plugins || [pname],\n                                            caller: method,\n                                            from: callsite\n                                          }\n                                        });\n                                      };\n                                    };\n\n                                    _context2.next = 3;\n                                    return acc;\n\n                                  case 3:\n                                    curScopeData = _context2.sent;\n\n                                    if (!(!p.method || !isFunction(p.method))) {\n                                      _context2.next = 6;\n                                      break;\n                                    }\n\n                                    return _context2.abrupt(\"return\", curScopeData);\n\n                                  case 6:\n                                    /* Make sure plugins dont call themselves */\n                                    validateMethod(p.methodName, p.pluginName);\n                                    _context2.next = 9;\n                                    return p.method({\n                                      payload: curScopeData,\n                                      instance: instance,\n                                      abort: genAbort(curScopeData, pluginName, p.pluginName),\n                                      config: getConfig(p.pluginName, plugins, allPlugins),\n                                      plugins: plugins\n                                    });\n\n                                  case 9:\n                                    val = _context2.sent;\n                                    returnValue = isObject(val) ? val : {};\n                                    return _context2.abrupt(\"return\", Promise.resolve(objectSpread2(objectSpread2({}, curScopeData), returnValue)));\n\n                                  case 12:\n                                  case \"end\":\n                                    return _context2.stop();\n                                }\n                              }\n                            }, _callee2);\n                          }));\n\n                          return function (_x10, _x11, _x12) {\n                            return _ref7.apply(this, arguments);\n                          };\n                        }(), Promise.resolve(action));\n\n                      case 7:\n                        scopedPayload = _context3.sent;\n\n                        /* Set scoped payload */\n                        curScope[pluginName] = scopedPayload;\n                        _context3.next = 12;\n                        break;\n\n                      case 11:\n                        /* Set payload as default action */\n                        curScope[pluginName] = action;\n\n                      case 12:\n                        return _context3.abrupt(\"return\", Promise.resolve(curScope));\n\n                      case 13:\n                      case \"end\":\n                        return _context3.stop();\n                    }\n                  }\n                }, _callee3);\n              }));\n\n              return function (_x7, _x8, _x9) {\n                return _ref6.apply(this, arguments);\n              };\n            }(), Promise.resolve({}));\n\n          case 10:\n            payloads = _context5.sent;\n            _context5.next = 13;\n            return data.exact.reduce(\n            /*#__PURE__*/\n            function () {\n              var _ref9 = asyncToGenerator(\n              /*#__PURE__*/\n              regenerator.mark(function _callee4(promise, curr, i) {\n                var lastLoop, pluginName, currentPlugin, currentActionValue, payloadValue, funcArgs, val, returnValue, merged, scopedPayload, nameSpaceEvent, actionDepth, updatedPayload;\n                return regenerator.wrap(function _callee4$(_context4) {\n                  while (1) {\n                    switch (_context4.prev = _context4.next) {\n                      case 0:\n                        lastLoop = data.exact.length === i + 1;\n                        pluginName = curr.pluginName;\n                        currentPlugin = allPlugins[pluginName];\n                        _context4.next = 5;\n                        return promise;\n\n                      case 5:\n                        currentActionValue = _context4.sent;\n                        payloadValue = payloads[pluginName] ? payloads[pluginName] : {};\n                        /* If eventStart, allow for value merging */\n\n                        if (isStartEvent) {\n                          payloadValue = currentActionValue;\n                        }\n\n                        if (!shouldAbort(payloadValue, pluginName)) {\n                          _context4.next = 11;\n                          break;\n                        }\n\n                        // console.log(`> Abort from payload specific \"${pluginName}\" abort value`, payloadValue)\n                        abortDispatch({\n                          data: payloadValue,\n                          method: method,\n                          instance: instance,\n                          pluginName: pluginName,\n                          store: store\n                        });\n                        return _context4.abrupt(\"return\", Promise.resolve(currentActionValue));\n\n                      case 11:\n                        if (!shouldAbort(currentActionValue, pluginName)) {\n                          _context4.next = 14;\n                          break;\n                        }\n\n                        // console.log(`> Abort from ${method} abort value`, currentActionValue)\n                        if (lastLoop) {\n                          abortDispatch({\n                            data: currentActionValue,\n                            method: method,\n                            instance: instance,\n                            // pluginName,\n                            store: store\n                          });\n                        }\n\n                        return _context4.abrupt(\"return\", Promise.resolve(currentActionValue));\n\n                      case 14:\n                        if (!(queueData.hasOwnProperty(pluginName) && queueData[pluginName] === true)) {\n                          _context4.next = 17;\n                          break;\n                        }\n\n                        // console.log('Queue this instead', pluginName)\n                        store.dispatch({\n                          type: \"queue\",\n                          plugin: pluginName,\n                          payload: payloadValue,\n\n                          /* Internal data for analytics engine */\n                          _: {\n                            called: \"queue\",\n                            from: 'queueMechanism' // for debugging\n\n                          }\n                        });\n                        return _context4.abrupt(\"return\", Promise.resolve(currentActionValue));\n\n                      case 17:\n                        /*\n                        const checkForLoaded = () => {\n                          const p = instance.getState('plugins')\n                          return p[currentPlugin.name].loaded\n                        }\n                        // const p = instance.getState('plugins')\n                        console.log(`loaded \"${currentPlugin.name}\" > ${method}:`, p[currentPlugin.name].loaded)\n                        // await waitForReady(currentPlugin, checkForLoaded, 10000).then((d) => {\n                        //   console.log(`Loaded ${method}`, currentPlugin.name)\n                        // }).catch((e) => {\n                        //   console.log(`Error ${method} ${currentPlugin.name}`, e)\n                        //   // TODO dispatch failure\n                        // })\n                        */\n                        // @TODO figure out if we want queuing semantics\n                        funcArgs = makeArgs(payloads[pluginName], allPlugins[pluginName]); // console.log(`funcArgs ${method} ${pluginName}`, funcArgs)\n\n                        /* Run the plugin function */\n\n                        _context4.next = 20;\n                        return currentPlugin[method]({\n                          // currentPlugin: pluginName,\n                          abort: funcArgs.abort,\n                          // Send in original action value or scope payload\n                          payload: payloadValue,\n                          instance: instance,\n                          config: getConfig(pluginName, plugins, allPlugins),\n                          plugins: plugins\n                        });\n\n                      case 20:\n                        val = _context4.sent;\n                        returnValue = isObject(val) ? val : {};\n                        merged = objectSpread2(objectSpread2({}, currentActionValue), returnValue);\n                        scopedPayload = payloads[pluginName]; // || currentActionValue\n\n                        if (shouldAbort(scopedPayload, pluginName)) {\n                          // console.log(`>> HANDLE abort ${method} ${pluginName}`)\n                          abortDispatch({\n                            data: scopedPayload,\n                            method: method,\n                            instance: instance,\n                            pluginName: pluginName,\n                            store: store\n                          });\n                        } else {\n                          nameSpaceEvent = \"\".concat(method, \":\").concat(pluginName);\n                          actionDepth = (nameSpaceEvent.match(/:/g) || []).length;\n\n                          if (actionDepth < 2 && !method.match(bootstrapRegex) && !method.match(readyRegex)) {\n                            updatedPayload = isStartEvent ? merged : payloadValue; // Dispatched for `.on('xyz') listeners.\n\n                            instance.dispatch(objectSpread2(objectSpread2({}, updatedPayload), {}, {\n                              type: nameSpaceEvent,\n                              _: {\n                                called: nameSpaceEvent,\n                                from: 'submethod'\n                              }\n                            }));\n                          }\n                        } // console.log('merged', merged)\n\n\n                        return _context4.abrupt(\"return\", Promise.resolve(merged));\n\n                      case 26:\n                      case \"end\":\n                        return _context4.stop();\n                    }\n                  }\n                }, _callee4);\n              }));\n\n              return function (_x13, _x14, _x15) {\n                return _ref9.apply(this, arguments);\n              };\n            }(), Promise.resolve(action));\n\n          case 13:\n            resolvedAction = _context5.sent;\n\n            if (!(!method.match(endsWithStartRegex) && !method.match(/^registerPlugin/) && // !method.match(/^disablePlugin/) &&\n            // !method.match(/^enablePlugin/) &&\n            !method.match(readyRegex) && !method.match(bootstrapRegex) && !method.match(/^params/) && !method.match(/^userIdChanged/))) {\n              _context5.next = 21;\n              break;\n            }\n\n            if (EVENTS$$1.plugins.includes(method)) ; // console.log(`Dont dispatch for ${method}`, resolvedAction)\n            // return resolvedAction\n\n            /*\n              Verify this original action setup.\n              It's intended to keep actions from double dispatching themselves\n            */\n\n\n            if (!(resolvedAction._ && resolvedAction._.originalAction === method)) {\n              _context5.next = 18;\n              break;\n            }\n\n            return _context5.abrupt(\"return\", resolvedAction);\n\n          case 18:\n            endAction = objectSpread2(objectSpread2({}, resolvedAction), {\n              _: {\n                originalAction: resolvedAction.type,\n                called: resolvedAction.type,\n                from: 'engineEnd'\n              }\n            });\n            /* If all plugins are aborted, dispatch xAborted */\n\n            if (shouldAbortAll(resolvedAction, data.exact.length) && !method.match(/End$/)) {\n              endAction = objectSpread2(objectSpread2({}, endAction), {\n                type: resolvedAction.type + 'Aborted'\n              });\n            }\n\n            store.dispatch(endAction);\n\n          case 21:\n            return _context5.abrupt(\"return\", resolvedAction);\n\n          case 22:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n  return _processEvent.apply(this, arguments);\n}\n\nfunction abortDispatch(_ref3) {\n  var data = _ref3.data,\n      method = _ref3.method,\n      instance = _ref3.instance,\n      pluginName = _ref3.pluginName,\n      store = _ref3.store;\n  var postFix = pluginName ? ':' + pluginName : '';\n  var abortEvent = method + 'Aborted' + postFix;\n  store.dispatch(objectSpread2(objectSpread2({}, data), {}, {\n    type: abortEvent,\n    _: {\n      called: abortEvent,\n      from: 'abort'\n    }\n  }));\n}\n\nfunction getConfig(name, pluginState, allPlugins) {\n  var pluginData = pluginState[name] || allPlugins[name];\n\n  if (pluginData && pluginData.config) {\n    return pluginData.config;\n  }\n\n  return {};\n}\n\nfunction getPluginFunctions(methodName, plugins) {\n  return plugins.reduce(function (arr, plugin) {\n    return !plugin[methodName] ? arr : arr.concat({\n      methodName: methodName,\n      pluginName: plugin.name,\n      method: plugin[methodName]\n    });\n  }, []);\n}\n\nfunction formatMethod(type) {\n  return type.replace(endsWithStartRegex, '');\n}\n/**\n * Return array of event names\n * @param  {String} eventType - original event type\n * @param  {String} namespace - optional namespace postfix\n * @return {array} - type, method, end\n */\n\n\nfunction getEventNames(eventType, namespace) {\n  var method = formatMethod(eventType);\n  var postFix = namespace ? \":\".concat(namespace) : ''; // `typeStart:pluginName`\n\n  var type = \"\".concat(eventType).concat(postFix); // `type:pluginName`\n\n  var methodName = \"\".concat(method).concat(postFix); // `typeEnd:pluginName`\n\n  var end = \"\".concat(method, \"End\").concat(postFix);\n  return [type, methodName, end];\n}\n/* Collect all calls for a given event in the system */\n\n\nfunction getAllMatchingCalls(eventType, activePlugins, allPlugins) {\n  var eventNames = getEventNames(eventType); // console.log('eventNames', eventNames)\n  // 'eventStart', 'event', & `eventEnd`\n\n  var core = eventNames.map(function (word) {\n    return getPluginFunctions(word, activePlugins);\n  }); // Gather nameSpaced Events\n\n  return activePlugins.reduce(function (acc, plugin) {\n    var name = plugin.name;\n    var nameSpacedEvents = getEventNames(eventType, name); // console.log('eventNames namespaced', nameSpacedEvents)\n\n    var _nameSpacedEvents$map = nameSpacedEvents.map(function (word) {\n      return getPluginFunctions(word, activePlugins);\n    }),\n        _nameSpacedEvents$map2 = slicedToArray(_nameSpacedEvents$map, 3),\n        beforeFuncs = _nameSpacedEvents$map2[0],\n        duringFuncs = _nameSpacedEvents$map2[1],\n        afterFuncs = _nameSpacedEvents$map2[2];\n\n    if (beforeFuncs.length) {\n      acc.beforeNS[name] = beforeFuncs;\n    }\n\n    if (duringFuncs.length) {\n      acc.duringNS[name] = duringFuncs;\n    }\n\n    if (afterFuncs.length) {\n      acc.afterNS[name] = afterFuncs;\n    }\n\n    return acc;\n  }, {\n    before: core[0],\n    beforeNS: {},\n    during: core[1],\n    duringNS: {},\n    after: core[2],\n    afterNS: {}\n  });\n}\n\nfunction shouldAbort(_ref4, pluginName) {\n  var abort = _ref4.abort;\n  if (!abort) return false;\n  if (abort === true) return true;\n  return includes(abort, pluginName) || abort && includes(abort.plugins, pluginName);\n}\n\nfunction shouldAbortAll(_ref5, pluginsCount) {\n  var abort = _ref5.abort;\n  if (!abort) return false;\n  if (abort === true || isString(abort)) return true;\n  var plugins = abort.plugins;\n  return isArray$1(abort) && abort.length === pluginsCount || isArray$1(plugins) && plugins.length === pluginsCount;\n}\n\nfunction isArray$1(arr) {\n  return Array.isArray(arr);\n}\n\nfunction includes(arr, name) {\n  if (!arr || !isArray$1(arr)) return false;\n  return arr.includes(name);\n}\n/**\n * Generate arguments to pass to plugin methods\n * @param  {Object} instance - analytics instance\n * @param  {array} abortablePlugins - plugins that can be cancelled by caller\n * @return {*} function to inject plugin params\n */\n\n\nfunction argumentFactory(instance, abortablePlugins) {\n  // console.log('abortablePlugins', abortablePlugins)\n  return function (action, plugin, otherPlugin) {\n    var config = plugin.config,\n        name = plugin.name;\n    var method = \"\".concat(name, \".\").concat(action.type);\n\n    if (otherPlugin) {\n      method = otherPlugin.event;\n    }\n\n    var abortF = action.type.match(endsWithStartRegex) ? abortFunction(name, method, abortablePlugins, otherPlugin, action) : notAbortableError(action, method);\n    return {\n      /* self: plugin, for future maybe */\n      // clone objects to avoid reassign\n      payload: formatPayload(action),\n      instance: instance,\n      config: config || {},\n      abort: abortF\n    };\n  };\n}\n\nfunction abortFunction(pluginName, method, abortablePlugins, otherPlugin, action) {\n  return function (reason, plugins) {\n    var caller = otherPlugin ? otherPlugin.name : pluginName;\n    var pluginsToAbort = plugins && isArray$1(plugins) ? plugins : abortablePlugins;\n\n    if (otherPlugin) {\n      pluginsToAbort = plugins && isArray$1(plugins) ? plugins : [pluginName];\n\n      if (!pluginsToAbort.includes(pluginName) || pluginsToAbort.length !== 1) {\n        throw new Error(\"Method \".concat(method, \" can only abort \").concat(pluginName, \" plugin. \").concat(JSON.stringify(pluginsToAbort), \" input valid\"));\n      }\n    }\n\n    return objectSpread2(objectSpread2({}, action), {}, {\n      //  todo verify this merge is ok\n      abort: {\n        reason: reason,\n        plugins: pluginsToAbort,\n        caller: method,\n        _: caller\n      }\n    });\n  };\n}\n\nfunction notAbortableError(action, method) {\n  return function () {\n    throw new Error(action.type + ' action not cancellable. Remove abort in ' + method);\n  };\n}\n/**\n * Verify plugin is not calling itself with whatever:myPluginName self refs\n */\n\n\nfunction validateMethod(actionName, pluginName) {\n  var text = getNameSpacedAction(actionName);\n  var methodCallMatchesPluginNamespace = text && text.name === pluginName;\n\n  if (methodCallMatchesPluginNamespace) {\n    var sub = getNameSpacedAction(text.method);\n    var subText = sub ? 'or ' + sub.method : '';\n    throw new Error([pluginName + ' plugin is calling method ' + actionName, 'Plugins cant call self', \"Use \".concat(text.method, \" \").concat(subText, \" in \").concat(pluginName, \" plugin insteadof \").concat(actionName)].join('\\n'));\n  }\n}\n\nfunction getNameSpacedAction(event) {\n  var split = event.match(/(.*):(.*)/);\n\n  if (!split) {\n    return false;\n  }\n\n  return {\n    method: split[1],\n    name: split[2]\n  };\n}\n\nfunction formatPayload(action) {\n  return Object.keys(action).reduce(function (acc, key) {\n    // redact type from { payload }\n    if (key === 'type') {\n      return acc;\n    }\n\n    if (isObject(action[key])) {\n      acc[key] = Object.assign({}, action[key]);\n    } else {\n      acc[key] = action[key];\n    }\n\n    return acc;\n  }, {});\n}\n/*\nfunction getMatchingMethods(eventType, activePlugins) {\n  const exact = getPluginFunctions(eventType, activePlugins)\n  // console.log('exact', exact)\n  // Gather nameSpaced Events\n  return activePlugins.reduce((acc, plugin) => {\n    const { name } = plugin\n    const clean = getPluginFunctions(`${eventType}:${name}`, activePlugins)\n    if (clean.length) {\n      acc.namespaced[name] = clean\n    }\n    return acc\n  }, {\n    exact: exact,\n    namespaced: {}\n  })\n}\n*/\n\nfunction pluginMiddleware(instance, getPlugins, systemEvents) {\n  var isReady = {};\n  return function (store) {\n    return function (next) {\n      return (\n        /*#__PURE__*/\n        function () {\n          var _ref = asyncToGenerator(\n          /*#__PURE__*/\n          regenerator.mark(function _callee(action) {\n            var type, abort, plugins, updatedAction, allPlugins, pluginsArray, allRegisteredPlugins, completed, failed, disabled, waitForPluginsToLoad, updated;\n            return regenerator.wrap(function _callee$(_context) {\n              while (1) {\n                switch (_context.prev = _context.next) {\n                  case 0:\n                    type = action.type, abort = action.abort, plugins = action.plugins;\n                    updatedAction = action;\n\n                    if (!abort) {\n                      _context.next = 4;\n                      break;\n                    }\n\n                    return _context.abrupt(\"return\", next(action));\n\n                  case 4:\n                    /* Analytics.plugins.enable called, we need to init the plugins */\n                    if (type === EVENTS.enablePlugin) {\n                      store.dispatch({\n                        type: EVENTS.initializeStart,\n                        plugins: plugins,\n                        disabled: [],\n                        fromEnable: true,\n                        meta: action.meta\n                      });\n                    }\n\n                    if (type === EVENTS.disablePlugin) {\n                      // If cached callback, resolve promise/run callback. debounced to fix race condition\n                      setTimeout(function () {\n                        return runCallback(action.meta.rid, {\n                          payload: action\n                        });\n                      }, 0);\n                    }\n                    /* @TODO implement\n                    if (type === EVENTS.loadPlugin) {\n                      // Rerun initialize calls in plugins\n                      const allPlugins = getPlugins()\n                      const pluginsToLoad = Object.keys(allPlugins).filter((name) => {\n                        return plugins.includes(name)\n                      }).reduce((acc, curr) => {\n                        acc[curr] = allPlugins[curr]\n                        return acc\n                      }, {})\n                      const initializeAction = {\n                        type: EVENTS.initializeStart,\n                        plugins: plugins\n                      }\n                      const updated = await runPlugins(initializeAction, pluginsToLoad, instance, store, systemEvents)\n                      return next(updated)\n                    }\n                    */\n                    //*  || type.match(/^initializeAbort:/)\n\n\n                    if (type === EVENTS.initializeEnd) {\n                      allPlugins = getPlugins();\n                      pluginsArray = Object.keys(allPlugins);\n                      allRegisteredPlugins = pluginsArray.filter(function (name) {\n                        return plugins.includes(name);\n                      }).map(function (name) {\n                        return allPlugins[name];\n                      });\n                      completed = [];\n                      failed = [];\n                      disabled = action.disabled; // console.log('allRegisteredPlugins', allRegisteredPlugins)\n\n                      waitForPluginsToLoad = allRegisteredPlugins.map(function (plugin) {\n                        var loaded = plugin.loaded,\n                            name = plugin.name;\n                        /* Plugins will abort trying to load after 10 seconds. 1e4 === 10000 MS */\n\n                        return waitForReady(plugin, loaded, 1e4).then(function (d) {\n                          if (!isReady[name]) {\n                            // only dispatch namespaced rdy once\n                            store.dispatch({\n                              type: EVENTS.pluginReadyType(name),\n                              // `ready:${name}`\n                              name: name,\n                              events: Object.keys(plugin).filter(function (name) {\n                                return !nonEvents.includes(name);\n                              })\n                            });\n                            isReady[name] = true;\n                          }\n\n                          completed = completed.concat(name);\n                          return plugin; // It's loaded! run the command\n                        })[\"catch\"](function (e) {\n                          // Timeout Add to queue\n                          // console.log('Error generic waitForReady. Push this to queue', e)\n                          if (e instanceof Error) {\n                            throw new Error(e);\n                          }\n\n                          failed = failed.concat(e.name); // Failed to fire, add to queue\n\n                          return e;\n                        });\n                      });\n                      Promise.all(waitForPluginsToLoad).then(function (calls) {\n                        // setTimeout to ensure runs after 'page'\n                        var payload = {\n                          plugins: completed,\n                          failed: failed,\n                          disabled: disabled\n                        };\n                        setTimeout(function () {\n                          if (pluginsArray.length === waitForPluginsToLoad.length + disabled.length) {\n                            store.dispatch(objectSpread2(objectSpread2({}, {\n                              type: EVENTS.ready\n                            }), payload));\n                          }\n                        }, 0);\n                      });\n                    }\n                    /* New plugin system */\n\n\n                    if (!(type !== EVENTS.bootstrap)) {\n                      _context.next = 13;\n                      break;\n                    }\n\n                    if (/^ready:([^:]*)$/.test(type)) {\n                      // Immediately flush queue\n                      setTimeout(function () {\n                        return processQueue(store, getPlugins, instance);\n                      }, 0);\n                    }\n\n                    _context.next = 11;\n                    return runPlugins(action, getPlugins, instance, store, systemEvents);\n\n                  case 11:\n                    updated = _context.sent;\n                    return _context.abrupt(\"return\", next(updated));\n\n                  case 13:\n                    return _context.abrupt(\"return\", next(updatedAction));\n\n                  case 14:\n                  case \"end\":\n                    return _context.stop();\n                }\n              }\n            }, _callee);\n          }));\n\n          return function (_x) {\n            return _ref.apply(this, arguments);\n          };\n        }()\n      );\n    };\n  };\n}\n\nfunction storageMiddleware(storage) {\n  return function (store) {\n    return function (next) {\n      return function (action) {\n        var type = action.type,\n            key = action.key,\n            value = action.value,\n            options = action.options;\n\n        if (type === EVENTS.setItem || type === EVENTS.removeItem) {\n          if (action.abort) {\n            return next(action);\n          } // Run storage set or remove\n\n\n          if (type === EVENTS.setItem) {\n            storage.setItem(key, value, options);\n          } else {\n            storage.removeItem(key, options);\n          }\n        }\n\n        return next(action);\n      };\n    };\n  };\n}\n/*\n  Todo: emit events for keys we care about\n  window.addEventListener('storage', (event) => console.log(event));\n*/\n\nfunction _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nvar classCallCheck = _classCallCheck;\n\n/* Class to fix dynamic middlewares from conflicting with each other\nif more than one analytic instance is active */\n\nvar DynamicMiddleware = function DynamicMiddleware() {\n  var _this = this;\n\n  classCallCheck(this, DynamicMiddleware);\n\n  defineProperty(this, \"before\", []);\n\n  defineProperty(this, \"after\", []);\n\n  defineProperty(this, \"addMiddleware\", function (middlewares, position) {\n    _this[position] = _this[position].concat(middlewares);\n  });\n\n  defineProperty(this, \"removeMiddleware\", function (middleware, position) {\n    var index = _this[position].findIndex(function (d) {\n      return d === middleware;\n    });\n\n    if (index === -1) return;\n    _this[position] = [].concat(toConsumableArray(_this[position].slice(0, index)), toConsumableArray(_this[position].slice(index + 1)));\n  });\n\n  defineProperty(this, \"dynamicMiddlewares\", function (position) {\n    return function (store) {\n      return function (next) {\n        return function (action) {\n          var middlewareAPI = {\n            getState: store.getState,\n            dispatch: function dispatch(act) {\n              return store.dispatch(act);\n            }\n          };\n\n          var chain = _this[position].map(function (middleware) {\n            return middleware(middlewareAPI);\n          });\n\n          return compose.apply(void 0, toConsumableArray(chain))(next)(action);\n        };\n      };\n    };\n  });\n};\n\nfunction createReducer(getPlugins) {\n  return function plugins() {\n    var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    var action = arguments.length > 1 ? arguments[1] : undefined;\n    var newState = {};\n\n    if (action.type === 'initialize:aborted') {\n      return state;\n    }\n\n    if (/^registerPlugin:([^:]*)$/.test(action.type)) {\n      var name = getNameFromEventType(action.type, 'registerPlugin');\n      var plugin = getPlugins()[name];\n\n      if (!plugin || !name) {\n        return state;\n      }\n\n      var isEnabled = action.enabled;\n      newState[name] = {\n        enabled: isEnabled,\n\n        /* if no initialization method. Set initialized true */\n        initialized: isEnabled ? Boolean(!plugin.initialize) : false,\n\n        /* If plugin enabled === false, set loaded to false, else check plugin.loaded function */\n        loaded: isEnabled ? Boolean(plugin.loaded()) : false,\n        config: plugin.config || {}\n      };\n      return objectSpread2(objectSpread2({}, state), newState);\n    }\n\n    if (/^initialize:([^:]*)$/.test(action.type)) {\n      var _name = getNameFromEventType(action.type, EVENTS.initialize);\n\n      var _plugin = getPlugins()[_name];\n\n      if (!_plugin || !_name) {\n        return state;\n      }\n\n      newState[_name] = objectSpread2(objectSpread2({}, state[_name]), {\n        initialized: true,\n\n        /* check plugin.loaded function */\n        loaded: Boolean(_plugin.loaded())\n      });\n      return objectSpread2(objectSpread2({}, state), newState);\n    }\n\n    if (/^ready:([^:]*)$/.test(action.type)) {\n      // const name = getNameFromEventType(action.type, 'ready')\n      newState[action.name] = objectSpread2(objectSpread2({}, state[action.name]), {\n        loaded: true\n      });\n      return objectSpread2(objectSpread2({}, state), newState);\n    }\n\n    switch (action.type) {\n      /* case EVENTS.pluginFailed:\n        // console.log('PLUGIN_FAILED', action.name)\n        newState[action.name] = {\n          ...state[action.name],\n          ...{ loaded: false }\n        }\n        return { ...state, ...newState }\n      */\n\n      /* When analytics.plugins.disable called */\n      case EVENTS.disablePlugin:\n        return objectSpread2(objectSpread2({}, state), togglePluginStatus(action.plugins, false, state));\n\n      /* When analytics.plugins.enable called */\n\n      case EVENTS.enablePlugin:\n        return objectSpread2(objectSpread2({}, state), togglePluginStatus(action.plugins, true, state));\n\n      default:\n        return state;\n    }\n  };\n}\n\nfunction getNameFromEventType(type, baseName) {\n  return type.substring(baseName.length + 1, type.length);\n}\n\nfunction togglePluginStatus(plugins, status, currentState) {\n  return plugins.reduce(function (acc, pluginKey) {\n    acc[pluginKey] = objectSpread2(objectSpread2({}, currentState[pluginKey]), {\n      enabled: status\n    });\n    return acc;\n  }, currentState);\n}\n\n// TODO fix os. os getting stripped out for node build\n\nfunction getBrowserOS() {\n  if (!inBrowser) return false;\n  var os = navigator.appVersion; // ~os bitwise operator to check if in navigator\n\n  if (~os.indexOf('Win')) return 'Windows';\n  if (~os.indexOf('Mac')) return 'MacOS';\n  if (~os.indexOf('X11')) return 'UNIX';\n  if (~os.indexOf('Linux')) return 'Linux'; // default\n\n  return 'Unknown OS';\n}\n\nvar osName;\nvar referrer;\nvar locale;\nvar timeZone;\n\n{\n  osName = getBrowserOS();\n  referrer = inBrowser ? document.referrer : null;\n  locale = getBrowserLocale();\n  timeZone = getTimeZone();\n}\n\nvar initialState = {\n  initialized: false,\n  sessionId: uuid(),\n  app: null,\n  version: null,\n  debug: false,\n  offline: inBrowser ? !navigator.onLine : false,\n  // use node network is-online\n  os: {\n    name: osName\n  },\n  userAgent: inBrowser ? navigator.userAgent : 'node',\n  // https://github.com/bestiejs/platform.js\n  library: {\n    name: LIBRARY_NAME,\n    // TODO fix version number. npm run publish:patch has wrong version\n    version: \"0.10.4\"\n  },\n  timezone: timeZone,\n  locale: locale,\n  campaign: {},\n  referrer: referrer // context reducer\n\n};\nfunction context() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var initialized = state.initialized;\n  var type = action.type,\n      campaign = action.campaign;\n\n  switch (type) {\n    case EVENTS.campaign:\n      return objectSpread2(objectSpread2({}, state), {\n        campaign: campaign\n      });\n\n    case EVENTS.offline:\n      return objectSpread2(objectSpread2({}, state), {\n        offline: true\n      });\n\n    case EVENTS.online:\n      return objectSpread2(objectSpread2({}, state), {\n        offline: false\n      });\n\n    default:\n      if (!initialized) {\n        return objectSpread2(objectSpread2(objectSpread2({}, initialState), state), {\n          initialized: true\n        });\n      }\n\n      return state;\n  }\n}\nvar excludeItems = ['plugins', 'reducers', 'storage']; // Pull plugins and reducers off intital config\n\nfunction makeContext(config) {\n  return Object.keys(config).reduce(function (acc, current) {\n    if (excludeItems.includes(current)) {\n      return acc;\n    }\n\n    acc[current] = config[current];\n    return acc;\n  }, {});\n}\n\nfunction serialize(obj) {\n  var s = obj;\n\n  try {\n    s = JSON.parse(JSON.stringify(obj));\n  } catch (err) {}\n\n  return s;\n}\n\nvar hashRegex = /#.*$/;\n\nfunction canonicalUrl() {\n  if (!inBrowser) return;\n  var tags = document.getElementsByTagName('link');\n\n  for (var i = 0, tag; tag = tags[i]; i++) {\n    if (tag.getAttribute('rel') === 'canonical') {\n      return tag.getAttribute('href');\n    }\n  }\n}\n\nfunction urlPath(url) {\n  var regex = /(http[s]?:\\/\\/)?([^\\/\\s]+\\/)(.*)/g;\n  var matches = regex.exec(url);\n  var pathMatch = matches && matches[3] ? matches[3].split('?')[0].replace(hashRegex, '') : '';\n  return '/' + pathMatch;\n}\n/**\n * Return the canonical URL and rmove the hash.\n * @param  {string} search - search param\n * @return {string} return current canonical URL\n */\n\n\nfunction currentUrl(search) {\n  var canonical = canonicalUrl();\n  if (!canonical) return window.location.href.replace(hashRegex, '');\n  return canonical.match(/\\?/) ? canonical : canonical + search;\n}\n/**\n * Page data for overides\n * @typedef {object} PageData\n * @property {string} [title] - Page title\n * @property {string} [url] - Page url\n * @property {string} [path] - Page path\n * @property {string} [search] - Page search\n * @property {string} [width] - Page width\n * @property {string} [height] - Page height\n*/\n\n/**\n * Get information about current page\n * @typedef {Function} getPageData\n * @param  {PageData} [pageData = {}] - Page data overides\n * @return {PageData} resolved page data\n */\n\n\nvar getPageData = function getPageData() {\n  var pageData = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  if (!inBrowser) return pageData;\n  var _document = document,\n      title = _document.title,\n      referrer = _document.referrer;\n  var _window = window,\n      location = _window.location,\n      innerWidth = _window.innerWidth,\n      innerHeight = _window.innerHeight;\n  var hash = location.hash,\n      search = location.search;\n  var url = currentUrl(search);\n  var page = {\n    title: title,\n    url: url,\n    path: urlPath(url),\n    hash: hash,\n    search: search,\n    width: innerWidth,\n    height: innerHeight\n  };\n\n  if (referrer && referrer !== '') {\n    page.referrer = referrer;\n  }\n\n  return objectSpread2(objectSpread2({}, page), pageData);\n};\nvar initialState$1 = {\n  last: {},\n  history: [] // page reducer\n\n};\nfunction page() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState$1;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var properties = action.properties,\n      options = action.options,\n      meta = action.meta;\n\n  switch (action.type) {\n    case EVENTS.page:\n      var viewData = serialize(objectSpread2({\n        properties: properties,\n        meta: meta\n      }, Object.keys(options).length && {\n        options: options\n      }));\n      return objectSpread2(objectSpread2({}, state), {\n        last: viewData,\n        // Todo prevent LARGE arrays https://bit.ly/2MnBwPT\n        history: state.history.concat(viewData)\n      });\n\n    default:\n      return state;\n  }\n}\n\nvar initialState$2 = {\n  last: {},\n  history: [] // track reducer\n\n};\nfunction trackReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState$2;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var type = action.type,\n      meta = action.meta,\n      options = action.options,\n      event = action.event,\n      properties = action.properties;\n\n  switch (type) {\n    case EVENTS.track:\n      var trackEvent = serialize(objectSpread2(objectSpread2({\n        event: event,\n        properties: properties\n      }, Object.keys(options).length && {\n        options: options\n      }), {}, {\n        meta: meta\n      }));\n      return objectSpread2(objectSpread2({}, state), {\n        last: trackEvent,\n        // Todo prevent LARGE arrays https://bit.ly/2MnBwPT\n        history: state.history.concat(trackEvent)\n      });\n    // todo push events to history\n\n    default:\n      return state;\n  }\n}\n\n/*\nTODO figure out if this should live in state...\nQueue could be in mermory as well.\nBut also needs to be persisted to storage\n*/\n\nvar initialState$3 = {\n  actions: []\n};\nfunction queueReducer() {\n  var state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialState$3;\n  var action = arguments.length > 1 ? arguments[1] : undefined;\n  var type = action.type,\n      payload = action.payload;\n\n  switch (type) {\n    case 'queue':\n      var actionChain;\n      /* prioritize identify in event queue */\n\n      if (payload && payload.type && payload.type === EVENTS.identify) {\n        actionChain = [action].concat(state.actions);\n      } else {\n        actionChain = state.actions.concat(action);\n      }\n\n      return objectSpread2(objectSpread2({}, state), {}, {\n        actions: actionChain\n      });\n\n    case 'dequeue':\n      return [];\n    // todo push events to history\n\n    default:\n      return state;\n  }\n}\n\nfunction listen(events, func, toAdd) {\n  if (!inBrowser) return false;\n  var fn = window[(toAdd ? 'add' : 'remove') + 'EventListener'];\n  events.split(' ').forEach(function (ev) {\n    fn(ev, func);\n  });\n}\n\nfunction check() {\n  return Promise.resolve(!navigator.onLine);\n}\nfunction watch(cb) {\n  var fn = function fn(_) {\n    return check().then(cb);\n  };\n\n  var listener = listen.bind(null, 'online offline', fn);\n  listener(true); // return unsubscribe\n\n  return function (_) {\n    return listener(false);\n  };\n}\n\nfunction Debug() {\n  // initialize global history\n\n  var globalVariable = PREFIX + LIBRARY_NAME + PREFIX; // Global key is window.__analytics__\n\n  globalContext[globalVariable] = [];\n  return function (createStore$$1) {\n    return function (reducer, preloadedState, enhancer) {\n      var store = createStore$$1(reducer, preloadedState, enhancer);\n      var origDispatch = store.dispatch;\n\n      var dispatch = function dispatch(action) {\n        var a = action.action || action;\n        globalContext[globalVariable].push(a);\n        return origDispatch(action);\n      };\n\n      return Object.assign(store, {\n        dispatch: dispatch\n      });\n    };\n  };\n}\nfunction composeWithDebug(config) {\n  return function () {\n    return compose(compose.apply(null, arguments), Debug(config));\n  };\n}\n\nfunction ensureArray(singleOrArray) {\n  if (!singleOrArray) return [];\n  if (isArray(singleOrArray)) return singleOrArray;\n  return [singleOrArray];\n}\n\nfunction getCallbackFromArgs(argArray) {\n  var processArray = argArray || Array.prototype.slice.call(arguments);\n  return processArray.reduce(function (acc, arg) {\n    if (acc) return acc;\n\n    if (isFunction(arg)) {\n      return arg;\n    }\n\n    return acc;\n  }, false);\n}\n\nfunction timeStamp() {\n  return new Date().getTime();\n}\n\nfunction deferredPromiseResolver(resolver, callback) {\n  return function (data) {\n    if (callback) callback(data);\n    resolver(data);\n  };\n}\n\nfunction generateMeta() {\n  var meta = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var resolve = arguments.length > 1 ? arguments[1] : undefined;\n  var possibleCallbacks = arguments.length > 2 ? arguments[2] : undefined;\n  var rid = uuid();\n\n  if (resolve) {\n    // stack[`${rid}-info`] = meta\n    stack[rid] = deferredPromiseResolver(resolve, getCallbackFromArgs(possibleCallbacks));\n  }\n\n  return objectSpread2(objectSpread2({}, meta), {}, {\n    rid: rid,\n    ts: timeStamp()\n  }, !resolve ? {} : {\n    hasCallback: true\n  });\n}\n\n/**\n * Analytics library configuration\n *\n * After the library is initialized with config, the core API is exposed & ready for use in the application.\n *\n * @param {object} config - analytics core config\n * @param {string} [config.app] - Name of site / app\n * @param {string} [config.version] - Version of your app\n * @param {boolean} [config.debug] - Should analytics run in debug mode\n * @param {Array.<AnalyticsPlugin>}  [config.plugins] - Array of analytics plugins\n * @return {AnalyticsInstance} Analytics Instance\n * @example\n *\n * import Analytics from 'analytics'\n * import pluginABC from 'analytics-plugin-abc'\n * import pluginXYZ from 'analytics-plugin-xyz'\n *\n * // initialize analytics\n * const analytics = Analytics({\n *   app: 'my-awesome-app',\n *   plugins: [\n *     pluginABC,\n *     pluginXYZ\n *   ]\n * })\n *\n */\n\nfunction analytics() {\n  var config = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var customReducers = config.reducers || {};\n  var initialUser = config.initialUser || {}; // @TODO add custom value reolvers for userId and anonId\n  // const resolvers = config.resolvers || {}\n\n  /* Parse plugins array */\n\n  var parsedOptions = (config.plugins || []).reduce(function (acc, plugin) {\n    if (isFunction(plugin)) {\n      /* Custom redux middleware */\n      acc.middlewares = acc.middlewares.concat(plugin);\n      return acc;\n    } // Legacy plugin with name\n\n\n    if (plugin.NAMESPACE) plugin.name = plugin.NAMESPACE;\n\n    if (!plugin.name) {\n      /* Plugins must supply a \"name\" property. See error url for more details */\n      throw new Error(ERROR_URL + '1');\n    } // if plugin exposes EVENTS capture available events\n\n\n    var definedEvents = plugin.EVENTS ? Object.keys(plugin.EVENTS).map(function (k) {\n      return plugin.EVENTS[k];\n    }) : [];\n    var enabledFromMerge = !(plugin.enabled === false);\n    var enabledFromPluginConfig = !(plugin.config && plugin.config.enabled === false); // top level { enabled: false } takes presidence over { config: enabled: false }\n\n    acc.pluginEnabled[plugin.name] = enabledFromMerge && enabledFromPluginConfig;\n    delete plugin.enabled;\n\n    if (plugin.methods) {\n      acc.methods[plugin.name] = Object.keys(plugin.methods).reduce(function (a, c) {\n        // enrich methods with analytics instance\n        a[c] = appendArguments(plugin.methods[c]);\n        return a;\n      }, {}); // Remove additional methods from plugins\n\n      delete plugin.methods;\n    } // Convert available methods into events\n\n\n    var methodsToEvents = Object.keys(plugin); // Combine events\n\n    var allEvents = methodsToEvents.concat(definedEvents); // Dedupe events list\n\n    var allEventsUnique = new Set(acc.events.concat(allEvents));\n    acc.events = Array.from(allEventsUnique);\n    acc.pluginsArray = acc.pluginsArray.concat(plugin);\n\n    if (acc.plugins[plugin.name]) {\n      throw new Error(plugin.name + 'AlreadyLoaded');\n    }\n\n    acc.plugins[plugin.name] = plugin;\n\n    if (!acc.plugins[plugin.name].loaded) {\n      // set default loaded func\n      acc.plugins[plugin.name].loaded = function () {\n        return true;\n      };\n    }\n\n    return acc;\n  }, {\n    plugins: {},\n    pluginEnabled: {},\n    methods: {},\n    pluginsArray: [],\n    middlewares: [],\n    events: []\n  });\n  /* Storage by default is set to global & is not persisted */\n\n  var storage = config.storage ? config.storage : {\n    getItem: function getItem(key) {\n      return globalContext[key];\n    },\n    setItem: function setItem(key, value) {\n      return globalContext[key] = value;\n    },\n    removeItem: function removeItem(key) {\n      return globalContext[key] = undefined;\n    }\n  };\n  var getUserProp = getUserPropFunc(storage); // mutable intregrations object for dynamic loading\n\n  var customPlugins = parsedOptions.plugins;\n  /* Grab all registered events from plugins loaded */\n\n  var pluginEvents = parsedOptions.events.filter(function (name) {\n    return !nonEvents.includes(name);\n  });\n  var uniqueEvents = new Set(pluginEvents.concat(coreEvents).filter(function (name) {\n    return !nonEvents.includes(name);\n  }));\n  var allSystemEvents = Array.from(uniqueEvents).sort();\n  var allPluginEvents = pluginEvents.sort();\n  /* plugin methods(functions) must be kept out of state. thus they live here */\n\n  var getPlugins = function getPlugins() {\n    return customPlugins;\n  };\n\n  var _ref = new DynamicMiddleware(),\n      addMiddleware = _ref.addMiddleware,\n      removeMiddleware = _ref.removeMiddleware,\n      dynamicMiddlewares = _ref.dynamicMiddlewares;\n\n  var nonAbortable = function nonAbortable() {\n    // throw new Error(`${ERROR_URL}3`)\n    throw new Error('Abort disabled inListener');\n  }; // Parse URL parameters\n\n\n  var params = paramsParse(); // Initialize visitor information\n\n  var persistedUser = getPersistedUserData(storage);\n\n  var visitorInfo = objectSpread2(objectSpread2(objectSpread2(objectSpread2({}, persistedUser), initialUser), !params.an_uid ? {} : {\n    userId: params.an_uid\n  }), !params.an_aid ? {} : {\n    anonymousId: params.an_aid\n  }); // If no anon id set, create one\n\n\n  if (!visitorInfo.anonymousId) {\n    visitorInfo.anonymousId = uuid();\n  } // TODO merge and set traits\n\n  /**\n   * Async Management methods for plugins. \n   * \n   * This is also where [custom methods](https://bit.ly/329vFXy) are loaded into the instance.\n   * @typedef {Object} Plugins\n   * @property {EnablePlugin} enable - Set storage value\n   * @property {DisablePlugin} disable - Remove storage value\n   * @example\n   *\n   * // Enable a plugin by namespace\n   * analytics.plugins.enable('keenio')\n   *\n   * // Disable a plugin by namespace\n   * analytics.plugins.disable('google-analytics')\n   */\n\n\n  var plugins = objectSpread2({\n    /**\n     * Enable analytics plugin\n     * @typedef {Function} EnablePlugin\n     * @param  {String|Array} plugins - name of plugins(s) to disable\n     * @param  {Function} [callback] - callback after enable runs\n     * @returns {Promise}\n     * @example\n     *\n     * analytics.plugins.enable('google-analytics').then(() => {\n     *   console.log('do stuff')\n     * })\n     *\n     * // Enable multiple plugins at once\n     * analytics.plugins.enable(['google-analytics', 'segment']).then(() => {\n     *   console.log('do stuff')\n     * })\n     */\n    enable: function enable(plugins, callback) {\n      return new Promise(function (resolve) {\n        store.dispatch({\n          type: EVENTS.enablePlugin,\n          plugins: ensureArray(plugins),\n          _: {\n            originalAction: EVENTS.enablePlugin\n          }\n        }, resolve, [callback]);\n      });\n    },\n\n    /**\n     * Disable analytics plugin\n     * @typedef {Function} DisablePlugin\n     * @param  {String|Array} plugins - name of integration(s) to disable\n     * @param  {Function} callback - callback after disable runs\n     * @returns {Promise}\n     * @example\n     *\n     * analytics.plugins.disable('google').then(() => {\n     *   console.log('do stuff')\n     * })\n     *\n     * analytics.plugins.disable(['google', 'segment']).then(() => {\n     *   console.log('do stuff')\n     * })\n     */\n    disable: function disable(plugins, callback) {\n      return new Promise(function (resolve) {\n        store.dispatch({\n          type: EVENTS.disablePlugin,\n          plugins: ensureArray(plugins),\n          _: {\n            originalAction: EVENTS.disablePlugin\n          }\n        }, resolve, [callback]);\n      });\n    }\n  }, parsedOptions.methods);\n  /**\n   * Analytic instance returned from initialization\n   * @typedef {Object} AnalyticsInstance\n   * @property {Identify} identify - Identify a user\n   * @property {Track} track - Track an analytics event\n   * @property {Page} page - Trigger page view\n   * @property {User} user - Get user data\n   * @property {Reset} reset - Clear information about user & reset analytics\n   * @property {Ready} ready - Fire callback on analytics ready event\n   * @property {On} on - Fire callback on analytics lifecycle events.\n   * @property {Once} once - Fire callback on analytics lifecycle events once.\n   * @property {GetState} getState - Get data about user, activity, or context.\n   * @property {Storage} storage - storage methods\n   * @property {Plugins} plugins - plugin methods\n   */\n\n\n  var instance = {\n    /**\n    * Identify a user. This will trigger `identify` calls in any installed plugins and will set user data in localStorage\n    * @typedef {Function} Identify\n    * @param  {String}   userId  - Unique ID of user\n    * @param  {Object}   [traits]  - Object of user traits\n    * @param  {Object}   [options] - Options to pass to identify call\n    * @param  {Function} [callback] - Callback function after identify completes\n    * @returns {Promise}\n    * @api public\n    *\n    * @example\n    *\n    * // Basic user id identify\n    * analytics.identify('xyz-123')\n    *\n    * // Identify with additional traits\n    * analytics.identify('xyz-123', {\n    *   name: 'steve',\n    *   company: 'hello-clicky'\n    * })\n    *\n    * // Fire callback with 2nd or 3rd argument\n    * analytics.identify('xyz-123', () => {\n    *   console.log('do this after identify')\n    * })\n    *\n    * // Disable sending user data to specific analytic tools\n    * analytics.identify('xyz-123', {}, {\n    *   plugins: {\n    *     // disable sending this identify call to segment\n    *     segment: false\n    *   }\n    * })\n    *\n    * // Send user data to only to specific analytic tools\n    * analytics.identify('xyz-123', {}, {\n    *   plugins: {\n    *     // disable this specific identify in all plugins except customerio\n    *     all: false,\n    *     customerio: true\n    *   }\n    * })\n    */\n    identify: function () {\n      var _identify = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee(userId, traits, options, callback) {\n        var id, data, opts, user, resolvedId;\n        return regenerator.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                id = isString(userId) ? userId : null;\n                data = isObject(userId) ? userId : traits;\n                opts = options || {};\n                user = instance.user();\n                /* sets temporary in memory id. Not to be relied on */\n\n                globalContext[tempKey(ID)] = id;\n                resolvedId = id || data.userId || getUserProp(ID, instance, data);\n                return _context.abrupt(\"return\", new Promise(function (resolve) {\n                  store.dispatch(objectSpread2({\n                    type: EVENTS.identifyStart,\n                    userId: resolvedId,\n                    traits: data || {},\n                    options: opts,\n                    anonymousId: user.anonymousId\n                  }, user.id && user.id !== id && {\n                    previousId: user.id\n                  }), resolve, [traits, options, callback]);\n                }));\n\n              case 7:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee);\n      }));\n\n      function identify(_x, _x2, _x3, _x4) {\n        return _identify.apply(this, arguments);\n      }\n\n      return identify;\n    }(),\n\n    /**\n     * Track an analytics event. This will trigger `track` calls in any installed plugins\n     * @typedef {Function} Track\n     * @param  {String}   eventName - Event name\n     * @param  {Object}   [payload]   - Event payload\n     * @param  {Object}   [options]   - Event options\n     * @param  {Function} [callback]  - Callback to fire after tracking completes\n     * @returns {Promise}\n     * @api public\n     *\n     * @example\n     *\n     * // Basic event tracking\n     * analytics.track('buttonClicked')\n     *\n     * // Event tracking with payload\n     * analytics.track('itemPurchased', {\n     *   price: 11,\n     *   sku: '1234'\n     * })\n     *\n     * // Fire callback with 2nd or 3rd argument\n     * analytics.track('newsletterSubscribed', () => {\n     *   console.log('do this after track')\n     * })\n     *\n     * // Disable sending this event to specific analytic tools\n     * analytics.track('cartAbandoned', {\n     *   items: ['xyz', 'abc']\n     * }, {\n     *   plugins: {\n     *     // disable track event for segment\n     *     segment: false\n     *   }\n     * })\n     *\n     * // Send event to only to specific analytic tools\n     * analytics.track('customerIoOnlyEventExample', {\n     *   price: 11,\n     *   sku: '1234'\n     * }, {\n     *   plugins: {\n     *     // disable this specific track call all plugins except customerio\n     *     all: false,\n     *     customerio: true\n     *   }\n     * })\n     */\n    track: function () {\n      var _track = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee2(eventName, payload, options, callback) {\n        var name, data, opts;\n        return regenerator.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                name = isObject(eventName) ? eventName.event : eventName;\n\n                if (!(!name || !isString(name))) {\n                  _context2.next = 3;\n                  break;\n                }\n\n                throw new Error('EventMissing');\n\n              case 3:\n                data = isObject(eventName) ? eventName : payload || {};\n                opts = isObject(options) ? options : {};\n                return _context2.abrupt(\"return\", new Promise(function (resolve) {\n                  store.dispatch({\n                    type: EVENTS.trackStart,\n                    event: name,\n                    properties: data,\n                    options: opts,\n                    userId: getUserProp(ID, instance, payload),\n                    anonymousId: getUserProp(ANONID, instance, payload)\n                  }, resolve, [payload, options, callback]);\n                }));\n\n              case 6:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2);\n      }));\n\n      function track(_x5, _x6, _x7, _x8) {\n        return _track.apply(this, arguments);\n      }\n\n      return track;\n    }(),\n\n    /**\n     * Trigger page view. This will trigger `page` calls in any installed plugins\n     * @typedef {Function} Page\n     * @param  {PageData} [data] - Page data overrides.\n     * @param  {Object}   [options] - Page tracking options\n     * @param  {Function} [callback] - Callback to fire after page view call completes\n     * @returns {Promise}\n     * @api public\n     *\n     * @example\n     *\n     * // Basic page tracking\n     * analytics.page()\n     *\n     * // Page tracking with page data overrides\n     * analytics.page({\n     *   url: 'https://google.com'\n     * })\n     *\n     * // Fire callback with 1st, 2nd or 3rd argument\n     * analytics.page(() => {\n     *   console.log('do this after page')\n     * })\n     *\n     * // Disable sending this pageview to specific analytic tools\n     * analytics.page({}, {\n     *   plugins: {\n     *     // disable page tracking event for segment\n     *     segment: false\n     *   }\n     * })\n     *\n     * // Send pageview to only to specific analytic tools\n     * analytics.page({}, {\n     *   plugins: {\n     *     // disable this specific page in all plugins except customerio\n     *     all: false,\n     *     customerio: true\n     *   }\n     * })\n     */\n    page: function () {\n      var _page = asyncToGenerator(\n      /*#__PURE__*/\n      regenerator.mark(function _callee3(data, options, callback) {\n        var d, opts;\n        return regenerator.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                d = isObject(data) ? data : {};\n                opts = isObject(options) ? options : {};\n                /*\n                // @TODO add custom value reolvers for userId and anonId\n                if (resolvers.getUserId) {\n                  const asyncUserId = await resolvers.getUserId()\n                  console.log('x', x)\n                }\n                */\n\n                return _context3.abrupt(\"return\", new Promise(function (resolve, reject) {\n                  store.dispatch({\n                    type: EVENTS.pageStart,\n                    properties: getPageData(d),\n                    options: opts,\n                    userId: getUserProp(ID, instance, d),\n                    anonymousId: getUserProp(ANONID, instance, d)\n                  }, resolve, [data, options, callback]);\n                }));\n\n              case 3:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function page$$1(_x9, _x10, _x11) {\n        return _page.apply(this, arguments);\n      }\n\n      return page$$1;\n    }(),\n\n    /**\n     * Get user data\n     * @typedef {Function} User\n     * @param {string} [key] - dot.prop.path of user data. Example: 'traits.company.name'\n     * @returns {string|object} value of user data or null\n     *\n     * @example\n     *\n     * // Get all user data\n     * const userData = analytics.user()\n     *\n     * // Get user id\n     * const userId = analytics.user('userId')\n     *\n     * // Get user company name\n     * const companyName = analytics.user('traits.company.name')\n     */\n    user: function user(key) {\n      if (key === ID || key === 'id') {\n        return getUserProp(ID, instance);\n      }\n\n      if (key === ANONID || key === 'anonId') {\n        return getUserProp(ANONID, instance);\n      }\n\n      var user = instance.getState('user');\n      if (!key) return user;\n      return dotProp(user, key);\n    },\n\n    /**\n     * Clear all information about the visitor & reset analytic state.\n     * @typedef {Function} Reset\n     * @param {Function} [callback] - Handler to run after reset\n     * @returns {Promise}\n     * @example\n     *\n     * // Reset current visitor\n     * analytics.reset()\n     */\n    reset: function reset(callback) {\n      return new Promise(function (resolve, reject) {\n        store.dispatch({\n          type: EVENTS.resetStart\n        }, resolve, callback);\n      });\n    },\n\n    /**\n     * Fire callback on analytics ready event\n     * @typedef {Function} Ready\n     * @param  {Function} callback - function to trigger when all providers have loaded\n     * @returns {DetachListeners} - Function to detach listener\n     *\n     * @example\n     *\n     * analytics.ready() => {\n     *   console.log('all plugins have loaded or were skipped', payload)\n     * })\n     */\n    ready: function ready(callback) {\n      return instance.on(EVENTS.ready, callback);\n    },\n\n    /**\n     * Attach an event handler function for analytics lifecycle events.\n     * @typedef {Function} On\n     * @param  {String}   name - Name of event to listen to\n     * @param  {Function} callback - function to fire on event\n     * @return {DetachListeners} - Function to detach listener\n     *\n     * @example\n     *\n     * // Fire function when 'track' calls happen\n     * analytics.on('track', ({ payload }) => {\n     *   console.log('track call just happened. Do stuff')\n     * })\n     *\n     * // Remove listener before it is called\n     * const removeListener = analytics.on('track', ({ payload }) => {\n     *   console.log('This will never get called')\n     * })\n     *\n     * // cleanup .on listener\n     * removeListener()\n     */\n    on: function on(name, callback) {\n      if (!name || !isFunction(callback)) {\n        return false;\n      }\n\n      if (name === EVENTS.bootstrap) {\n        throw new Error('.on disabled for ' + name);\n      }\n\n      var startRegex = /Start$|Start:/;\n\n      if (name === '*') {\n        var beforeHandler = function beforeHandler(store) {\n          return function (next) {\n            return function (action) {\n              if (action.type.match(startRegex)) {\n                callback({\n                  // eslint-disable-line\n                  payload: action,\n                  instance: instance,\n                  plugins: customPlugins\n                });\n              }\n\n              return next(action);\n            };\n          };\n        };\n\n        var afterHandler = function afterHandler(store) {\n          return function (next) {\n            return function (action) {\n              if (!action.type.match(startRegex)) {\n                callback({\n                  // eslint-disable-line\n                  payload: action,\n                  instance: instance,\n                  plugins: customPlugins\n                });\n              }\n\n              return next(action);\n            };\n          };\n        };\n\n        addMiddleware(beforeHandler, before);\n        addMiddleware(afterHandler, after);\n        /**\n         * Detach listeners\n         * @typedef {Function} DetachListeners\n         */\n\n        return function () {\n          removeMiddleware(beforeHandler, before);\n          removeMiddleware(afterHandler, after);\n        };\n      }\n\n      var position = name.match(startRegex) ? before : after; // eslint-disable-line\n\n      var handler = function handler(store) {\n        return function (next) {\n          return function (action) {\n            // Subscribe to EVERYTHING\n            if (action.type === name) {\n              callback({\n                // eslint-disable-line\n                payload: action,\n                instance: instance,\n                plugins: customPlugins,\n                abort: nonAbortable\n              });\n            }\n            /* For future matching of event subpaths `track:*` etc\n            } else if (name.match(/\\*$/)) {\n              const match = (name === '*') ? '.' : name\n              const regex = new RegExp(`${match}`, 'g')\n            } */\n\n\n            return next(action);\n          };\n        };\n      };\n\n      addMiddleware(handler, position);\n      return function () {\n        return removeMiddleware(handler, position);\n      };\n    },\n\n    /**\n     * Attach a handler function to an event and only trigger it only once.\n     * @typedef {Function} Once\n     * @param  {String} name - Name of event to listen to\n     * @param  {Function} callback - function to fire on event\n     * @return {DetachListeners} - Function to detach listener\n     *\n     * @example\n     *\n     * // Fire function only once 'track'\n     * analytics.once('track', ({ payload }) => {\n     *   console.log('This will only triggered once when analytics.track() fires')\n     * })\n     *\n     * // Remove listener before it is called\n     * const listener = analytics.once('track', ({ payload }) => {\n     *   console.log('This will never get called b/c listener() is called')\n     * })\n     *\n     * // cleanup .once listener before it fires\n     * listener()\n     */\n    once: function once(name, callback) {\n      if (!name || !isFunction(callback)) {\n        return false;\n      }\n\n      if (name === EVENTS.bootstrap) {\n        throw new Error('.once disabled for ' + name);\n      }\n\n      var detachListener = instance.on(name, function (_ref2) {\n        var payload = _ref2.payload;\n        callback({\n          // eslint-disable-line\n          payload: payload,\n          instance: instance,\n          plugins: customPlugins,\n          abort: nonAbortable\n        }); // detach listener after its called once\n\n        detachListener();\n      });\n      return detachListener;\n    },\n\n    /**\n     * Get data about user, activity, or context. Access sub-keys of state with `dot.prop` syntax.\n     * @typedef {Function} GetState\n     * @param  {string} [key] - dot.prop.path value of state\n     * @return {any}\n     *\n     * @example\n     *\n     * // Get the current state of analytics\n     * analytics.getState()\n     *\n     * // Get a subpath of state\n     * analytics.getState('context.offline')\n     */\n    getState: function getState(key) {\n      var state = store.getState();\n      if (key) return dotProp(state, key);\n      return Object.assign({}, state);\n    },\n\n    /*\n     * Emit events for other plugins or middleware to react to.\n     * @param  {Object} action - event to dispatch\n     */\n    dispatch: function dispatch(action) {\n      var actionData = isString(action) ? {\n        type: action\n      } : action;\n\n      if (isReservedAction(actionData.type)) {\n        throw new Error('reserved action ' + actionData.type);\n      }\n\n      var _private = action._ || {}; // Dispatch actionStart\n      // const autoPrefixType = `${actionData.type.replace(/Start$/, '')}Start`\n\n\n      var dispatchData = objectSpread2(objectSpread2({}, actionData), {}, {\n        _: objectSpread2({\n          originalAction: actionData.type\n        }, _private) // type: `${autoPrefixType}`\n\n      });\n\n      store.dispatch(dispatchData);\n    },\n    // Do not use. Will be removed. Here for Backwards compatiblity.\n    // Moved to analytics.plugins.enable\n    enablePlugin: plugins.enable,\n    /// Do not use. Will be removed. Here for Backwards compatiblity.\n    /// Moved to analytics.plugins.disable\n    disablePlugin: plugins.disable,\n    // Do not use. Will be removed. Here for Backwards compatiblity.\n    // New plugins api\n    plugins: plugins,\n\n    /**\n     * Storage utilities for persisting data.\n     * These methods will allow you to save data in localStorage, cookies, or to the window.\n     * @typedef {Object} Storage\n     * @property {GetItem} getItem - Get value from storage\n     * @property {SetItem} setItem - Set storage value\n     * @property {RemoveItem} removeItem - Remove storage value\n     *\n     * @example\n     *\n     * // Pull storage off analytics instance\n     * const { storage } = analytics\n     *\n     * // Get value\n     * storage.getItem('storage_key')\n     *\n     * // Set value\n     * storage.setItem('storage_key', 'value')\n     *\n     * // Remove value\n     * storage.removeItem('storage_key')\n     */\n    storage: {\n      /**\n       * Get value from storage\n       * @typedef {Function} GetItem\n       * @param {String} key - storage key\n       * @param {Object} [options] - storage options\n       * @return {Any}\n       *\n       * @example\n       *\n       * analytics.storage.getItem('storage_key')\n       */\n      getItem: storage.getItem,\n\n      /**\n       * Set storage value\n       * @typedef {Function} SetItem\n       * @param {String} key - storage key\n       * @param {any} value - storage value\n       * @param {Object} [options] - storage options\n       *\n       * @example\n       *\n       * analytics.storage.setItem('storage_key', 'value')\n       */\n      setItem: function setItem(key, value, options) {\n        store.dispatch({\n          type: EVENTS.setItemStart,\n          key: key,\n          value: value,\n          options: options\n        });\n      },\n\n      /**\n       * Remove storage value\n       * @typedef {Function} RemoveItem\n       * @param {String} key - storage key\n       * @param {Object} [options] - storage options\n       *\n       * @example\n       *\n       * analytics.storage.removeItem('storage_key')\n       */\n      removeItem: function removeItem(key, options) {\n        store.dispatch({\n          type: EVENTS.removeItemStart,\n          key: key,\n          options: options\n        });\n      }\n    },\n\n    /*\n     * Set the anonymous ID of the visitor\n     * @param {String} anonymousId - anonymous Id to set\n     * @param {Object} [options] - storage options\n     *\n     * @example\n     *\n     * // Set anonymous ID\n     * analytics.setAnonymousId('1234567')\n     */\n    setAnonymousId: function setAnonymousId(anonymousId, options) {\n      /* sets temporary in memory id. Not to be relied on */\n      // globalContext[tempKey(ANONID)] = anonymousId\n      instance.storage.setItem(ANON_ID, anonymousId, options);\n    },\n\n    /*\n     * Events exposed by core analytics library and all loaded plugins\n     * @type {Array}\n     */\n    events: {\n      all: allSystemEvents,\n      core: coreEvents,\n      plugins: allPluginEvents // byType: (type) => {} @Todo grab logic from engine and give inspectable events\n\n    }\n  };\n\n  var enrichMiddleware = function enrichMiddleware(storeAPI) {\n    return function (next) {\n      return function (action) {\n        if (!action.meta) {\n          action.meta = generateMeta();\n        }\n\n        return next(action);\n      };\n    };\n  };\n\n  var middlewares = parsedOptions.middlewares.concat([enrichMiddleware,\n  /* Core analytics middleware */\n  dynamicMiddlewares(before), // Before dynamic middleware <-- fixed pageStart .on listener\n\n  /* Plugin engine */\n  pluginMiddleware(instance, getPlugins, {\n    all: allSystemEvents,\n    plugins: allPluginEvents\n  }), storageMiddleware(storage), initializeMiddleware(instance), identifyMiddleware(instance, storage),\n  /* after dynamic middleware */\n  dynamicMiddlewares(after)]);\n  /* Initial analytics state keys */\n\n  var coreReducers = {\n    context: context,\n    user: userReducer(storage),\n    page: page,\n    track: trackReducer,\n    plugins: createReducer(getPlugins),\n    queue: queueReducer\n  };\n  var composeEnhancers = compose;\n  var composeWithGlobalDebug = compose;\n\n  if (inBrowser && config.debug) {\n    var devTools = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__;\n\n    if (devTools) {\n      composeEnhancers = devTools({\n        trace: true,\n        traceLimit: 25\n      });\n    }\n\n    composeWithGlobalDebug = function composeWithGlobalDebug() {\n      if (arguments.length === 0) return Debug();\n      if (isObject(_typeof_1(arguments[0]))) return composeWithDebug(arguments[0]);\n      return composeWithDebug().apply(null, arguments);\n    };\n  }\n\n  var initialConfig = makeContext(config);\n  var intialPluginState = parsedOptions.pluginsArray.reduce(function (acc, plugin) {\n    var name = plugin.name,\n        config = plugin.config,\n        loaded = plugin.loaded;\n    var isEnabled = parsedOptions.pluginEnabled[name];\n    acc[name] = {\n      enabled: isEnabled,\n      // If plugin enabled & has no initialize method, set initialized to true, else false\n      initialized: isEnabled ? Boolean(!plugin.initialize) : false,\n      loaded: Boolean(loaded()),\n      config: config || {}\n    };\n    return acc;\n  }, {});\n  var initialState = {\n    context: initialConfig,\n    user: visitorInfo,\n    plugins: intialPluginState // Todo allow for more userland defined initial state?\n\n    /* Create analytics store! */\n\n  };\n  var store = createStore( // register reducers\n  combineReducers(objectSpread2(objectSpread2({}, coreReducers), customReducers)), // set user defined initial state\n  initialState, // register middleware & plugins used\n  composeWithGlobalDebug(composeEnhancers(applyMiddleware.apply(void 0, toConsumableArray(middlewares)))));\n\n  function enhanceDispatch(fn) {\n    return function (event, resolver, callbacks) {\n      // console.log('original event', event)\n      var meta = generateMeta(event.meta, resolver, ensureArray(callbacks)); // if (resolver) console.log('dispatch resolver', resolver)\n      // if (callbacks) console.log('dispatch callbacks', callbacks)\n\n      var newEvent = objectSpread2(objectSpread2({}, event), {\n        meta: meta\n      }); // console.log('newEvent', newEvent)\n\n\n      return fn.apply(null, [newEvent]);\n    };\n  } // Automatically apply meta to dispatch calls\n\n\n  store.dispatch = enhanceDispatch(store.dispatch);\n  /* Synchronously call bootstrap & register Plugin methods */\n\n  var pluginKeys = Object.keys(customPlugins);\n  /* Bootstrap analytic plugins */\n\n  store.dispatch({\n    type: EVENTS.bootstrap,\n    plugins: pluginKeys,\n    config: initialConfig,\n    params: params,\n    user: visitorInfo,\n    persistedUser: persistedUser\n  });\n  var enabledPlugins = pluginKeys.filter(function (name) {\n    return parsedOptions.pluginEnabled[name];\n  });\n  var disabledPlugins = pluginKeys.filter(function (name) {\n    return !parsedOptions.pluginEnabled[name];\n  });\n  /* Register analytic plugins */\n\n  store.dispatch({\n    type: EVENTS.registerPlugins,\n    plugins: pluginKeys,\n    enabled: parsedOptions.pluginEnabled\n  });\n  /* dispatch register for individual plugins */\n\n  parsedOptions.pluginsArray.map(function (plugin, i) {\n    var bootstrap = plugin.bootstrap,\n        config = plugin.config,\n        name = plugin.name;\n\n    if (bootstrap && isFunction(bootstrap)) {\n      bootstrap({\n        instance: instance,\n        config: config,\n        payload: plugin\n      });\n    }\n    /* Register plugins */\n\n\n    store.dispatch({\n      type: EVENTS.registerPluginType(name),\n      name: name,\n      enabled: parsedOptions.pluginEnabled[name],\n      plugin: plugin\n    });\n    /* All plugins registered initialize, is last loop */\n\n    if (parsedOptions.pluginsArray.length === i + 1) {\n      store.dispatch({\n        type: EVENTS.initializeStart,\n        plugins: enabledPlugins,\n        disabled: disabledPlugins\n      });\n    }\n  });\n\n  {\n    /* Watch for network events */\n    watch(function (offline) {\n      store.dispatch({\n        type: offline ? EVENTS.offline : EVENTS.online\n      });\n    });\n    /* Tick heartbeat for queued events */\n\n    heartBeat(store, getPlugins, instance);\n  }\n\n  function appendArguments(fn) {\n    return function () {\n      var originalArgs = Array.prototype.slice.call(arguments); // Pass analytics instance as last arg for arrow functions\n\n      var argsToPass = Array.apply(null, Array(fn.length)).map(function () {}).map(function (x, i) {\n        if (originalArgs[i] || originalArgs[i] === false || originalArgs[i] === null) {\n          return originalArgs[i];\n        }\n      }) // Add instance to args\n      .concat(instance); // Set instance on extended methods\n\n      return fn.apply({\n        instance: instance\n      }, argsToPass);\n    };\n  }\n  /* Return analytics instance */\n\n\n  return instance;\n} // Duplicated strings\n\n\nvar before = 'before';\nvar after = 'after';\n\nexport default analytics;\nexport { analytics as init, analytics as Analytics, EVENTS, constants as CONSTANTS };\n","import analytics from '@analytics/core';\nexport { EVENTS, CONSTANTS } from '@analytics/core';\nimport storage from '@analytics/storage-utils';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar defineProperty = _defineProperty;\n\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n\n  return keys;\n}\n\nfunction _objectSpread2(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n\n    if (i % 2) {\n      ownKeys(source, true).forEach(function (key) {\n        defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(source).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n\n  return target;\n}\n\nvar objectSpread2 = _objectSpread2;\n\nfunction analyticsLib() {\n  var opts = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var defaultSettings = {\n    storage: storage\n  };\n  return analytics(objectSpread2(objectSpread2({}, defaultSettings), opts));\n}\n\nexport default analyticsLib;\nexport { analyticsLib as init, analyticsLib as Analytics };\n","// shim for using process in browser\nvar process = module.exports = {};\n\n// cached from whatever global is present so that test runners that stub it\n// don't break things.  But we need to wrap it in a try catch in case it is\n// wrapped in strict mode code which doesn't define any globals.  It's inside a\n// function because try/catches deoptimize in certain engines.\n\nvar cachedSetTimeout;\nvar cachedClearTimeout;\n\nfunction defaultSetTimout() {\n    throw new Error('setTimeout has not been defined');\n}\nfunction defaultClearTimeout () {\n    throw new Error('clearTimeout has not been defined');\n}\n(function () {\n    try {\n        if (typeof setTimeout === 'function') {\n            cachedSetTimeout = setTimeout;\n        } else {\n            cachedSetTimeout = defaultSetTimout;\n        }\n    } catch (e) {\n        cachedSetTimeout = defaultSetTimout;\n    }\n    try {\n        if (typeof clearTimeout === 'function') {\n            cachedClearTimeout = clearTimeout;\n        } else {\n            cachedClearTimeout = defaultClearTimeout;\n        }\n    } catch (e) {\n        cachedClearTimeout = defaultClearTimeout;\n    }\n} ())\nfunction runTimeout(fun) {\n    if (cachedSetTimeout === setTimeout) {\n        //normal enviroments in sane situations\n        return setTimeout(fun, 0);\n    }\n    // if setTimeout wasn't available but was latter defined\n    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {\n        cachedSetTimeout = setTimeout;\n        return setTimeout(fun, 0);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedSetTimeout(fun, 0);\n    } catch(e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally\n            return cachedSetTimeout.call(null, fun, 0);\n        } catch(e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error\n            return cachedSetTimeout.call(this, fun, 0);\n        }\n    }\n\n\n}\nfunction runClearTimeout(marker) {\n    if (cachedClearTimeout === clearTimeout) {\n        //normal enviroments in sane situations\n        return clearTimeout(marker);\n    }\n    // if clearTimeout wasn't available but was latter defined\n    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {\n        cachedClearTimeout = clearTimeout;\n        return clearTimeout(marker);\n    }\n    try {\n        // when when somebody has screwed with setTimeout but no I.E. maddness\n        return cachedClearTimeout(marker);\n    } catch (e){\n        try {\n            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally\n            return cachedClearTimeout.call(null, marker);\n        } catch (e){\n            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.\n            // Some versions of I.E. have different rules for clearTimeout vs setTimeout\n            return cachedClearTimeout.call(this, marker);\n        }\n    }\n\n\n\n}\nvar queue = [];\nvar draining = false;\nvar currentQueue;\nvar queueIndex = -1;\n\nfunction cleanUpNextTick() {\n    if (!draining || !currentQueue) {\n        return;\n    }\n    draining = false;\n    if (currentQueue.length) {\n        queue = currentQueue.concat(queue);\n    } else {\n        queueIndex = -1;\n    }\n    if (queue.length) {\n        drainQueue();\n    }\n}\n\nfunction drainQueue() {\n    if (draining) {\n        return;\n    }\n    var timeout = runTimeout(cleanUpNextTick);\n    draining = true;\n\n    var len = queue.length;\n    while(len) {\n        currentQueue = queue;\n        queue = [];\n        while (++queueIndex < len) {\n            if (currentQueue) {\n                currentQueue[queueIndex].run();\n            }\n        }\n        queueIndex = -1;\n        len = queue.length;\n    }\n    currentQueue = null;\n    draining = false;\n    runClearTimeout(timeout);\n}\n\nprocess.nextTick = function (fun) {\n    var args = new Array(arguments.length - 1);\n    if (arguments.length > 1) {\n        for (var i = 1; i < arguments.length; i++) {\n            args[i - 1] = arguments[i];\n        }\n    }\n    queue.push(new Item(fun, args));\n    if (queue.length === 1 && !draining) {\n        runTimeout(drainQueue);\n    }\n};\n\n// v8 likes predictible objects\nfunction Item(fun, array) {\n    this.fun = fun;\n    this.array = array;\n}\nItem.prototype.run = function () {\n    this.fun.apply(null, this.array);\n};\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\nprocess.version = ''; // empty string to avoid regexp issues\nprocess.versions = {};\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\nprocess.prependListener = noop;\nprocess.prependOnceListener = noop;\n\nprocess.listeners = function (name) { return [] }\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\nprocess.umask = function() { return 0; };\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","const createQueryBuilder = require('../builder-sq')\nconst createExpressionBuilder = require('../builder-expression')\nconst { memoize, normalKey } = require('../lib-util')\n\n\n/**\n * Creates a version of EasyQB for the given SQL dialect and database adapter.\n *\n * A dialect is variant of the SQL language,\n * while an adapter is the driver that communicates with the database.\n *\n * This design makes it easy to swap drivers, e.g. mysql vs mysql2 or\n * add new databases just by connecting a new adapter to an existing dialect.\n *\n */\n\nconst createSqorn = ({ dialect }) => (config = {}) => {\n  const { query, expression, parameterize, escape } = dialect\n\n  // 1. Create default context properties passed through build tree\n  const mapKey = memoize(normalKey)\n  const defaultContext = { parameterize, escape, mapKey, build }\n\n  // 2. Create Expression Builder\n  const e = createExpressionBuilder({ defaultContext, expression })\n\n  // 3. Create Query Builder\n  const sq = createQueryBuilder({ defaultContext, query, e, config })\n\n  // 4. TODO: Build Executor, Attach e and execute functions\n\n  // 5. TODO: Return { sq, e, transaction, db }\n  return sq\n}\n\nfunction build(arg) {\n  if (arg === undefined) throw Error('Error: undefined argument')\n  if (typeof arg === 'function') {\n    if (arg._build) {\n      const { type, text } = arg._build(this)\n      if (type === 'expression') return text\n      if (type === 'fragment') return text\n      return `(${text})`\n    }\n    return arg(this)\n  }\n  return this.unparameterized ? this.escape(arg) : this.parameterize(arg)\n}\n\nmodule.exports = createSqorn","const createNewContext = require('./context')\nconst createQueryBuilder = ({ defaultContext, query, e, config }) => {\n    const { queries, methods, properties } = query\n    const newContext = createNewContext(defaultContext)\n    const reducers = createReducers(methods)\n    const updateContext = applyReducers(reducers)\n    reducers.extend = (ctx, args) => {\n        const arr = Array.isArray(args[0]) ? args[0] : args\n        for (let i = 0; i < arr.length; ++i) {\n            updateContext(arr[i].method, ctx)\n        }\n    }\n    const builder = () => { } // must not be object literal\n    const chain = createChain(builder)\n\n    const executeProperties = {\n        one: {\n            value: async function () {\n                const ret = await config.oneCallback(this.query, config.tableName, config.userAssociatedRecordsOnly)\n                return ret;\n            }\n        },\n        all: {\n            value: async function () {\n                const ret = await config.allCallback(this.query, config.tableName, config.userAssociatedRecordsOnly)\n                return ret;\n            }\n        },\n        _tableName: {\n            get: function () {\n                return config.tableName\n            }\n        }\n    }\n\n    // EasyQB no access to from\n    const _methodProperties = methodProperties({ methods, chain });\n    delete _methodProperties.from;\n\n    Object.defineProperties(builder, {\n        ...builderProperties({ chain, newContext, updateContext, queries }),\n        ..._methodProperties,\n        ...executeProperties,\n        ...properties,\n        e: {\n            value: e\n        }\n    })\n    return chain()\n}\n\n/** Creates a new builder instance */\nconst createChain = prototype => {\n    const chain = method => {\n        const fn = (...args) => chain({ name: 'express', args, prev: method })\n        fn.method = method\n        Object.setPrototypeOf(fn, prototype)\n        return fn\n    }\n    return chain\n}\n\n/** Creates an object containing all method reducers */\nconst createReducers = methods => {\n    const reducers = {}\n    for (const name in methods) {\n        const { updateContext, properties = {} } = methods[name]\n        reducers[name] = updateContext\n        // some methods have subproperties, e.g. .unionAll\n        for (const key in properties) {\n            reducers[`${name}.${key}`] = properties[key]\n        }\n    }\n    return reducers\n}\n\n/** Follows a method chain, applying each method's reducer, to ctx */\nconst applyReducers = reducers => (method, ctx) => {\n    // follow method links to construct methods array (in reverse)\n    const methods = []\n    for (; method !== undefined; method = method.prev) {\n        methods.push(method)\n    }\n    // build methods object by processing methods in call order\n    const express = { id: 0 }\n    for (let i = methods.length - 1; i >= 0; --i) {\n        const method = methods[i]\n        reducers[method.name](ctx, method.args, express)\n    }\n    return ctx\n}\n\n/** Default properties of all SQL Query Builders */\nconst builderProperties = ({ newContext, updateContext, queries }) => ({\n    _build: {\n        value: function (inheritedContext) {\n            const ctx = updateContext(this.method, newContext(inheritedContext))\n            return queries[ctx.type](ctx)\n        }\n    },\n    query: {\n        get: function () {\n            return this._build()\n        }\n    },\n    unparameterized: {\n        get: function () {\n            return this._build({ unparameterized: true }).text\n        }\n    }\n})\n\n/** Builds object containing a property for every query building method */\nconst methodProperties = ({ methods, chain }) => {\n    const properties = {}\n    for (const name in methods) {\n        const { getter } = methods[name]\n        if (getter) {\n            // add getter methods\n            properties[name] = {\n                get: function () {\n                    return chain({ name, prev: this.method })\n                }\n            }\n        } else {\n            // add function call methods\n            properties[name] = {\n                value: function (...args) {\n                    return chain({ name, args, prev: this.method })\n                }\n            }\n        }\n    }\n    return properties\n}\n\nmodule.exports = createQueryBuilder","/** Returns a function the creates a new context */\nconst createNewContext = defaultContext => {\n    const { parameterize, escape, mapKey, build } = defaultContext\n\n    return (inherit = {}) => {\n        const { params = [], unparameterized = false } = inherit\n\n        const whr = []\n        return {\n            // properties set by the EasyQB instance\n            parameterize,\n            escape,\n            mapKey,\n            build,\n\n            // properties inherited from the parent query\n            params,\n            unparameterized,\n\n            // properties of the current query\n            type: 'select',\n            // | sql' | 'select' | 'delete' | 'insert' | 'update'\n            target: whr,\n            join: undefined,\n            separator: ' ',\n            sql: [],\n            ret: [],\n            frm: [],\n            whr,\n            grp: [],\n            hav: [],\n            setop: [],\n            ord: [],\n            with: [],\n            set: []\n\n            // properties that may be added dynamically:\n            // userType\n            // distinct\n        }\n    }\n}\n\nmodule.exports = createNewContext\n","const createExpressionCompiler = require('./compile')\nconst { normalKey } = require('../lib-util');\n\nconst aggregator = (op) => (columnName) => `${op}(${normalKey(columnName)})`;\n\nmodule.exports = ({ defaultContext, expression }) => {\n  const { expressions } = expression\n  const newContext = createNewContext(defaultContext)\n  const compile = createExpressionCompiler(expressions)\n  const builder = () => {} // must not be object literal\n  const chain = createChain(builder)\n  Object.defineProperties(builder, {\n    ...builderProperties({ compile, newContext }),\n    ...methodProperties({ expressions, chain }),\n  })\n  const ret = chain();\n  ret.max = aggregator('max');\n  ret.min = aggregator('min');\n  ret.avg = aggregator('avg');\n  ret.count = aggregator('count');\n  ret.sum = aggregator('sum');\n  return ret;\n}\n\nconst builderProperties = ({ compile, newContext }) => ({\n  _build: {\n    value: function(inherit) {\n      return compile(newContext(inherit), this.current)\n    }\n  },\n  query: {\n    get: function() {\n      return this._build()\n    }\n  },\n  unparameterized: {\n    get: function() {\n      return this._build({ unparameterized: true }).text\n    }\n  }\n})\n\nconst createNewContext = defaultContext => {\n  const { build, parameterize, escape, mapKey } = defaultContext\n  return inherit => {\n    const { params = [], unparameterized = false } = inherit || {}\n    return {\n      // EasyQB instance properties\n      build,\n      parameterize,\n      escape,\n      mapKey,\n\n      // inherited properties\n      params,\n      unparameterized\n    }\n  }\n}\n\nconst createChain = prototype => {\n  const chain = current => {\n    const fn = (...args) => chain({ prev: current, args })\n    fn.current = current\n    Object.setPrototypeOf(fn, prototype)\n    return fn\n  }\n  return chain\n}\n\nconst methodProperties = ({ expressions, chain }) => {\n  const properties = {}\n  for (const name in expressions) {\n    properties[name] = {\n      get: function() {\n        return chain({ prev: this.current, name })\n      }\n    }\n  }\n  return properties\n}\n","const { isTaggedTemplate } = require('../lib-util')\n\nconst createExpressionCompiler = expressionTable => {\n  const callsCompiler = createCallsCompiler(expressionTable)\n  return (ctx, current) => {\n    const calls = buildCalls(current)\n    const text = callsCompiler(ctx, calls)\n    return {\n      text,\n      args: ctx.params,\n      type: 'expression'\n    }\n  }\n}\n\n// TODO: Performance optimization:\n// inline expression building with this method so at most only one array\n// is allocated in total, no array of object containing arrays nonsense\nconst buildCalls = current => {\n  // get call nodes\n  const calls = []\n  for (; current; current = current.prev) calls.push(current)\n  if (calls.length === 0) throw Error('Error: Empty expression')\n\n  // build expression list\n  let expression = { name: 'arg', args: [] }\n  const expressions = [expression]\n  const last = calls.length - 1\n  for (let i = last; i >= 0; --i) {\n    const { name, args } = calls[i]\n    if (i === last) {\n      if (name) expression.name = name\n      else pushCall(expression.args, args)\n    } else {\n      if (name) expressions.push((expression = { name, args: [undefined] }))\n      else pushCall(expression.args, args)\n    }\n  }\n  return expressions\n}\n\nconst pushCall = (array, args) => {\n  if (isTaggedTemplate(args)) {\n    array.push({ tag: args })\n  } else {\n    if (args.length === 0)\n      throw Error('Error: Expression call requires at least one argument')\n    for (let i = 0; i < args.length; ++i) {\n      array.push({ arg: args[i] })\n    }\n  }\n}\n\nconst createCallsCompiler = expressionTable => (ctx, calls) => {\n  let exp\n  for (let i = 0; i < calls.length; ++i) {\n    const { name, args } = calls[i]\n    const { build, minArgs, maxArgs } = expressionTable[name]\n    if (i !== 0) args[0] = { exp }\n    const numArgs = args.length\n    if (numArgs < minArgs)\n      throw Error(`Error: ${name} requires at least ${minArgs} arguments`)\n    if (numArgs > maxArgs)\n      throw Error(`Error: ${name} accepts at most ${maxArgs} arguments`)\n    exp = build(ctx, args)\n  }\n  return exp\n}\n\nmodule.exports = createExpressionCompiler\n","const { isTaggedTemplate, buildTaggedTemplate } = require('./tagged_template')\n\nconst isObject = arg => arg && arg.constructor.prototype === Object.prototype\n\nconst buildCall = callbackfn => (ctx, args) =>\n  isTaggedTemplate(args)\n    ? buildTaggedTemplate(ctx, args)\n    : callbackfn(ctx, args)\n\nconst mapJoin = (callbackfn, separator = ', ') => (ctx, args) => {\n  let txt = ''\n  for (let i = 0; i < args.length; ++i) {\n    if (i !== 0) txt += separator\n    txt += callbackfn(ctx, args[i])\n  }\n  return txt\n}\n\nconst mapJoinWrap = (callbackfn, separator = ', ', open = '(', close = ')') => (\n  ctx,\n  args\n) => {\n  let txt = open\n  for (let i = 0; i < args.length; ++i) {\n    if (i !== 0) txt += separator\n    txt += callbackfn(ctx, args[i])\n  }\n  return txt + close\n}\n\nconst objectMapJoin = (callbackfn, separator = ', ') => (ctx, object) => {\n  let txt = ''\n  const keys = Object.keys(object)\n  for (let i = 0; i < keys.length; ++i) {\n    if (i !== 0) txt += separator\n    const key = keys[i]\n    txt += callbackfn(ctx, key, object[key])\n  }\n  return txt\n}\n\nmodule.exports = {\n  isObject,\n  buildCall,\n  mapJoin,\n  mapJoinWrap,\n  objectMapJoin\n}","// included to mitigate cost of case conversion\nconst memoize = fn => {\n  const cache = {}\n  return key => cache[key] || (cache[key] = fn(key))\n}\n\nconst normalKey = given_key => given_key.indexOf('(') === -1 ? given_key.toLowerCase().trim().replace(/ /g, '_') : given_key;\n\nmodule.exports = {\n  memoize,\n  normalKey\n}","const query = require('./query')\nconst expression = require('./expression')\nconst { parameterize, escape } = require('./parameterize')\n\nmodule.exports = {\n  query,\n  expression,\n  parameterize,\n  escape\n}","const { methods, queries, query, clauses, common } = require('../lib-sq')\n\nconst { fromItems, expressions } = common\nconst {\n  wth,\n  from,\n  where,\n  group,\n  having,\n  setop,\n  order,\n  limit,\n  offset,\n  returning,\n  set\n} = clauses\n\nconst postgresMethods = {\n  distinctOn: {\n    updateContext: (ctx, args) => {\n      if (ctx.distinct) {\n        ctx.distinct.push(args)\n      } else {\n        ctx.distinct = [args]\n      }\n    }\n  }\n}\n\n// SELECT supports .distinctOn(...expressions)\nconst select = ctx => {\n  let txt = 'select '\n  if (ctx.distinct) {\n    txt += 'distinct '\n    if (ctx.distinct.length) {\n      txt += `on (${expressions(ctx, ctx.distinct)}) `\n    }\n  }\n  txt += expressions(ctx, ctx.ret) || '*'\n  return txt\n}\n// DELETE: first .from call is used in the DELETE clause\n// subsequent .from calls are used in the USING clause\nconst del = ctx => {\n  const txt = fromItems(ctx, ctx.frm, 0, 1)\n  return txt && `delete from ${txt}`\n}\nconst using = ctx => {\n  const txt = fromItems(ctx, ctx.frm, 1)\n  return txt && `using ${txt}`\n}\n// UPDATE: first .from call is used in the UPDATE clause\n// subsequent .from calls are used in the FROM clause\nconst update = ctx => {\n  const txt = fromItems(ctx, ctx.frm, 0, 1)\n  return txt && `update ${txt}`\n}\nconst updateFrom = ctx => {\n  const txt = fromItems(ctx, ctx.frm, 1)\n  return txt && `from ${txt}`\n}\n\nmodule.exports = {\n  methods: { ...methods, ...postgresMethods },\n  queries: {\n    ...queries,\n    select: query(\n      wth,\n      select,\n      from,\n      where,\n      group,\n      having,\n      setop,\n      order,\n      limit,\n      offset\n    ),\n    delete: query(wth, del, using, where, returning),\n    update: query(wth, update, set, updateFrom, where, returning)\n  },\n  properties: {\n    rollup: {\n      value: (...args) => {\n        return {\n          type: 'rollup',\n          args\n        }\n      }\n    },\n    cube: {\n      value: (...args) => {\n        return {\n          type: 'cube',\n          args\n        }\n      }\n    },\n    groupingSets: {\n      value: (...args) => {\n        return {\n          type: 'grouping sets',\n          args\n        }\n      }\n    }\n  }\n}","const methods = require('./methods')\nconst { query, queries } = require('./query')\nconst clauses = require('./clauses')\nconst common = require('./common')\n\nmodule.exports = {\n  methods,\n  query,\n  queries,\n  clauses,\n  common\n}","const { normalKey } = require('../lib-util')\n\n/** Query building methods */\nconst methods = {\n    with: {\n        updateContext: (ctx, args) => {\n            ctx.with.push(args)\n        }\n    },\n    withRecursive: {\n        updateContext: (ctx, args) => {\n            ctx.recursive = true\n            ctx.with.push(args)\n        }\n    },\n    from: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push({ args, join: ', ' })\n        }\n    },\n    where: {\n        updateContext: (ctx, args) => {\n            ctx.whr.push(args)\n            ctx.target = ctx.whr\n        }\n    },\n    return: {\n        updateContext: (ctx, args) => {\n            ctx.ret.push(Array.isArray(args) ? args.map(normalKey) : args)\n        }\n    },\n    distinct: {\n        getter: true,\n        updateContext: ctx => {\n            ctx.distinct = []\n        }\n    },\n    groupBy: {\n        updateContext: (ctx, args) => {\n            ctx.grp.push(args)\n        }\n    },\n    having: {\n        updateContext: (ctx, args) => {\n            ctx.hav.push(args)\n            ctx.target = ctx.hav\n        }\n    },\n    union: {\n        updateContext: (ctx, args) => {\n            ctx.setop.push({ type: 'union', args })\n        }\n    },\n    unionAll: {\n        updateContext: (ctx, args) => {\n            ctx.setop.push({ type: 'union all', args })\n        }\n    },\n    intersect: {\n        updateContext: (ctx, args) => {\n            ctx.setop.push({ type: 'intersect', args })\n        }\n    },\n    intersectAll: {\n        updateContext: (ctx, args) => {\n            ctx.setop.push({ type: 'intersect all', args })\n        }\n    },\n    except: {\n        updateContext: (ctx, args) => {\n            ctx.setop.push({ type: 'except', args })\n        }\n    },\n    exceptAll: {\n        updateContext: (ctx, args) => {\n            ctx.setop.push({ type: 'except all', args })\n        }\n    },\n    orderBy: {\n        updateContext: (ctx, args) => {\n            ctx.ord.push(args)\n        }\n    },\n    limit: {\n        updateContext: (ctx, args) => {\n            ctx.limit = args\n        }\n    },\n    offset: {\n        updateContext: (ctx, args) => {\n            ctx.offset = args\n        }\n    },\n    join: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' join ' }))\n        }\n    },\n    leftJoin: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' left join ' }))\n        }\n    },\n    rightJoin: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' right join ' }))\n        }\n    },\n    fullJoin: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' full join ' }))\n        }\n    },\n    crossJoin: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' cross join ' }))\n        }\n    },\n    naturalJoin: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' natural join ' }))\n        }\n    },\n    naturalLeftJoin: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' natural left join ' }))\n        }\n    },\n    naturalRightJoin: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' natural right join ' }))\n        }\n    },\n    naturalFullJoin: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' natural full join ' }))\n        }\n    },\n    on: {\n        updateContext: (ctx, args) => {\n            const { join } = ctx\n            if (join.on) {\n                join.on.push(args)\n            } else {\n                ctx.target = join.on = [args]\n            }\n        }\n    },\n    using: {\n        updateContext: (ctx, args) => {\n            const { join } = ctx\n            if (join.using) {\n                join.using.push(args)\n            } else {\n                join.using = [args]\n            }\n        }\n    },\n    delete: {\n        // getter: true,\n        updateContext: ctx => {\n            ctx.type = 'delete'\n        }\n    },\n    insert: {\n        updateContext: (ctx, args) => {\n            ctx.type = 'insert'\n            ctx.insert = args\n        }\n    },\n    set: {\n        updateContext: (ctx, args) => {\n            ctx.type = 'update'\n            ctx.set.push(args)\n        }\n    },\n    express: {\n        updateContext: (ctx, args, count) => {\n            if (count.id === 0) {\n                count.id++\n                ctx.frm.push((ctx.join = { type: 'from', args, join: ', ' }))\n            } else if (count.id === 1) {\n                count.id++\n                ctx.whr.push(args)\n            } else if (count.id === 2) {\n                count.id++\n                ctx.ret.push(args)\n            } else throw Error('Invalid express call')\n        }\n    }\n}\n\nmodule.exports = methods;","const {\n    wth,\n    select,\n    from,\n    where,\n    group,\n    having,\n    setop,\n    order,\n    limit,\n    offset,\n    del,\n    returning,\n    insert,\n    update,\n    set,\n} = require('./clauses')\n\nconst query = (...clauses) => ctx => {\n    let text = ''\n    for (const clause of clauses) {\n        const str = clause && clause(ctx)\n        if (str) {\n            if (text) text += ctx.separator\n            text += str\n        }\n    }\n    return { text, args: ctx.params, type: ctx.userType || ctx.type }\n}\n\nconst queries = {\n    select: query(\n        wth,\n        select,\n        from,\n        where,\n        group,\n        having,\n        setop,\n        order,\n        limit,\n        offset\n    ),\n    update: query(wth, update, set, where, returning),\n    delete: query(wth, del, where, returning),\n    insert: query(wth, insert, returning)\n}\n\nmodule.exports = { query, queries }","const {\n  isObject,\n  buildCall,\n  mapJoin,\n  objectMapJoin\n} = require('../../lib-util')\nconst valuesArray = require('../common/values_array')\n\nmodule.exports = ctx => {\n  if (ctx.with.length === 0) return\n  const txt = calls(ctx, ctx.with)\n  return txt && `with ${ctx.recursive ? 'recursive ' : ''}${txt}`\n}\n\nconst buildArg = (ctx, arg) => {\n  if (isObject(arg)) return buildObject(ctx, arg)\n  throw Error('Invalid with argument:', arg)\n}\n\nconst buildProperty = (ctx, key, value) => {\n  if (typeof value === 'function') {\n    return `${ctx.mapKey(key)} ${ctx.build(value)}`\n  }\n  if (Array.isArray(value)) {\n    const { columns, values } = valuesArray(ctx, value)\n    return `${ctx.mapKey(key)}(${columns}) (${values})`\n  }\n  throw Error(`Error: Invalid .with argument`)\n}\n\nconst buildObject = objectMapJoin(buildProperty)\nconst calls = mapJoin(buildCall(mapJoin(buildArg)))\n","const expressions = require('../common/expressions')\n\nmodule.exports = ctx =>\n  `select ${buildDistinct(ctx)}${expressions(ctx, ctx.ret) || '*'}`\n\nconst buildDistinct = ctx =>\n  ctx.distinct\n    ? ctx.distinct.length\n      ? // TODO: expressions shouldn't be aliasable here\n        `distinct on (${expressions(ctx, ctx.distinct)})`\n      : 'distinct'\n    : ''\n","const fromItems = require('../common/from_items')\n\nmodule.exports = ctx => {\n  const txt = fromItems(ctx, ctx.frm)\n  return txt && `from ${txt}`\n}\n","const conditions = require('../common/conditions')\n\nmodule.exports = ctx => {\n  if (ctx.whr.length === 0) return\n  const txt = conditions(ctx, ctx.whr)\n  return txt && 'where ' + txt\n}\n","const { isObject, buildCall, mapJoin, mapJoinWrap } = require('../../lib-util')\n\nmodule.exports = ctx => {\n  if (ctx.grp.length === 0) return\n  const txt = calls(ctx, ctx.grp)\n  return txt && `group by ${txt}`\n}\n\nconst buildArg = (ctx, arg) => {\n  if (typeof arg === 'string') return arg\n  if (typeof arg === 'function') return ctx.build(arg)\n  if (Array.isArray(arg)) return buildArrayArg(ctx, arg)\n  if (isObject(arg)) return buildObject(ctx, arg)\n  throw Error('Invalid order by argument:', arg)\n}\n\nconst buildArrayArg = mapJoinWrap(buildArg)\n\n// postgres only\n// clone of buildArg() without support for object args\nconst buildCubeOrRollupArg = (ctx, arg) => {\n  if (typeof arg === 'string') return arg\n  if (typeof arg === 'function') return ctx.build(arg)\n  if (Array.isArray(arg)) return buildCubeOrRollupArrayArg(ctx, arg)\n  throw Error('Invalid cube/rollup argument')\n}\n\n// postgres only\n// clone of buildArrayArg() without support for object args\nconst buildCubeOrRollupArrayArg = mapJoinWrap(buildCubeOrRollupArg)\n\n// postgres only\nconst buildObject = (ctx, obj) => {\n  const { type, args } = obj\n  if (type === 'rollup') {\n    return `rollup ${buildCubeOrRollupArg(ctx, args)}`\n  }\n  if (type === 'cube') {\n    return `cube ${buildCubeOrRollupArg(ctx, args)}`\n  }\n  if (type === 'grouping sets') {\n    return `grouping sets ${buildArg(ctx, args)}`\n  }\n  throw Error('Invalid group by argument')\n}\n\nconst calls = mapJoin(buildCall(mapJoin(buildArg)))\n","const conditions = require('../common/conditions')\n\nmodule.exports = ctx => {\n  if (ctx.hav.length === 0) return\n  const txt = conditions(ctx, ctx.hav)\n  return txt && 'having ' + txt\n}\n","module.exports = ctx => {\n  if (ctx.setop.length === 0) return\n  let txt = ''\n  let first = true\n  const { setop } = ctx\n  for (let i = 0; i < setop.length; ++i) {\n    const { type, args } = ctx.setop[i]\n    for (let j = 0; j < args.length; ++j) {\n      if (!first) {\n        txt += ' '\n      } else {\n        first = false\n      }\n      txt += `${type} ${ctx.build(args[j])}`\n    }\n  }\n  return txt\n}\n","const { isObject, buildCall, mapJoin } = require('../../lib-util')\n\nmodule.exports = ctx => {\n  if (ctx.ord.length === 0) return\n  const txt = calls(ctx, ctx.ord)\n  return txt && `order by ${txt}`\n}\n\nconst buildArg = (ctx, arg) => {\n  if (typeof arg === 'string') return arg\n  if (typeof arg === 'function') return ctx.build(arg)\n  if (isObject(arg)) return buildObject(ctx, arg)\n  throw Error('Invalid order by argument:', arg)\n}\n\nconst buildObject = (ctx, obj) => {\n  let txt = ''\n  const { by, sort, using, nulls } = obj\n  // by\n  if (typeof by === 'string') txt += by\n  else if (typeof by === 'function') txt += ctx.build(by)\n  else throw Error('Invalid order by property \"by\"')\n  // sort\n  if (sort) {\n    if (sort === 'desc') txt += ' desc'\n    else if (sort === 'asc') txt += ' asc'\n    else if (typeof sort === 'string') txt += ` using ${sort}`\n    else throw Error('Invalid order by property \"sort\"')\n  } else if (using) {\n    if (typeof using === 'string') txt += ` using ${using}`\n    else throw Error('Invalid order by property \"using\"')\n  }\n  // nulls\n  if (nulls === undefined);\n  else if (nulls === 'last') txt += ' nulls last'\n  else if (nulls === 'first') txt += ' nulls first'\n  else throw Error('Invalid order by property \"nulls\"')\n  // return\n  return txt\n}\n\nconst calls = mapJoin(buildCall(mapJoin(buildArg)))\n","const limitOffset = require('../common/limit_offset')\n\nmodule.exports = ctx => ctx.limit && `limit ${limitOffset(ctx, ctx.limit)}`\n","const limitOffset = require('../common/limit_offset')\n\nmodule.exports = ctx => ctx.offset && `offset ${limitOffset(ctx, ctx.offset)}`\n","const fromItems = require('../common/from_items')\n\nmodule.exports = ctx => {\n  const txt = fromItems(ctx, ctx.frm)\n  return txt && `delete from ${txt}`\n}\n","const expressions = require('../common/expressions')\n\nmodule.exports = ctx => {\n  if (!ctx.ret) return\n  const txt = expressions(ctx, ctx.ret)\n  return txt && `returning ${txt}`\n}\n","const { isTaggedTemplate, buildTaggedTemplate } = require('../../lib-util')\nconst fromItems = require('../common/from_items')\nconst valuesArray = require('../common/values_array')\n\nmodule.exports = ctx => {\n  const table = fromItems(ctx, ctx.frm)\n  const values = buildCall(ctx, ctx.insert)\n  return `insert into ${table}${values}`\n}\n\nconst buildCall = (ctx, args) => {\n  if (isTaggedTemplate(args)) return ' ' + buildTaggedTemplate(ctx, args)\n  if (args.length === 1 && args[0] === undefined) return ' default values'\n  if (Array.isArray(args[0])) return buildValuesArray(ctx, args[0])\n  if (typeof args[0] === 'function') return ' ' + ctx.build(args[0])\n  return buildValuesArray(ctx, args)\n}\n\nconst buildValuesArray = (ctx, array) => {\n  const { values, columns } = valuesArray(ctx, array)\n  return `(${columns}) ${values}`\n}\n","const fromItems = require('../common/from_items')\n\nmodule.exports = ctx => {\n  const txt = fromItems(ctx, ctx.frm)\n  return txt && `update ${txt}`\n}\n","const { buildCall, mapJoin, objectMapJoin } = require('../../lib-util')\n\nmodule.exports = ctx => {\n  if (!ctx.set) return\n  const txt = calls(ctx, ctx.set)\n  return txt && 'set ' + txt\n}\n\nconst buildProperty = (ctx, key, value) =>\n  `${ctx.mapKey(key)} = ${ctx.build(value)}`\n\nconst calls = mapJoin(buildCall(mapJoin(objectMapJoin(buildProperty))))\n","const conditions = require('./conditions')\nconst expressions = require('./expressions')\nconst fromItems = require('./from_items')\nconst limitOffset = require('./limit_offset')\nconst valuesArray = require('./values_array')\n\nmodule.exports = {\n  conditions,\n  expressions,\n  fromItems,\n  limitOffset,\n  valuesArray\n}\n","const expressions = require('../lib-expression')\n\nmodule.exports = { expressions }","const {\n    unaryPre,\n    unaryPost,\n    unaryFunction,\n    binary,\n    ternary,\n    nary,\n    naryFunction,\n    oneValue,\n    compositeValue,\n    membership,\n    quantifiedComparison,\n    dateBinary\n} = require('./util')\n\n// value\nconst value = {\n    arg: compositeValue,\n    row: compositeValue,\n    unknown: oneValue,\n    boolean: oneValue,\n    number: oneValue,\n    string: oneValue,\n    array: oneValue,\n    json: oneValue,\n    table: oneValue\n}\n\n// boolean\nconst boolean = {\n    // logical\n    and: nary('and'),\n    or: nary('or'),\n    not: unaryFunction('not'),\n    // comparison\n    isTrue: unaryPost('is true'),\n    isNotTrue: unaryPost('is not true'),\n    isFalse: unaryPost('is false'),\n    isNotFalse: unaryPost('is not false'),\n    isUnknown: unaryPost('is unknown'),\n    isNotUnknown: unaryPost('is not unknown')\n}\n\n// comparison\nconst comparison = {\n    // binary comparison\n    eq: binary('='),\n    neq: binary('<>'),\n    lt: binary('<'),\n    gt: binary('>'),\n    lte: binary('<='),\n    gte: binary('>='),\n    // misc\n    between: ternary('between', 'and'),\n    isDistinctFrom: binary('is distinct from'),\n    isNotDistinctFrom: binary('is not distinct from'),\n    isNull: unaryPost('is null'),\n    isNotNull: unaryPost('is not null'),\n    in: membership('in'),\n    notIn: membership('not in'),\n    // quantified any\n    eqAny: quantifiedComparison('= any'),\n    neqAny: quantifiedComparison('<> any'),\n    ltAny: quantifiedComparison('< any'),\n    gtAny: quantifiedComparison('> any'),\n    lteAny: quantifiedComparison('<= any'),\n    gteAny: quantifiedComparison('>= any'),\n    // quantified all\n    eqAll: quantifiedComparison('= all'),\n    neqAll: quantifiedComparison('<> all'),\n    ltAll: quantifiedComparison('< all'),\n    gtAll: quantifiedComparison('> all'),\n    lteAll: quantifiedComparison('<= all'),\n    gteAll: quantifiedComparison('>= all')\n}\n\n// dates\nconst dateComparison = {\n    // dateEq: dateBinary('='),\n    // dateNeq: dateBinary('<>'),\n    dateLt: dateBinary('<'),\n    dateGt: dateBinary('>'),\n    dateLte: dateBinary('<='),\n    dateGte: dateBinary('>=')\n}\n\n// math\nconst math = {\n    add: binary('+'),\n    sub: binary('-'),\n    mul: binary('*'),\n    div: binary('/'),\n    mod: binary('%'),\n    exp: binary('%'),\n    sqrt: unaryPre('|/'),\n    cbrt: unaryPre('||/'),\n    fact: unaryPre('!!'),\n    abs: unaryFunction('abs')\n}\n\n// string\nconst string = {\n    like: binary('like'),\n    notLike: binary('not like')\n}\n\nconst array = {\n    unnest: naryFunction('unnest')\n}\n\nmodule.exports = {\n    ...value,\n    ...boolean,\n    ...comparison,\n    ...math,\n    ...array,\n    ...dateComparison,\n    ...string\n}\n","const { buildTaggedTemplate } = require('../lib-util')\n\nconst dateToYYYYMMDD = d => [\n    d.getFullYear(),\n    ('0' + (d.getMonth() + 1)).slice(-2),\n    ('0' + d.getDate()).slice(-2)\n].join('-');\n\nconst build = (ctx, arg) => {\n    // compiled expression string\n    if (arg.exp) return arg.exp\n    // tagged template argument\n    if (arg.tag) return buildTaggedTemplate(ctx, arg.tag)\n    // expression, subquery or fragment argument\n    return ctx.build(arg.arg)\n}\n\nconst unaryPre = op => ({\n    minArgs: 1,\n    maxArgs: 1,\n    build: (ctx, args) => `(${op} ${build(ctx, args[0])})`\n})\n\nconst unaryPost = op => ({\n    minArgs: 1,\n    maxArgs: 1,\n    build: (ctx, args) => `(${build(ctx, args[0])} ${op})`\n})\n\nconst unaryFunction = op => ({\n    minArgs: 1,\n    maxArgs: 1,\n    build: (ctx, args) => `${op}(${build(ctx, args[0])})`\n})\n\nconst binary = op => ({\n    minArgs: 2,\n    maxArgs: 2,\n    build: (ctx, args) => `(${build(ctx, args[0])} ${op} ${build(ctx, args[1])})`\n})\n\nconst dateBinary = op => ({\n    minArgs: 2,\n    maxArgs: 2,\n    build: (ctx, args) => {\n        const inDate = args[1].arg;\n        if (typeof inDate.getMonth === 'function') {\n            args[1].arg = dateToYYYYMMDD(inDate);\n        }\n        return `date(${build(ctx, args[0])}, 'YYYY-MM-DD') ${op} ${build(ctx, args[1])}`\n    }\n})\n\n\nconst ternary = (op1, op2) => ({\n    minArgs: 3,\n    maxArgs: 3,\n    build: (ctx, args) =>\n        `(${build(ctx, args[0])} ${op1} ${build(ctx, args[1])} ${op2} ${build(\n            ctx,\n            args[2]\n        )})`\n})\n\nconst nary = op => ({\n    minArgs: 1,\n    maxArgs: Number.MAX_SAFE_INTEGER,\n    build: (ctx, args) => {\n        if (args.length === 1) return build(ctx, args[0])\n        let txt = '('\n        for (let i = 0; i < args.length; ++i) {\n            if (i !== 0) txt += ` ${op} `\n            txt += build(ctx, args[i])\n        }\n        return txt + ')'\n    }\n})\n\nconst naryFunction = fn => ({\n    minArgs: 1,\n    maxArgs: Number.MAX_SAFE_INTEGER,\n    build: (ctx, args) => {\n        let txt = `${fn}(`\n        for (let i = 0; i < args.length; ++i) {\n            if (i !== 0) txt += `, `\n            txt += build(ctx, args[i])\n        }\n        return txt + ')'\n    }\n})\n\nconst oneValue = {\n    minArgs: 1,\n    maxArgs: 1,\n    build: (ctx, args) => build(ctx, args[0])\n}\n\nconst compositeValue = {\n    minArgs: 1,\n    maxArgs: Number.MAX_SAFE_INTEGER,\n    build: (ctx, args) => {\n        if (args.length === 1) return build(ctx, args[0])\n        let txt = ''\n        for (let i = 0; i < args.length; ++i) {\n            if (i !== 0) txt += ', '\n            txt += build(ctx, args[i])\n        }\n        return args.length > 1 ? `(${txt})` : txt\n    }\n}\n\nconst buildValuesList = (ctx, values) => {\n    if (values.length === 0) throw Error('Error: .in operation values list empty')\n    let txt = '('\n    for (let i = 0; i < values.length; ++i) {\n        if (i !== 0) txt += ', '\n        txt += ctx.build(values[i])\n    }\n    return txt + ')'\n}\n\nconst membership = op => ({\n    minArgs: 2,\n    maxArgs: 2,\n    build: (ctx, [arg1, arg2]) =>\n        `(${build(ctx, arg1)} ${op} ${Array.isArray(arg2.arg)\n            ? buildValuesList(ctx, arg2.arg)\n            : build(ctx, arg2)\n        })`\n})\n\nconst quantifiedComparison = op => ({\n    minArgs: 2,\n    maxArgs: 2,\n    build: (ctx, args) => `(${build(ctx, args[0])} ${op}(${build(ctx, args[1])}))`\n})\n\nmodule.exports = {\n    build,\n    unaryFunction,\n    unaryPre,\n    unaryPost,\n    binary,\n    ternary,\n    nary,\n    naryFunction,\n    oneValue,\n    compositeValue,\n    membership,\n    quantifiedComparison,\n    dateBinary\n}\n","// parameterizes given argument, function should be attached to ctx\nfunction parameterize(arg) {\n    if (arg === undefined) throw Error('Error: parameter is undefined')\n    return `$${this.params.push(arg)}`\n}\n\n/** Escapes an argument for use in UNPARAMETERIZED queries. NOT SAFE AT ALL. */\nconst escape = arg => {\n    if (arg === undefined) throw Error('Error: parameter is undefined')\n    if (arg === null) return 'null'\n    if (typeof arg === 'string') return escapeLiteral(arg)\n    if (typeof arg === 'number') return '' + arg\n    if (typeof arg === 'boolean') return '' + arg\n    if (typeof arg === 'object') {\n        if (Array.isArray(arg)) {\n            return `array[${arg.map(e => escape(e)).join(', ')}]`\n        } else {\n            return escapeLiteral(JSON.stringify(arg))\n        }\n    }\n    throw Error(`Invalid argument SQL argument of type '${typeof arg}'`, arg)\n}\n\n// from https://github.com/brianc/node-postgres/blob/eb076db5d47a29c19d3212feac26cd7b6d257a95/lib/client.js#L351\nconst escapeLiteral = str => {\n    let hasBackslash = false\n    let escaped = \"'\"\n    for (let i = 0; i < str.length; i++) {\n        const c = str[i]\n        if (c === \"'\") {\n            escaped += c + c\n        } else if (c === '\\\\') {\n            escaped += c + c\n            hasBackslash = true\n        } else {\n            escaped += c\n        }\n    }\n    escaped += \"'\"\n    if (hasBackslash === true) {\n        escaped = ' E' + escaped\n    }\n    return escaped\n}\n\nmodule.exports = {\n    parameterize,\n    escape\n}\n","export var POST_TYPES;\n(function (POST_TYPES) {\n    POST_TYPES[\"UPLOAD_ATTACHMENT\"] = \"upload_attachment\";\n    POST_TYPES[\"HANDSHAKE\"] = \"handshake\";\n    POST_TYPES[\"VALID_TOKEN\"] = \"valid_token\";\n    POST_TYPES[\"GET_FRAME\"] = \"get_frame\";\n    POST_TYPES[\"TABLE_SIZE\"] = \"table_size\";\n    POST_TYPES[\"COLUMN_TYPES\"] = \"column_types\";\n    POST_TYPES[\"SYNC_STACK\"] = \"sync_stack\";\n    POST_TYPES[\"SYNC_DELETE\"] = \"sync_delete\";\n    POST_TYPES[\"SYNC_INSERT\"] = \"sync_insert\";\n    POST_TYPES[\"GET_QUERY\"] = \"get_query\";\n    POST_TYPES[\"USER_ATTRIBUTES\"] = \"user_attributes\";\n    POST_TYPES[\"SET_ATTRIBUTE\"] = \"set_attribute\";\n    POST_TYPES[\"SIGN_UP\"] = \"sign_up\";\n    POST_TYPES[\"REQUEST_TOKEN\"] = \"request_token\";\n    POST_TYPES[\"EASY_QB\"] = \"easyqb\";\n    POST_TYPES[\"RESET_PASSWORD\"] = \"reset_password\";\n    POST_TYPES[\"FORGOT_PASSWORD_SEND\"] = \"forgot_password_send\";\n    POST_TYPES[\"FORGOT_PASSWORD_CONFIRM\"] = \"forgot_password_confirm\";\n})(POST_TYPES || (POST_TYPES = {}));\nexport var DB_STATUS;\n(function (DB_STATUS) {\n    DB_STATUS[\"ERROR\"] = \"error\";\n    DB_STATUS[\"PENDING\"] = \"pending\";\n    DB_STATUS[\"SUCCESS\"] = \"success\";\n})(DB_STATUS || (DB_STATUS = {}));\nexport var EXECUTE_COUNT;\n(function (EXECUTE_COUNT) {\n    EXECUTE_COUNT[\"ALL\"] = \"all\";\n    EXECUTE_COUNT[\"ONE\"] = \"one\";\n})(EXECUTE_COUNT || (EXECUTE_COUNT = {}));\n","const\n\tINSERT = 'insert',\n\tUPDATE = 'update',\n\tDELETE = 'delete',\n\tREVERSE = 'reverse',\n\tSHUFFLE = 'shuffle',\n\toMetaKey = Symbol('observable-meta-key'),\n\tvalidObservableOptionKeys = { async: 1 },\n\tvalidObserverOptionKeys = { path: 1, pathsOf: 1, pathsFrom: 1 },\n\tprocessObserveOptions = function processObserveOptions(options) {\n\t\tconst result = {};\n\t\tif (options.path !== undefined) {\n\t\t\tif (typeof options.path !== 'string' || options.path === '') {\n\t\t\t\tthrow new Error('\"path\" option, if/when provided, MUST be a non-empty string');\n\t\t\t}\n\t\t\tresult.path = options.path;\n\t\t}\n\t\tif (options.pathsOf !== undefined) {\n\t\t\tif (options.path) {\n\t\t\t\tthrow new Error('\"pathsOf\" option MAY NOT be specified together with \"path\" option');\n\t\t\t}\n\t\t\tif (typeof options.pathsOf !== 'string') {\n\t\t\t\tthrow new Error('\"pathsOf\" option, if/when provided, MUST be a string (MAY be empty)');\n\t\t\t}\n\t\t\tresult.pathsOf = options.pathsOf.split('.').filter(n => n);\n\t\t}\n\t\tif (options.pathsFrom !== undefined) {\n\t\t\tif (options.path || options.pathsOf) {\n\t\t\t\tthrow new Error('\"pathsFrom\" option MAY NOT be specified together with \"path\"/\"pathsOf\"  option/s');\n\t\t\t}\n\t\t\tif (typeof options.pathsFrom !== 'string' || options.pathsFrom === '') {\n\t\t\t\tthrow new Error('\"pathsFrom\" option, if/when provided, MUST be a non-empty string');\n\t\t\t}\n\t\t\tresult.pathsFrom = options.pathsFrom;\n\t\t}\n\t\tconst invalidOptions = Object.keys(options).filter(option => !validObserverOptionKeys.hasOwnProperty(option));\n\t\tif (invalidOptions.length) {\n\t\t\tthrow new Error(`'${invalidOptions.join(', ')}' is/are not a valid observer option/s`);\n\t\t}\n\t\treturn result;\n\t},\n\tobserve = function observe(observer, options) {\n\t\tif (typeof observer !== 'function') {\n\t\t\tthrow new Error(`observer MUST be a function, got '${observer}'`);\n\t\t}\n\n\t\tconst\n\t\t\toMeta = this[oMetaKey],\n\t\t\tobservers = oMeta.observers;\n\t\tif (!observers.some(o => o[0] === observer)) {\n\t\t\tlet opts;\n\t\t\tif (options) {\n\t\t\t\topts = processObserveOptions(options);\n\t\t\t} else {\n\t\t\t\topts = {};\n\t\t\t}\n\t\t\tobservers.push([observer, opts]);\n\t\t} else {\n\t\t\tconsole.warn('observer may be bound to an observable only once; will NOT rebind');\n\t\t}\n\t},\n\tunobserve = function unobserve() {\n\t\tconst oMeta = this[oMetaKey];\n\t\tconst observers = oMeta.observers;\n\t\tlet ol = observers.length;\n\t\tif (ol) {\n\t\t\tlet al = arguments.length;\n\t\t\tif (al) {\n\t\t\t\twhile (al--) {\n\t\t\t\t\tlet i = ol;\n\t\t\t\t\twhile (i--) {\n\t\t\t\t\t\tif (observers[i][0] === arguments[al]) {\n\t\t\t\t\t\t\tobservers.splice(i, 1);\n\t\t\t\t\t\t\tol--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tobservers.splice(0);\n\t\t\t}\n\t\t}\n\t},\n\tpropertiesBluePrint = { [oMetaKey]: { value: null }, observe: { value: observe }, unobserve: { value: unobserve } },\n\tprepareObject = function prepareObject(source, oMeta) {\n\t\tpropertiesBluePrint[oMetaKey].value = oMeta;\n\t\tconst target = Object.defineProperties({}, propertiesBluePrint);\n\t\tfor (const key of Object.keys(source)) {\n\t\t\ttarget[key] = getObservedOf(source[key], key, oMeta);\n\t\t}\n\t\treturn target;\n\t},\n\tprepareArray = function prepareArray(source, oMeta) {\n\t\tlet i = 0, l = source.length;\n\t\tpropertiesBluePrint[oMetaKey].value = oMeta;\n\t\tconst target = Object.defineProperties(new Array(l), propertiesBluePrint);\n\t\tfor (; i < l; i++) {\n\t\t\ttarget[i] = getObservedOf(source[i], i, oMeta);\n\t\t}\n\t\treturn target;\n\t},\n\tprepareTypedArray = function prepareTypedArray(source, oMeta) {\n\t\tpropertiesBluePrint[oMetaKey].value = oMeta;\n\t\tObject.defineProperties(source, propertiesBluePrint);\n\t\treturn source;\n\t},\n\tfilterChanges = function filterChanges(options, changes) {\n\t\tlet result = changes;\n\t\tif (options.path) {\n\t\t\tconst oPath = options.path;\n\t\t\tresult = changes.filter(change =>\n\t\t\t\tchange.path.join('.') === oPath\n\t\t\t);\n\t\t} else if (options.pathsOf) {\n\t\t\tconst oPathsOf = options.pathsOf;\n\t\t\tresult = changes.filter(change =>\n\t\t\t\tchange.path.length === oPathsOf.length + 1 ||\n\t\t\t\t(change.path.length === oPathsOf.length && (change.type === REVERSE || change.type === SHUFFLE))\n\t\t\t);\n\t\t} else if (options.pathsFrom) {\n\t\t\tconst oPathsFrom = options.pathsFrom;\n\t\t\tresult = changes.filter(change =>\n\t\t\t\tchange.path.join('.').startsWith(oPathsFrom)\n\t\t\t);\n\t\t}\n\t\treturn result;\n\t},\n\tcallObserverSafe = function callObserverSafe(listener, changes) {\n\t\ttry {\n\t\t\tlistener(changes);\n\t\t} catch (e) {\n\t\t\tconsole.error(`failed to notify listener ${listener} with ${changes}`, e);\n\t\t}\n\t},\n\tcallObserversFromMT = function callObserversFromMT() {\n\t\tconst batches = this.batches;\n\t\tthis.batches = null;\n\t\tfor (const [listener, options] of batches) {\n\t\t\tcallObserverSafe(listener, options);\n\t\t}\n\t},\n\tcallObservers = function callObservers(oMeta, changes) {\n\t\tlet currentObservable = oMeta;\n\t\tlet observers, target, options, relevantChanges, i, newPath, tmp;\n\t\tconst l = changes.length;\n\t\tdo {\n\t\t\tobservers = currentObservable.observers;\n\t\t\ti = observers.length;\n\t\t\twhile (i--) {\n\t\t\t\t[target, options] = observers[i];\n\t\t\t\trelevantChanges = filterChanges(options, changes);\n\n\t\t\t\tif (relevantChanges.length) {\n\t\t\t\t\tif (currentObservable.options.async) {\n\t\t\t\t\t\t//\tthis is the async dispatch handling\n\t\t\t\t\t\tif (!currentObservable.batches) {\n\t\t\t\t\t\t\tcurrentObservable.batches = [];\n\t\t\t\t\t\t\tqueueMicrotask(callObserversFromMT.bind(currentObservable));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet rb = currentObservable.batches.find(b => b[0] === target);\n\t\t\t\t\t\tif (!rb) {\n\t\t\t\t\t\t\trb = [target, []];\n\t\t\t\t\t\t\tcurrentObservable.batches.push(rb);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tArray.prototype.push.apply(rb[1], relevantChanges);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//\tthis is the naive straight forward synchronous dispatch\n\t\t\t\t\t\tcallObserverSafe(target, relevantChanges);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet tmpa;\n\t\t\tif (currentObservable.parent) {\n\t\t\t\ttmpa = new Array(l);\n\t\t\t\tfor (let i = 0; i < l; i++) {\n\t\t\t\t\ttmp = changes[i];\n\t\t\t\t\tnewPath = [currentObservable.ownKey, ...tmp.path];\n\t\t\t\t\ttmpa[i] = {\n\t\t\t\t\t\ttype: tmp.type,\n\t\t\t\t\t\tpath: newPath,\n\t\t\t\t\t\tvalue: tmp.value,\n\t\t\t\t\t\toldValue: tmp.oldValue,\n\t\t\t\t\t\tobject: tmp.object\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tchanges = tmpa;\n\t\t\t\tcurrentObservable = currentObservable.parent;\n\t\t\t} else {\n\t\t\t\tcurrentObservable = null;\n\t\t\t}\n\t\t} while (currentObservable);\n\t},\n\tgetObservedOf = function getObservedOf(item, key, parent) {\n\t\tif (!item || typeof item !== 'object') {\n\t\t\treturn item;\n\t\t} else if (Array.isArray(item)) {\n\t\t\treturn new ArrayOMeta({ target: item, ownKey: key, parent: parent }).proxy;\n\t\t} else if (ArrayBuffer.isView(item)) {\n\t\t\treturn new TypedArrayOMeta({ target: item, ownKey: key, parent: parent }).proxy;\n\t\t} else if (item instanceof Date || item instanceof Error) {\n\t\t\treturn item;\n\t\t} else {\n\t\t\treturn new ObjectOMeta({ target: item, ownKey: key, parent: parent }).proxy;\n\t\t}\n\t},\n\tproxiedPop = function proxiedPop() {\n\t\tconst oMeta = this[oMetaKey],\n\t\t\ttarget = oMeta.target,\n\t\t\tpoppedIndex = target.length - 1;\n\n\t\tlet popResult = target.pop();\n\t\tif (popResult && typeof popResult === 'object') {\n\t\t\tconst tmpObserved = popResult[oMetaKey];\n\t\t\tif (tmpObserved) {\n\t\t\t\tpopResult = tmpObserved.detach();\n\t\t\t}\n\t\t}\n\n\t\tconst changes = [{ type: DELETE, path: [poppedIndex], oldValue: popResult, object: this }];\n\t\tcallObservers(oMeta, changes);\n\n\t\treturn popResult;\n\t},\n\tproxiedPush = function proxiedPush() {\n\t\tconst\n\t\t\toMeta = this[oMetaKey],\n\t\t\ttarget = oMeta.target,\n\t\t\tl = arguments.length,\n\t\t\tpushContent = new Array(l),\n\t\t\tinitialLength = target.length;\n\n\t\tfor (let i = 0; i < l; i++) {\n\t\t\tpushContent[i] = getObservedOf(arguments[i], initialLength + i, oMeta);\n\t\t}\n\t\tconst pushResult = Reflect.apply(target.push, target, pushContent);\n\n\t\tconst changes = [];\n\t\tfor (let i = initialLength, l = target.length; i < l; i++) {\n\t\t\tchanges[i - initialLength] = { type: INSERT, path: [i], value: target[i], object: this };\n\t\t}\n\t\tcallObservers(oMeta, changes);\n\n\t\treturn pushResult;\n\t},\n\tproxiedShift = function proxiedShift() {\n\t\tconst\n\t\t\toMeta = this[oMetaKey],\n\t\t\ttarget = oMeta.target;\n\t\tlet shiftResult, i, l, item, tmpObserved;\n\n\t\tshiftResult = target.shift();\n\t\tif (shiftResult && typeof shiftResult === 'object') {\n\t\t\ttmpObserved = shiftResult[oMetaKey];\n\t\t\tif (tmpObserved) {\n\t\t\t\tshiftResult = tmpObserved.detach();\n\t\t\t}\n\t\t}\n\n\t\t//\tupdate indices of the remaining items\n\t\tfor (i = 0, l = target.length; i < l; i++) {\n\t\t\titem = target[i];\n\t\t\tif (item && typeof item === 'object') {\n\t\t\t\ttmpObserved = item[oMetaKey];\n\t\t\t\tif (tmpObserved) {\n\t\t\t\t\ttmpObserved.ownKey = i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst changes = [{ type: DELETE, path: [0], oldValue: shiftResult, object: this }];\n\t\tcallObservers(oMeta, changes);\n\n\t\treturn shiftResult;\n\t},\n\tproxiedUnshift = function proxiedUnshift() {\n\t\tconst\n\t\t\toMeta = this[oMetaKey],\n\t\t\ttarget = oMeta.target,\n\t\t\tal = arguments.length,\n\t\t\tunshiftContent = new Array(al);\n\n\t\tfor (let i = 0; i < al; i++) {\n\t\t\tunshiftContent[i] = getObservedOf(arguments[i], i, oMeta);\n\t\t}\n\t\tconst unshiftResult = Reflect.apply(target.unshift, target, unshiftContent);\n\n\t\tfor (let i = 0, l = target.length, item; i < l; i++) {\n\t\t\titem = target[i];\n\t\t\tif (item && typeof item === 'object') {\n\t\t\t\tconst tmpObserved = item[oMetaKey];\n\t\t\t\tif (tmpObserved) {\n\t\t\t\t\ttmpObserved.ownKey = i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//\tpublish changes\n\t\tconst l = unshiftContent.length;\n\t\tconst changes = new Array(l);\n\t\tfor (let i = 0; i < l; i++) {\n\t\t\tchanges[i] = { type: INSERT, path: [i], value: target[i], object: this };\n\t\t}\n\t\tcallObservers(oMeta, changes);\n\n\t\treturn unshiftResult;\n\t},\n\tproxiedReverse = function proxiedReverse() {\n\t\tconst\n\t\t\toMeta = this[oMetaKey],\n\t\t\ttarget = oMeta.target;\n\t\tlet i, l, item;\n\n\t\ttarget.reverse();\n\t\tfor (i = 0, l = target.length; i < l; i++) {\n\t\t\titem = target[i];\n\t\t\tif (item && typeof item === 'object') {\n\t\t\t\tconst tmpObserved = item[oMetaKey];\n\t\t\t\tif (tmpObserved) {\n\t\t\t\t\ttmpObserved.ownKey = i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst changes = [{ type: REVERSE, path: [], object: this }];\n\t\tcallObservers(oMeta, changes);\n\n\t\treturn this;\n\t},\n\tproxiedSort = function proxiedSort(comparator) {\n\t\tconst\n\t\t\toMeta = this[oMetaKey],\n\t\t\ttarget = oMeta.target;\n\t\tlet i, l, item;\n\n\t\ttarget.sort(comparator);\n\t\tfor (i = 0, l = target.length; i < l; i++) {\n\t\t\titem = target[i];\n\t\t\tif (item && typeof item === 'object') {\n\t\t\t\tconst tmpObserved = item[oMetaKey];\n\t\t\t\tif (tmpObserved) {\n\t\t\t\t\ttmpObserved.ownKey = i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst changes = [{ type: SHUFFLE, path: [], object: this }];\n\t\tcallObservers(oMeta, changes);\n\n\t\treturn this;\n\t},\n\tproxiedFill = function proxiedFill(filVal, start, end) {\n\t\tconst\n\t\t\toMeta = this[oMetaKey],\n\t\t\ttarget = oMeta.target,\n\t\t\tchanges = [],\n\t\t\ttarLen = target.length,\n\t\t\tprev = target.slice(0);\n\t\tstart = start === undefined ? 0 : (start < 0 ? Math.max(tarLen + start, 0) : Math.min(start, tarLen));\n\t\tend = end === undefined ? tarLen : (end < 0 ? Math.max(tarLen + end, 0) : Math.min(end, tarLen));\n\n\t\tif (start < tarLen && end > start) {\n\t\t\ttarget.fill(filVal, start, end);\n\n\t\t\tlet tmpObserved;\n\t\t\tfor (let i = start, item, tmpTarget; i < end; i++) {\n\t\t\t\titem = target[i];\n\t\t\t\ttarget[i] = getObservedOf(item, i, oMeta);\n\t\t\t\tif (prev.hasOwnProperty(i)) {\n\t\t\t\t\ttmpTarget = prev[i];\n\t\t\t\t\tif (tmpTarget && typeof tmpTarget === 'object') {\n\t\t\t\t\t\ttmpObserved = tmpTarget[oMetaKey];\n\t\t\t\t\t\tif (tmpObserved) {\n\t\t\t\t\t\t\ttmpTarget = tmpObserved.detach();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tchanges.push({ type: UPDATE, path: [i], value: target[i], oldValue: tmpTarget, object: this });\n\t\t\t\t} else {\n\t\t\t\t\tchanges.push({ type: INSERT, path: [i], value: target[i], object: this });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcallObservers(oMeta, changes);\n\t\t}\n\n\t\treturn this;\n\t},\n\tproxiedCopyWithin = function proxiedCopyWithin(dest, start, end) {\n\t\tconst\n\t\t\toMeta = this[oMetaKey],\n\t\t\ttarget = oMeta.target,\n\t\t\ttarLen = target.length;\n\t\tdest = dest < 0 ? Math.max(tarLen + dest, 0) : dest;\n\t\tstart = start === undefined ? 0 : (start < 0 ? Math.max(tarLen + start, 0) : Math.min(start, tarLen));\n\t\tend = end === undefined ? tarLen : (end < 0 ? Math.max(tarLen + end, 0) : Math.min(end, tarLen));\n\t\tconst len = Math.min(end - start, tarLen - dest);\n\n\t\tif (dest < tarLen && dest !== start && len > 0) {\n\t\t\tconst\n\t\t\t\tprev = target.slice(0),\n\t\t\t\tchanges = [];\n\n\t\t\ttarget.copyWithin(dest, start, end);\n\n\t\t\tfor (let i = dest, nItem, oItem, tmpObserved; i < dest + len; i++) {\n\t\t\t\t//\tupdate newly placed observables, if any\n\t\t\t\tnItem = target[i];\n\t\t\t\tif (nItem && typeof nItem === 'object') {\n\t\t\t\t\tnItem = getObservedOf(nItem, i, oMeta);\n\t\t\t\t\ttarget[i] = nItem;\n\t\t\t\t}\n\n\t\t\t\t//\tdetach overridden observables, if any\n\t\t\t\toItem = prev[i];\n\t\t\t\tif (oItem && typeof oItem === 'object') {\n\t\t\t\t\ttmpObserved = oItem[oMetaKey];\n\t\t\t\t\tif (tmpObserved) {\n\t\t\t\t\t\toItem = tmpObserved.detach();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (typeof nItem !== 'object' && nItem === oItem) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tchanges.push({ type: UPDATE, path: [i], value: nItem, oldValue: oItem, object: this });\n\t\t\t}\n\n\t\t\tcallObservers(oMeta, changes);\n\t\t}\n\n\t\treturn this;\n\t},\n\tproxiedSplice = function proxiedSplice() {\n\t\tconst\n\t\t\toMeta = this[oMetaKey],\n\t\t\ttarget = oMeta.target,\n\t\t\tsplLen = arguments.length,\n\t\t\tspliceContent = new Array(splLen),\n\t\t\ttarLen = target.length;\n\n\t\t//\tobservify the newcomers\n\t\tfor (let i = 0; i < splLen; i++) {\n\t\t\tspliceContent[i] = getObservedOf(arguments[i], i, oMeta);\n\t\t}\n\n\t\t//\tcalculate pointers\n\t\tconst\n\t\t\tstartIndex = splLen === 0 ? 0 : (spliceContent[0] < 0 ? tarLen + spliceContent[0] : spliceContent[0]),\n\t\t\tremoved = splLen < 2 ? tarLen - startIndex : spliceContent[1],\n\t\t\tinserted = Math.max(splLen - 2, 0),\n\t\t\tspliceResult = Reflect.apply(target.splice, target, spliceContent),\n\t\t\tnewTarLen = target.length;\n\n\t\t//\treindex the paths\n\t\tlet tmpObserved;\n\t\tfor (let i = 0, item; i < newTarLen; i++) {\n\t\t\titem = target[i];\n\t\t\tif (item && typeof item === 'object') {\n\t\t\t\ttmpObserved = item[oMetaKey];\n\t\t\t\tif (tmpObserved) {\n\t\t\t\t\ttmpObserved.ownKey = i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//\tdetach removed objects\n\t\tlet i, l, item;\n\t\tfor (i = 0, l = spliceResult.length; i < l; i++) {\n\t\t\titem = spliceResult[i];\n\t\t\tif (item && typeof item === 'object') {\n\t\t\t\ttmpObserved = item[oMetaKey];\n\t\t\t\tif (tmpObserved) {\n\t\t\t\t\tspliceResult[i] = tmpObserved.detach();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst changes = [];\n\t\tlet index;\n\t\tfor (index = 0; index < removed; index++) {\n\t\t\tif (index < inserted) {\n\t\t\t\tchanges.push({ type: UPDATE, path: [startIndex + index], value: target[startIndex + index], oldValue: spliceResult[index], object: this });\n\t\t\t} else {\n\t\t\t\tchanges.push({ type: DELETE, path: [startIndex + index], oldValue: spliceResult[index], object: this });\n\t\t\t}\n\t\t}\n\t\tfor (; index < inserted; index++) {\n\t\t\tchanges.push({ type: INSERT, path: [startIndex + index], value: target[startIndex + index], object: this });\n\t\t}\n\t\tcallObservers(oMeta, changes);\n\n\t\treturn spliceResult;\n\t},\n\tproxiedTypedArraySet = function proxiedTypedArraySet(source, offset) {\n\t\tconst\n\t\t\toMeta = this[oMetaKey],\n\t\t\ttarget = oMeta.target,\n\t\t\tsouLen = source.length,\n\t\t\tprev = target.slice(0);\n\t\toffset = offset || 0;\n\n\t\ttarget.set(source, offset);\n\t\tconst changes = new Array(souLen);\n\t\tfor (let i = offset; i < (souLen + offset); i++) {\n\t\t\tchanges[i - offset] = { type: UPDATE, path: [i], value: target[i], oldValue: prev[i], object: this };\n\t\t}\n\n\t\tcallObservers(oMeta, changes);\n\t},\n\tproxiedArrayMethods = {\n\t\tpop: proxiedPop,\n\t\tpush: proxiedPush,\n\t\tshift: proxiedShift,\n\t\tunshift: proxiedUnshift,\n\t\treverse: proxiedReverse,\n\t\tsort: proxiedSort,\n\t\tfill: proxiedFill,\n\t\tcopyWithin: proxiedCopyWithin,\n\t\tsplice: proxiedSplice\n\t},\n\tproxiedTypedArrayMethods = {\n\t\treverse: proxiedReverse,\n\t\tsort: proxiedSort,\n\t\tfill: proxiedFill,\n\t\tcopyWithin: proxiedCopyWithin,\n\t\tset: proxiedTypedArraySet\n\t};\n\nclass OMetaBase {\n\tconstructor(properties, cloningFunction) {\n\t\tconst { target, parent, ownKey } = properties;\n\t\tif (parent && ownKey !== undefined) {\n\t\t\tthis.parent = parent;\n\t\t\tthis.ownKey = ownKey;\n\t\t} else {\n\t\t\tthis.parent = null;\n\t\t\tthis.ownKey = null;\n\t\t}\n\t\tconst targetClone = cloningFunction(target, this);\n\t\tthis.observers = [];\n\t\tthis.revocable = Proxy.revocable(targetClone, this);\n\t\tthis.proxy = this.revocable.proxy;\n\t\tthis.target = targetClone;\n\t\tthis.options = this.processOptions(properties.options);\n\t}\n\n\tprocessOptions(options) {\n\t\tif (options) {\n\t\t\tif (typeof options !== 'object') {\n\t\t\t\tthrow new Error(`Observable options if/when provided, MAY only be an object, got '${options}'`);\n\t\t\t}\n\t\t\tconst invalidOptions = Object.keys(options).filter(option => !validObservableOptionKeys.hasOwnProperty(option));\n\t\t\tif (invalidOptions.length) {\n\t\t\t\tthrow new Error(`'${invalidOptions.join(', ')}' is/are not a valid Observable option/s`);\n\t\t\t}\n\t\t\treturn Object.assign({}, options);\n\t\t} else {\n\t\t\treturn {};\n\t\t}\n\t}\n\n\tdetach() {\n\t\tthis.parent = null;\n\t\treturn this.target;\n\t}\n\n\tset(target, key, value) {\n\t\tlet oldValue = target[key];\n\n\t\tif (value !== oldValue) {\n\t\t\tconst newValue = getObservedOf(value, key, this);\n\t\t\ttarget[key] = newValue;\n\n\t\t\tif (oldValue && typeof oldValue === 'object') {\n\t\t\t\tconst tmpObserved = oldValue[oMetaKey];\n\t\t\t\tif (tmpObserved) {\n\t\t\t\t\toldValue = tmpObserved.detach();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst changes = oldValue === undefined\n\t\t\t\t? [{ type: INSERT, path: [key], value: newValue, object: this.proxy }]\n\t\t\t\t: [{ type: UPDATE, path: [key], value: newValue, oldValue: oldValue, object: this.proxy }];\n\t\t\tcallObservers(this, changes);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tdeleteProperty(target, key) {\n\t\tlet oldValue = target[key];\n\n\t\tdelete target[key];\n\n\t\tif (oldValue && typeof oldValue === 'object') {\n\t\t\tconst tmpObserved = oldValue[oMetaKey];\n\t\t\tif (tmpObserved) {\n\t\t\t\toldValue = tmpObserved.detach();\n\t\t\t}\n\t\t}\n\n\t\tconst changes = [{ type: DELETE, path: [key], oldValue: oldValue, object: this.proxy }];\n\t\tcallObservers(this, changes);\n\n\t\treturn true;\n\t}\n}\n\nclass ObjectOMeta extends OMetaBase {\n\tconstructor(properties) {\n\t\tsuper(properties, prepareObject);\n\t}\n}\n\nclass ArrayOMeta extends OMetaBase {\n\tconstructor(properties) {\n\t\tsuper(properties, prepareArray);\n\t}\n\n\tget(target, key) {\n\t\tif (proxiedArrayMethods.hasOwnProperty(key)) {\n\t\t\treturn proxiedArrayMethods[key];\n\t\t} else {\n\t\t\treturn target[key];\n\t\t}\n\t}\n}\n\nclass TypedArrayOMeta extends OMetaBase {\n\tconstructor(properties) {\n\t\tsuper(properties, prepareTypedArray);\n\t}\n\n\tget(target, key) {\n\t\tif (proxiedTypedArrayMethods.hasOwnProperty(key)) {\n\t\t\treturn proxiedTypedArrayMethods[key];\n\t\t} else {\n\t\t\treturn target[key];\n\t\t}\n\t}\n}\n\nclass Observable {\n\tconstructor() {\n\t\tthrow new Error('Observable MAY NOT be created via constructor, see \"Observable.from\" API');\n\t}\n\n\tstatic from(target, options) {\n\t\tif (!target || typeof target !== 'object') {\n\t\t\tthrow new Error('observable MAY ONLY be created from a non-null object');\n\t\t} else if (target[oMetaKey]) {\n\t\t\treturn target;\n\t\t} else if (Array.isArray(target)) {\n\t\t\treturn new ArrayOMeta({ target: target, ownKey: null, parent: null, options: options }).proxy;\n\t\t} else if (ArrayBuffer.isView(target)) {\n\t\t\treturn new TypedArrayOMeta({ target: target, ownKey: null, parent: null, options: options }).proxy;\n\t\t} else if (target instanceof Date || target instanceof Error) {\n\t\t\tthrow new Error(`${target} found to be one of a on-observable types`);\n\t\t} else {\n\t\t\treturn new ObjectOMeta({ target: target, ownKey: null, parent: null, options: options }).proxy;\n\t\t}\n\t}\n\n\tstatic isObservable(input) {\n\t\treturn !!(input && input[oMetaKey]);\n\t}\n}\n\nObject.freeze(Observable);\n\nexport { Observable };","var __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nimport _g from \"./g\";\nexport default function utilsFactory(globals) {\n    var g = globals || _g;\n    var generateBareUrl = function (type, integrationID) { return \"https://api.easybase.io/\" + type + \"/\" + integrationID; };\n    var generateAuthBody = function () {\n        var stamp = Date.now();\n        return {\n            token: g.token,\n            token_time: ~~(g.session / (stamp % 64)),\n            now: stamp\n        };\n    };\n    function log() {\n        var params = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            params[_i] = arguments[_i];\n        }\n        if (g.options.logging) {\n            console.log.apply(console, __spreadArray([\"EASYBASE  \"], params));\n        }\n    }\n    return {\n        generateAuthBody: generateAuthBody,\n        generateBareUrl: generateBareUrl,\n        log: log\n    };\n}\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { POST_TYPES } from \"./types\";\nimport _g from \"./g\";\nimport utilsFactory from \"./utils\";\nimport fetch from 'cross-fetch';\nvar GA_AUTH_HASH = \"p8YpJmWxF\"; // https://support.google.com/analytics/answer/6366371?hl=en#hashed\nexport default function authFactory(globals) {\n    var _this = this;\n    var g = globals || _g;\n    var _a = utilsFactory(g), generateBareUrl = _a.generateBareUrl, generateAuthBody = _a.generateAuthBody, log = _a.log;\n    function _clearTokens() {\n        g.token = \"\";\n        g.refreshToken = \"\";\n        g.newTokenCallback();\n        g.userID = undefined;\n    }\n    var getUserAttributes = function () { return __awaiter(_this, void 0, void 0, function () {\n        var attrsRes, error_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 2, , 3]);\n                    return [4 /*yield*/, tokenPost(POST_TYPES.USER_ATTRIBUTES)];\n                case 1:\n                    attrsRes = _a.sent();\n                    g.analytics && g.analytics.track('getUserAttributes');\n                    return [2 /*return*/, attrsRes.data];\n                case 2:\n                    error_1 = _a.sent();\n                    log(error_1);\n                    return [2 /*return*/, error_1];\n                case 3: return [2 /*return*/];\n            }\n        });\n    }); };\n    var setUserAttribute = function (key, value) { return __awaiter(_this, void 0, void 0, function () {\n        var setAttrsRes, error_2;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 2, , 3]);\n                    return [4 /*yield*/, tokenPost(POST_TYPES.SET_ATTRIBUTE, {\n                            key: key,\n                            value: value\n                        })];\n                case 1:\n                    setAttrsRes = _a.sent();\n                    g.analytics && g.analytics.track('setUserAttribute');\n                    return [2 /*return*/, {\n                            success: setAttrsRes.success,\n                            message: JSON.stringify(setAttrsRes.data)\n                        }];\n                case 2:\n                    error_2 = _a.sent();\n                    return [2 /*return*/, {\n                            success: false,\n                            message: error_2.message || \"Error\",\n                            errorCode: error_2.errorCode || undefined\n                        }];\n                case 3: return [2 /*return*/];\n            }\n        });\n    }); };\n    var forgotPassword = function (username, emailTemplate) { return __awaiter(_this, void 0, void 0, function () {\n        var setAttrsRes, error_3;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 2, , 3]);\n                    return [4 /*yield*/, tokenPost(POST_TYPES.FORGOT_PASSWORD_SEND, {\n                            username: username,\n                            emailTemplate: emailTemplate\n                        })];\n                case 1:\n                    setAttrsRes = _a.sent();\n                    g.analytics && g.analytics.track('forgotPassword');\n                    return [2 /*return*/, {\n                            success: setAttrsRes.success,\n                            message: setAttrsRes.data\n                        }];\n                case 2:\n                    error_3 = _a.sent();\n                    return [2 /*return*/, {\n                            success: false,\n                            message: error_3.message || \"Error\",\n                            errorCode: error_3.errorCode || undefined\n                        }];\n                case 3: return [2 /*return*/];\n            }\n        });\n    }); };\n    var forgotPasswordConfirm = function (code, username, newPassword) { return __awaiter(_this, void 0, void 0, function () {\n        var setAttrsRes, error_4;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 2, , 3]);\n                    return [4 /*yield*/, tokenPost(POST_TYPES.FORGOT_PASSWORD_CONFIRM, {\n                            username: username,\n                            code: code,\n                            newPassword: newPassword\n                        })];\n                case 1:\n                    setAttrsRes = _a.sent();\n                    g.analytics && g.analytics.track('forgotPasswordConfirm');\n                    return [2 /*return*/, {\n                            success: setAttrsRes.success,\n                            message: setAttrsRes.data\n                        }];\n                case 2:\n                    error_4 = _a.sent();\n                    return [2 /*return*/, {\n                            success: false,\n                            message: error_4.message || \"Error\",\n                            errorCode: error_4.errorCode || undefined\n                        }];\n                case 3: return [2 /*return*/];\n            }\n        });\n    }); };\n    var signUp = function (newUserID, password, userAttributes) { return __awaiter(_this, void 0, void 0, function () {\n        var signUpRes, error_5;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _a.trys.push([0, 2, , 3]);\n                    return [4 /*yield*/, tokenPost(POST_TYPES.SIGN_UP, {\n                            newUserID: newUserID,\n                            password: password,\n                            userAttributes: userAttributes\n                        })];\n                case 1:\n                    signUpRes = _a.sent();\n                    g.analytics && g.analytics.track('signUp');\n                    return [2 /*return*/, {\n                            success: signUpRes.success,\n                            message: signUpRes.data\n                        }];\n                case 2:\n                    error_5 = _a.sent();\n                    return [2 /*return*/, {\n                            success: false,\n                            message: error_5.message || \"Error\",\n                            errorCode: error_5.errorCode || undefined\n                        }];\n                case 3: return [2 /*return*/];\n            }\n        });\n    }); };\n    var signIn = function (userID, password) { return __awaiter(_this, void 0, void 0, function () {\n        var t1, integrationType, res, resData_1, validTokenRes, elapsed, error_6;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    t1 = Date.now();\n                    g.session = Math.floor(100000000 + Math.random() * 900000000);\n                    integrationType = g.ebconfig.integration.split(\"-\")[0].toUpperCase() === \"PROJECT\" ? \"PROJECT\" : \"REACT\";\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 7, , 8]);\n                    return [4 /*yield*/, fetch(generateBareUrl(integrationType, g.integrationID), {\n                            method: \"POST\",\n                            headers: {\n                                'Eb-Post-Req': POST_TYPES.HANDSHAKE,\n                                'Accept': 'application/json',\n                                'Content-Type': 'application/json'\n                            },\n                            body: JSON.stringify({\n                                version: g.ebconfig.version,\n                                session: g.session,\n                                instance: g.instance,\n                                userID: userID,\n                                password: password\n                            })\n                        })];\n                case 2:\n                    res = _a.sent();\n                    return [4 /*yield*/, res.json()];\n                case 3:\n                    resData_1 = _a.sent();\n                    if (!resData_1.token) return [3 /*break*/, 5];\n                    g.token = resData_1.token;\n                    g.refreshToken = resData_1.refreshToken;\n                    g.newTokenCallback();\n                    g.userID = resData_1.userID;\n                    g.mounted = true;\n                    return [4 /*yield*/, tokenPost(POST_TYPES.VALID_TOKEN)];\n                case 4:\n                    validTokenRes = _a.sent();\n                    elapsed = Date.now() - t1;\n                    if (validTokenRes.success) {\n                        log(\"Valid auth initiation in \" + elapsed + \"ms\");\n                        if (g.analytics) {\n                            import('@aws-crypto/sha256-universal').then(function (c) {\n                                var hash = new c.Sha256;\n                                hash.update(GA_AUTH_HASH + resData_1.userID);\n                                hash.digest().then(function (hashOut) {\n                                    var hexHash = Array.prototype.map.call(hashOut, function (x) { return ('00' + x.toString(16)).slice(-2); }).join('');\n                                    g.analytics.track('signIn');\n                                    g.analytics.identify(hexHash);\n                                });\n                            });\n                        }\n                        return [2 /*return*/, {\n                                success: true,\n                                message: \"Successfully signed in user\"\n                            }];\n                    }\n                    else {\n                        return [2 /*return*/, {\n                                success: false,\n                                message: \"Could not sign in user\"\n                            }];\n                    }\n                    return [3 /*break*/, 6];\n                case 5: return [2 /*return*/, {\n                        success: false,\n                        message: \"Could not sign in user\",\n                        errorCode: resData_1.ErrorCode || undefined\n                    }];\n                case 6: return [3 /*break*/, 8];\n                case 7:\n                    error_6 = _a.sent();\n                    return [2 /*return*/, {\n                            success: false,\n                            message: error_6.message || \"Could not sign in user\",\n                            errorCode: error_6.errorCode || undefined\n                        }];\n                case 8: return [2 /*return*/];\n            }\n        });\n    }); };\n    var resetUserPassword = function (currentPassword, newPassword) { return __awaiter(_this, void 0, void 0, function () {\n        var setAttrsRes, error_7;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (typeof newPassword !== \"string\" || newPassword.length > 100) {\n                        return [2 /*return*/, {\n                                success: false,\n                                message: \"newPassword must be of type string\"\n                            }];\n                    }\n                    if (typeof currentPassword !== \"string\" || currentPassword.length > 100) {\n                        return [2 /*return*/, {\n                                success: false,\n                                message: \"currentPassword must be of type string\"\n                            }];\n                    }\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, tokenPost(POST_TYPES.RESET_PASSWORD, { currentPassword: currentPassword, newPassword: newPassword })];\n                case 2:\n                    setAttrsRes = _a.sent();\n                    g.analytics && g.analytics.track('resetUserPassword');\n                    return [2 /*return*/, {\n                            success: setAttrsRes.success,\n                            message: JSON.stringify(setAttrsRes.data)\n                        }];\n                case 3:\n                    error_7 = _a.sent();\n                    return [2 /*return*/, {\n                            success: false,\n                            message: error_7.message || \"Error\",\n                            errorCode: error_7.errorCode || undefined\n                        }];\n                case 4: return [2 /*return*/];\n            }\n        });\n    }); };\n    var userID = function () { return g.userID || undefined; };\n    var signOut = function () {\n        g.token = \"\";\n        g.newTokenCallback();\n        g.userID = undefined;\n    };\n    var initAuth = function () { return __awaiter(_this, void 0, void 0, function () {\n        var t1, integrationType, res, resData, validTokenRes, elapsed, error_8;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    t1 = Date.now();\n                    g.session = Math.floor(100000000 + Math.random() * 900000000);\n                    log(\"Handshaking on\" + g.instance + \" instance\");\n                    integrationType = g.ebconfig.integration.split(\"-\")[0].toUpperCase() === \"PROJECT\" ? \"PROJECT\" : \"REACT\";\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 7, , 8]);\n                    return [4 /*yield*/, fetch(generateBareUrl(integrationType, g.integrationID), {\n                            method: \"POST\",\n                            headers: {\n                                'Eb-Post-Req': POST_TYPES.HANDSHAKE,\n                                'Accept': 'application/json',\n                                'Content-Type': 'application/json'\n                            },\n                            body: JSON.stringify({\n                                version: g.ebconfig.version,\n                                tt: g.ebconfig.tt,\n                                session: g.session,\n                                instance: g.instance\n                            })\n                        })];\n                case 2:\n                    res = _a.sent();\n                    return [4 /*yield*/, res.json()];\n                case 3:\n                    resData = _a.sent();\n                    if (!resData.token) return [3 /*break*/, 5];\n                    g.token = resData.token;\n                    g.mounted = true;\n                    return [4 /*yield*/, tokenPost(POST_TYPES.VALID_TOKEN)];\n                case 4:\n                    validTokenRes = _a.sent();\n                    elapsed = Date.now() - t1;\n                    if (validTokenRes.success) {\n                        log(\"Valid auth initiation in \" + elapsed + \"ms\");\n                        return [2 /*return*/, true];\n                    }\n                    else {\n                        return [2 /*return*/, false];\n                    }\n                    return [3 /*break*/, 6];\n                case 5: return [2 /*return*/, false];\n                case 6: return [3 /*break*/, 8];\n                case 7:\n                    error_8 = _a.sent();\n                    console.error(error_8);\n                    return [2 /*return*/, false];\n                case 8: return [2 /*return*/];\n            }\n        });\n    }); };\n    var tokenPost = function (postType, body) { return __awaiter(_this, void 0, void 0, function () {\n        var integrationType, res, resData, req_res, error_9, err;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!!g.mounted) return [3 /*break*/, 2];\n                    return [4 /*yield*/, initAuth()];\n                case 1:\n                    _a.sent();\n                    _a.label = 2;\n                case 2:\n                    integrationType = g.ebconfig.integration.split(\"-\")[0].toUpperCase() === \"PROJECT\" ? \"PROJECT\" : \"REACT\";\n                    return [4 /*yield*/, fetch(generateBareUrl(integrationType, g.integrationID), {\n                            method: \"POST\",\n                            headers: {\n                                'Eb-Post-Req': postType,\n                                'Accept': 'application/json',\n                                'Content-Type': 'application/json'\n                            },\n                            body: JSON.stringify(__assign({ _auth: generateAuthBody() }, body))\n                        })];\n                case 3:\n                    res = _a.sent();\n                    return [4 /*yield*/, res.json()];\n                case 4:\n                    resData = _a.sent();\n                    if (!({}.hasOwnProperty.call(resData, 'ErrorCode') || {}.hasOwnProperty.call(resData, 'code'))) return [3 /*break*/, 14];\n                    if (!(resData.ErrorCode === \"TokenExpired\")) return [3 /*break*/, 12];\n                    if (!(integrationType === \"PROJECT\")) return [3 /*break*/, 9];\n                    _a.label = 5;\n                case 5:\n                    _a.trys.push([5, 7, , 8]);\n                    return [4 /*yield*/, tokenPost(POST_TYPES.REQUEST_TOKEN, {\n                            refreshToken: g.refreshToken,\n                            token: g.token\n                        })];\n                case 6:\n                    req_res = _a.sent();\n                    if (req_res.success) {\n                        g.token = req_res.data.token;\n                        g.newTokenCallback();\n                        return [2 /*return*/, tokenPost(postType, body)];\n                    }\n                    else {\n                        throw new Error(req_res.data || \"Error\");\n                    }\n                    return [3 /*break*/, 8];\n                case 7:\n                    error_9 = _a.sent();\n                    _clearTokens();\n                    return [2 /*return*/, {\n                            success: false,\n                            data: error_9.message || error_9\n                        }];\n                case 8: return [3 /*break*/, 11];\n                case 9: return [4 /*yield*/, initAuth()];\n                case 10:\n                    _a.sent();\n                    _a.label = 11;\n                case 11: return [2 /*return*/, tokenPost(postType, body)];\n                case 12:\n                    err = new Error(resData.body || resData.ErrorCode || resData.code || \"Error\");\n                    err.errorCode = resData.ErrorCode || resData.code;\n                    throw err;\n                case 13: return [3 /*break*/, 15];\n                case 14: return [2 /*return*/, {\n                        success: resData.success,\n                        data: resData.body\n                    }];\n                case 15: return [2 /*return*/];\n            }\n        });\n    }); };\n    var tokenPostAttachment = function (formData, customHeaders) { return __awaiter(_this, void 0, void 0, function () {\n        var regularAuthbody, attachmentAuth, integrationType, res, resData, req_res, error_10, err;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    if (!!g.mounted) return [3 /*break*/, 2];\n                    return [4 /*yield*/, initAuth()];\n                case 1:\n                    _a.sent();\n                    _a.label = 2;\n                case 2:\n                    regularAuthbody = generateAuthBody();\n                    attachmentAuth = {\n                        'Eb-token': regularAuthbody.token,\n                        'Eb-token-time': regularAuthbody.token_time,\n                        'Eb-now': regularAuthbody.now\n                    };\n                    integrationType = g.ebconfig.integration.split(\"-\")[0].toUpperCase() === \"PROJECT\" ? \"PROJECT\" : \"REACT\";\n                    return [4 /*yield*/, fetch(generateBareUrl(integrationType, g.integrationID), {\n                            method: \"POST\",\n                            headers: __assign(__assign({ 'Eb-Post-Req': POST_TYPES.UPLOAD_ATTACHMENT }, customHeaders), attachmentAuth),\n                            body: formData\n                        })];\n                case 3:\n                    res = _a.sent();\n                    return [4 /*yield*/, res.json()];\n                case 4:\n                    resData = _a.sent();\n                    if (!({}.hasOwnProperty.call(resData, 'ErrorCode') || {}.hasOwnProperty.call(resData, 'code'))) return [3 /*break*/, 14];\n                    if (!(resData.ErrorCode === \"TokenExpired\")) return [3 /*break*/, 12];\n                    if (!(integrationType === \"PROJECT\")) return [3 /*break*/, 9];\n                    _a.label = 5;\n                case 5:\n                    _a.trys.push([5, 7, , 8]);\n                    return [4 /*yield*/, tokenPost(POST_TYPES.REQUEST_TOKEN, {\n                            refreshToken: g.refreshToken,\n                            token: g.token\n                        })];\n                case 6:\n                    req_res = _a.sent();\n                    if (req_res.success) {\n                        g.token = req_res.data.token;\n                        g.newTokenCallback();\n                        return [2 /*return*/, tokenPostAttachment(formData, customHeaders)];\n                    }\n                    else {\n                        throw new Error(req_res.data || \"Error\");\n                    }\n                    return [3 /*break*/, 8];\n                case 7:\n                    error_10 = _a.sent();\n                    _clearTokens();\n                    return [2 /*return*/, {\n                            success: false,\n                            data: error_10.message || error_10\n                        }];\n                case 8: return [3 /*break*/, 11];\n                case 9: return [4 /*yield*/, initAuth()];\n                case 10:\n                    _a.sent();\n                    _a.label = 11;\n                case 11: return [2 /*return*/, tokenPostAttachment(formData, customHeaders)];\n                case 12:\n                    err = new Error(resData.body || resData.ErrorCode || resData.code || \"Error\");\n                    err.errorCode = resData.ErrorCode || resData.code;\n                    throw err;\n                case 13: return [3 /*break*/, 15];\n                case 14: return [2 /*return*/, {\n                        success: resData.success,\n                        data: resData.body\n                    }];\n                case 15: return [2 /*return*/];\n            }\n        });\n    }); };\n    return {\n        initAuth: initAuth,\n        tokenPost: tokenPost,\n        tokenPostAttachment: tokenPostAttachment,\n        signUp: signUp,\n        setUserAttribute: setUserAttribute,\n        getUserAttributes: getUserAttributes,\n        signIn: signIn,\n        signOut: signOut,\n        resetUserPassword: resetUserPassword,\n        forgotPassword: forgotPassword,\n        forgotPasswordConfirm: forgotPasswordConfirm,\n        userID: userID\n    };\n}\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport { POST_TYPES } from \"./types\";\nimport _g from \"./g\";\nimport authFactory from \"./auth\";\nexport default function tableFactory(globals) {\n    var _this = this;\n    var g = globals || _g;\n    var tokenPost = authFactory(g).tokenPost;\n    var Query = function (options) { return __awaiter(_this, void 0, void 0, function () {\n        var defaultOptions, fullOptions, res;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    defaultOptions = {\n                        queryName: \"\"\n                    };\n                    fullOptions = __assign(__assign({}, defaultOptions), options);\n                    return [4 /*yield*/, tokenPost(POST_TYPES.GET_QUERY, fullOptions)];\n                case 1:\n                    res = _a.sent();\n                    if (res.success) {\n                        return [2 /*return*/, res.data];\n                    }\n                    else {\n                        return [2 /*return*/, []];\n                    }\n                    return [2 /*return*/];\n            }\n        });\n    }); };\n    function fullTableSize(tableName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var res;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, tokenPost(POST_TYPES.TABLE_SIZE, tableName ? { tableName: tableName } : {})];\n                    case 1:\n                        res = _a.sent();\n                        if (res.success) {\n                            return [2 /*return*/, res.data];\n                        }\n                        else {\n                            return [2 /*return*/, 0];\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    }\n    function tableTypes(tableName) {\n        return __awaiter(this, void 0, void 0, function () {\n            var res;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, tokenPost(POST_TYPES.COLUMN_TYPES, tableName ? { tableName: tableName } : {})];\n                    case 1:\n                        res = _a.sent();\n                        if (res.success) {\n                            return [2 /*return*/, res.data];\n                        }\n                        else {\n                            return [2 /*return*/, {}];\n                        }\n                        return [2 /*return*/];\n                }\n            });\n        });\n    }\n    return {\n        Query: Query,\n        fullTableSize: fullTableSize,\n        tableTypes: tableTypes\n    };\n}\n","var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport _g from \"./g\";\nimport easyqb from 'easyqb';\nimport authFactory from \"./auth\";\nimport { POST_TYPES, DB_STATUS, EXECUTE_COUNT } from \"./types\";\nexport default function dbFactory(globals) {\n    var _this = this;\n    var g = globals || _g;\n    var tokenPost = authFactory(g).tokenPost;\n    var _listenerIndex = 0;\n    var _listeners = {};\n    function _runListeners() {\n        var params = [];\n        for (var _i = 0; _i < arguments.length; _i++) {\n            params[_i] = arguments[_i];\n        }\n        for (var _a = 0, _b = Object.values(_listeners); _a < _b.length; _a++) {\n            var cb = _b[_a];\n            cb.apply(void 0, params);\n        }\n    }\n    var dbEventListener = function (callback) {\n        var currKey = '' + _listenerIndex++;\n        _listeners[currKey] = callback;\n        return function () {\n            delete _listeners[currKey];\n        };\n    };\n    var allCallback = function (trx, tableName, userAssociatedRecordsOnly) { return __awaiter(_this, void 0, void 0, function () {\n        var res, error_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    trx.count = \"all\";\n                    trx.tableName = tableName;\n                    if (userAssociatedRecordsOnly)\n                        trx.userAssociatedRecordsOnly = userAssociatedRecordsOnly;\n                    _runListeners(DB_STATUS.PENDING, trx.type, EXECUTE_COUNT.ALL, tableName !== \"untable\" ? tableName : null);\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, tokenPost(POST_TYPES.EASY_QB, trx)];\n                case 2:\n                    res = _a.sent();\n                    if (res.success) {\n                        _runListeners(DB_STATUS.SUCCESS, trx.type, EXECUTE_COUNT.ALL, tableName !== \"untable\" ? tableName : null, res.data);\n                        return [2 /*return*/, res.data];\n                    }\n                    else {\n                        _runListeners(DB_STATUS.ERROR, trx.type, EXECUTE_COUNT.ALL, tableName !== \"untable\" ? tableName : null);\n                        return [2 /*return*/, res];\n                    }\n                    return [3 /*break*/, 4];\n                case 3:\n                    error_1 = _a.sent();\n                    console.warn(error_1);\n                    _runListeners(DB_STATUS.ERROR, trx.type, EXECUTE_COUNT.ALL, tableName !== \"untable\" ? tableName : null);\n                    return [2 /*return*/, []];\n                case 4: return [2 /*return*/];\n            }\n        });\n    }); };\n    var oneCallback = function (trx, tableName, userAssociatedRecordsOnly) { return __awaiter(_this, void 0, void 0, function () {\n        var res, error_2;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    trx.count = \"one\";\n                    trx.tableName = tableName;\n                    if (userAssociatedRecordsOnly)\n                        trx.userAssociatedRecordsOnly = userAssociatedRecordsOnly;\n                    _runListeners(DB_STATUS.PENDING, trx.type, EXECUTE_COUNT.ONE, tableName !== \"untable\" ? tableName : null);\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, tokenPost(POST_TYPES.EASY_QB, trx)];\n                case 2:\n                    res = _a.sent();\n                    if (res.success) {\n                        _runListeners(DB_STATUS.SUCCESS, trx.type, EXECUTE_COUNT.ONE, tableName !== \"untable\" ? tableName : null, res.data);\n                        return [2 /*return*/, res.data];\n                    }\n                    else {\n                        _runListeners(DB_STATUS.ERROR, trx.type, EXECUTE_COUNT.ONE, tableName !== \"untable\" ? tableName : null);\n                        return [2 /*return*/, res];\n                    }\n                    return [3 /*break*/, 4];\n                case 3:\n                    error_2 = _a.sent();\n                    console.warn(error_2);\n                    _runListeners(DB_STATUS.ERROR, trx.type, EXECUTE_COUNT.ONE, tableName !== \"untable\" ? tableName : null);\n                    return [2 /*return*/, {}];\n                case 4: return [2 /*return*/];\n            }\n        });\n    }); };\n    var db = function (tableName, userAssociatedRecordsOnly) {\n        if (tableName && typeof tableName === \"string\") {\n            return easyqb({ allCallback: allCallback, oneCallback: oneCallback, userAssociatedRecordsOnly: userAssociatedRecordsOnly, tableName: tableName.toUpperCase() })(tableName.replace(/[^0-9a-zA-Z]/g, '_').toUpperCase());\n        }\n        else {\n            return easyqb({ allCallback: allCallback, oneCallback: oneCallback, userAssociatedRecordsOnly: userAssociatedRecordsOnly, tableName: \"untable\" })(\"untable\");\n        }\n    };\n    return {\n        db: db,\n        dbEventListener: dbEventListener,\n        e: easyqb().e\n    };\n}\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArray = (this && this.__spreadArray) || function (to, from) {\n    for (var i = 0, il = from.length, j = to.length; i < il; i++, j++)\n        to[j] = from[i];\n    return to;\n};\nimport { POST_TYPES } from \"./types\";\nimport { gFactory } from \"./g\";\nimport deepEqual from \"fast-deep-equal\";\nimport { Observable } from \"./object-observer\";\nimport imageExtensions from \"./assets/image-extensions.json\";\nimport videoExtensions from \"./assets/video-extensions.json\";\nimport authFactory from \"./auth\";\nimport utilsFactory from \"./utils\";\nimport tableFactory from \"./table\";\nimport dbFactory from './db';\nexport default function EasybaseProvider(_a) {\n    var _this = this;\n    var ebconfig = _a.ebconfig, options = _a.options;\n    if (typeof ebconfig !== 'object' || ebconfig === null || ebconfig === undefined) {\n        console.error(\"No ebconfig object passed. do `import ebconfig from \\\"./ebconfig.js\\\"` and pass it to the Easybase provider\");\n        return;\n    }\n    else if (!ebconfig.integration) {\n        console.error(\"Invalid ebconfig object passed. Download ebconfig.js from Easybase.io and try again.\");\n        return;\n    }\n    var g = gFactory(ebconfig.integration, options);\n    var _b = authFactory(g), tokenPost = _b.tokenPost, tokenPostAttachment = _b.tokenPostAttachment, signUp = _b.signUp, setUserAttribute = _b.setUserAttribute, getUserAttributes = _b.getUserAttributes, signIn = _b.signIn, signOut = _b.signOut, resetUserPassword = _b.resetUserPassword, forgotPassword = _b.forgotPassword, forgotPasswordConfirm = _b.forgotPasswordConfirm, userID = _b.userID;\n    var _c = tableFactory(g), Query = _c.Query, fullTableSize = _c.fullTableSize, tableTypes = _c.tableTypes;\n    var _d = dbFactory(g), db = _d.db, dbEventListener = _d.dbEventListener, e = _d.e;\n    var log = utilsFactory(g).log;\n    // eslint-disable-next-line dot-notation\n    var isIE = typeof document !== 'undefined' && !!document['documentMode'];\n    if (isIE) {\n        console.error(\"EASYBASE  easybasejs does not support Internet Explorer. Please use a different browser.\");\n    }\n    g.options = __assign({}, options);\n    g.integrationID = ebconfig.integration;\n    g.ebconfig = ebconfig;\n    if (g.ebconfig.tt && g.ebconfig.integration.split(\"-\")[0].toUpperCase() !== \"PROJECT\") {\n        g.mounted = false;\n    }\n    else {\n        g.mounted = true;\n    }\n    g.instance = \"Node\";\n    var _isFrameInitialized = true;\n    var _frameConfiguration = {\n        offset: 0,\n        limit: 0\n    };\n    var _observedChangeStack = [];\n    var _recordIdMap = new WeakMap();\n    var _observableFrame = {\n        observe: function (_) { },\n        unobserve: function () { }\n    };\n    var _frame = [];\n    var isSyncing = false;\n    function Frame(index) {\n        if (typeof index === \"number\") {\n            return _observableFrame[index];\n        }\n        else {\n            return _observableFrame;\n        }\n    }\n    var _recordIDExists = function (record) { return !!_recordIdMap.get(record); };\n    var configureFrame = function (options) {\n        _frameConfiguration = __assign({}, _frameConfiguration);\n        if (options.limit !== undefined)\n            _frameConfiguration.limit = options.limit;\n        if (options.offset !== undefined && options.offset >= 0)\n            _frameConfiguration.offset = options.offset;\n        if (options.tableName !== undefined)\n            _frameConfiguration.tableName = options.tableName;\n        _isFrameInitialized = false;\n        return {\n            message: \"Successfully configured frame. Run sync() for changes to be shown in frame\",\n            success: true\n        };\n    };\n    var currentConfiguration = function () { return (__assign({}, _frameConfiguration)); };\n    var deleteRecord = function (options) { return __awaiter(_this, void 0, void 0, function () {\n        var _frameRecord, res, res, error_1;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _frameRecord = _frame.find(function (ele) { return deepEqual(ele, options.record); });\n                    if (!(_frameRecord && _recordIdMap.get(_frameRecord))) return [3 /*break*/, 2];\n                    return [4 /*yield*/, tokenPost(POST_TYPES.SYNC_DELETE, {\n                            _id: _recordIdMap.get(_frameRecord),\n                            tableName: options.tableName\n                        })];\n                case 1:\n                    res = _a.sent();\n                    return [2 /*return*/, {\n                            success: res.success,\n                            message: res.data\n                        }];\n                case 2:\n                    _a.trys.push([2, 4, , 5]);\n                    return [4 /*yield*/, tokenPost(POST_TYPES.SYNC_DELETE, {\n                            record: options.record,\n                            tableName: options.tableName\n                        })];\n                case 3:\n                    res = _a.sent();\n                    return [2 /*return*/, {\n                            success: res.success,\n                            message: res.data\n                        }];\n                case 4:\n                    error_1 = _a.sent();\n                    console.error(\"Easybase Error: deleteRecord failed \", error_1);\n                    return [2 /*return*/, {\n                            success: false,\n                            message: \"Easybase Error: deleteRecord failed \" + error_1,\n                            errorCode: error_1.errorCode || undefined\n                        }];\n                case 5: return [2 /*return*/];\n            }\n        });\n    }); };\n    var addRecord = function (options) { return __awaiter(_this, void 0, void 0, function () {\n        var defaultValues, fullOptions, res, error_2;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    defaultValues = {\n                        insertAtEnd: false,\n                        newRecord: {},\n                        tableName: undefined\n                    };\n                    fullOptions = __assign(__assign({}, defaultValues), options);\n                    _a.label = 1;\n                case 1:\n                    _a.trys.push([1, 3, , 4]);\n                    return [4 /*yield*/, tokenPost(POST_TYPES.SYNC_INSERT, fullOptions)];\n                case 2:\n                    res = _a.sent();\n                    return [2 /*return*/, {\n                            message: res.data,\n                            success: res.success\n                        }];\n                case 3:\n                    error_2 = _a.sent();\n                    console.error(\"Easybase Error: addRecord failed \", error_2);\n                    return [2 /*return*/, {\n                            message: \"Easybase Error: addRecord failed \" + error_2,\n                            success: false,\n                            errorCode: error_2.errorCode || undefined\n                        }];\n                case 4: return [2 /*return*/];\n            }\n        });\n    }); };\n    // Only allow the deletion of one element at a time\n    // First handle shifting of the array size. Then iterate\n    var sync = function () { return __awaiter(_this, void 0, void 0, function () {\n        var _realignFrames, res, res, error_3;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _realignFrames = function (newData) {\n                        var isNewDataTheSame = true;\n                        if (newData.length !== _frame.length) {\n                            isNewDataTheSame = false;\n                        }\n                        else {\n                            for (var i = 0; i < newData.length; i++) {\n                                var newDataNoId = __assign({}, newData[i]);\n                                delete newDataNoId._id;\n                                if (!deepEqual(newDataNoId, _frame[i])) {\n                                    isNewDataTheSame = false;\n                                    break;\n                                }\n                            }\n                        }\n                        if (!isNewDataTheSame) {\n                            var oldframe = __spreadArray([], _frame);\n                            oldframe.length = newData.length;\n                            _recordIdMap = new WeakMap();\n                            for (var i = 0; i < newData.length; i++) {\n                                var currNewEle = newData[i];\n                                _recordIdMap.set(currNewEle, currNewEle._id);\n                                delete currNewEle._id;\n                                oldframe[i] = currNewEle;\n                            }\n                            _frame = oldframe;\n                            _observableFrame.unobserve();\n                            _observableFrame = Observable.from(_frame);\n                            _observableFrame.observe(function (allChanges) {\n                                allChanges.forEach(function (change) {\n                                    _observedChangeStack.push({\n                                        type: change.type,\n                                        path: change.path,\n                                        value: change.value,\n                                        _id: _recordIdMap.get(_frame[Number(change.path[0])])\n                                        // Not bringing change.object or change.oldValue\n                                    });\n                                    log(JSON.stringify({\n                                        type: change.type,\n                                        path: change.path,\n                                        value: change.value,\n                                        _id: _recordIdMap.get(_frame[Number(change.path[0])])\n                                        // Not bringing change.object or change.oldValue\n                                    }));\n                                });\n                            });\n                        }\n                    };\n                    if (isSyncing) {\n                        return [2 /*return*/, {\n                                success: false,\n                                message: \"Easybase Error: the provider is currently syncing, use 'await sync()' before calling sync() again\"\n                            }];\n                    }\n                    isSyncing = true;\n                    if (!_isFrameInitialized) return [3 /*break*/, 2];\n                    if (!(_observedChangeStack.length > 0)) return [3 /*break*/, 2];\n                    log(\"Stack change: \", _observedChangeStack);\n                    return [4 /*yield*/, tokenPost(POST_TYPES.SYNC_STACK, __assign({ stack: _observedChangeStack }, _frameConfiguration))];\n                case 1:\n                    res = _a.sent();\n                    if (res.success) {\n                        _observedChangeStack.length = 0;\n                    }\n                    _a.label = 2;\n                case 2:\n                    _a.trys.push([2, 4, , 5]);\n                    return [4 /*yield*/, tokenPost(POST_TYPES.GET_FRAME, _frameConfiguration)];\n                case 3:\n                    res = _a.sent();\n                    // Check if the array recieved from db is the same as frame\n                    // If not, update it and send useFrameEffect\n                    if (res.success === false) {\n                        console.error(res.data);\n                        isSyncing = false;\n                        return [2 /*return*/, {\n                                success: false,\n                                message: \"\" + res.data\n                            }];\n                    }\n                    else {\n                        _isFrameInitialized = true;\n                        _realignFrames(res.data);\n                        isSyncing = false;\n                        return [2 /*return*/, {\n                                message: 'Success. Call frame for data',\n                                success: true\n                            }];\n                    }\n                    return [3 /*break*/, 5];\n                case 4:\n                    error_3 = _a.sent();\n                    console.error(\"Easybase Error: get failed \", error_3);\n                    isSyncing = false;\n                    return [2 /*return*/, {\n                            success: false,\n                            message: \"Easybase Error: get failed \" + error_3,\n                            errorCode: error_3.errorCode || undefined\n                        }];\n                case 5: return [2 /*return*/];\n            }\n        });\n    }); };\n    var updateRecordImage = function (options) { return __awaiter(_this, void 0, void 0, function () {\n        var res;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, _updateRecordAttachment(options, \"image\")];\n                case 1:\n                    res = _a.sent();\n                    return [2 /*return*/, res];\n            }\n        });\n    }); };\n    var updateRecordVideo = function (options) { return __awaiter(_this, void 0, void 0, function () {\n        var res;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, _updateRecordAttachment(options, \"video\")];\n                case 1:\n                    res = _a.sent();\n                    return [2 /*return*/, res];\n            }\n        });\n    }); };\n    var updateRecordFile = function (options) { return __awaiter(_this, void 0, void 0, function () {\n        var res;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, _updateRecordAttachment(options, \"file\")];\n                case 1:\n                    res = _a.sent();\n                    return [2 /*return*/, res];\n            }\n        });\n    }); };\n    var _updateRecordAttachment = function (options, type) { return __awaiter(_this, void 0, void 0, function () {\n        function isFileFromURI(f) {\n            return f.uri !== undefined;\n        }\n        var _frameRecord, ext, formData, customHeaders, res;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0:\n                    _frameRecord = _frame.find(function (ele) { return deepEqual(ele, options.record); });\n                    if (_frameRecord === undefined || !_recordIDExists(_frameRecord)) {\n                        log(\"Attempting to add attachment to a new record that has not been synced. Please sync() before trying to add attachment.\");\n                        return [2 /*return*/, {\n                                success: false,\n                                message: \"Attempting to add attachment to a new record that has not been synced. Please sync() before trying to add attachment.\"\n                            }];\n                    }\n                    ext = options.attachment.name.split(\".\").pop().toLowerCase();\n                    log(ext);\n                    if (type === \"image\" && !imageExtensions.includes(ext)) {\n                        return [2 /*return*/, {\n                                success: false,\n                                message: \"Image files must have a proper image extension in the file name\"\n                            }];\n                    }\n                    if (type === \"video\" && !videoExtensions.includes(ext)) {\n                        return [2 /*return*/, {\n                                success: false,\n                                message: \"Video files must have a proper video extension in the file name\"\n                            }];\n                    }\n                    formData = new FormData();\n                    if (isFileFromURI(options.attachment)) {\n                        formData.append(\"file\", options.attachment);\n                        formData.append(\"name\", options.attachment.name);\n                    }\n                    else {\n                        formData.append(\"file\", options.attachment);\n                        formData.append(\"name\", options.attachment.name);\n                    }\n                    customHeaders = {\n                        'Eb-upload-type': type,\n                        'Eb-column-name': options.columnName,\n                        'Eb-record-id': _recordIdMap.get(_frameRecord),\n                        'Eb-table-name': options.tableName\n                    };\n                    return [4 /*yield*/, tokenPostAttachment(formData, customHeaders)];\n                case 1:\n                    res = _a.sent();\n                    return [4 /*yield*/, sync()];\n                case 2:\n                    _a.sent();\n                    return [2 /*return*/, {\n                            message: res.data,\n                            success: res.success\n                        }];\n            }\n        });\n    }); };\n    var c = {\n        /** +++ Will be deprecated */\n        configureFrame: configureFrame,\n        addRecord: addRecord,\n        deleteRecord: deleteRecord,\n        sync: sync,\n        Frame: Frame,\n        currentConfiguration: currentConfiguration,\n        /** --- */\n        updateRecordImage: updateRecordImage,\n        updateRecordVideo: updateRecordVideo,\n        updateRecordFile: updateRecordFile,\n        fullTableSize: fullTableSize,\n        tableTypes: tableTypes,\n        Query: Query,\n        signIn: signIn,\n        signOut: signOut,\n        signUp: signUp,\n        resetUserPassword: resetUserPassword,\n        setUserAttribute: setUserAttribute,\n        getUserAttributes: getUserAttributes,\n        db: db,\n        dbEventListener: dbEventListener,\n        e: e,\n        forgotPassword: forgotPassword,\n        forgotPasswordConfirm: forgotPasswordConfirm,\n        userID: userID\n    };\n    return c;\n}\n","var __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nimport fetch from 'cross-fetch';\nexport { default as EasybaseProvider } from \"./EasybaseProvider/EasybaseProvider\";\nvar generateBareUrl = function (type, integrationID) { return \"https://api.easybase.io/\" + type + \"/\" + integrationID; };\nvar isBadInt = function (my_int) { return my_int !== undefined && my_int !== null && Math.floor(my_int) !== my_int; };\nvar isBadString = function (my_string) { return my_string !== undefined && my_string !== null && typeof my_string !== \"string\"; };\nvar isBadIntegrationID = function (my_string) { return my_string === undefined || my_string === null || typeof my_string !== \"string\"; };\nvar isBadObject = function (my_obj) { return my_obj !== undefined && my_obj !== null && typeof my_obj !== \"object\"; };\nvar isBadBool = function (my_bool) { return my_bool !== undefined && my_bool !== null && typeof my_bool !== \"boolean\"; };\n/**\n *\n * @param {GetOptions} options GetOptions.\n * @returns {Promise<Array>} Array of records.\n *\n */\nexport function get(options) {\n    var defaultOptions = {\n        integrationID: \"\",\n        offset: undefined,\n        limit: undefined,\n        authentication: undefined,\n        customQuery: undefined\n    };\n    var _a = __assign(__assign({}, defaultOptions), options), integrationID = _a.integrationID, offset = _a.offset, limit = _a.limit, authentication = _a.authentication, customQuery = _a.customQuery;\n    if (isBadIntegrationID(integrationID))\n        throw new Error(\"integrationID is required and must be a string\");\n    if (isBadInt(offset))\n        throw new Error(\"offset must be an integer\");\n    if (isBadInt(limit))\n        throw new Error(\"limit must be an integer\");\n    if (isBadString(authentication))\n        throw new Error(\"authentication must be a string or null\");\n    if (isBadObject(customQuery))\n        throw new Error(\"customQuery must be an object or null\");\n    return new Promise(function (resolve, reject) {\n        try {\n            var fetch_body = {};\n            if (typeof customQuery === \"object\")\n                fetch_body = __assign({}, customQuery);\n            if (offset !== undefined)\n                fetch_body.offset = offset;\n            if (limit !== undefined)\n                fetch_body.limit = limit;\n            if (authentication !== undefined)\n                fetch_body.authentication = authentication;\n            fetch(generateBareUrl('get', integrationID), {\n                method: \"POST\",\n                body: JSON.stringify(fetch_body),\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                }\n            })\n                .then(function (res) { return res.json(); })\n                .then(function (resData) {\n                if ({}.hasOwnProperty.call(resData, 'ErrorCode')) {\n                    console.error(resData.message);\n                    resolve([resData.message]);\n                }\n                else\n                    resolve(resData);\n            });\n        }\n        catch (err) {\n            reject(err);\n        }\n    });\n}\n/**\n *\n * @param {PostOptions} options PostOptions\n * @returns {Promise<String>} Post status.\n *\n */\nexport function post(options) {\n    var defaultValues = {\n        integrationID: \"\",\n        newRecord: undefined,\n        authentication: undefined,\n        insertAtEnd: undefined\n    };\n    var _a = __assign(__assign({}, defaultValues), options), integrationID = _a.integrationID, newRecord = _a.newRecord, authentication = _a.authentication, insertAtEnd = _a.insertAtEnd;\n    if (isBadIntegrationID(integrationID))\n        throw new Error(\"integrationID is required and must be a string\");\n    if (isBadObject(newRecord))\n        throw new Error(\"newRecord is required and must be a string\");\n    if (isBadString(authentication))\n        throw new Error(\"authentication must be a string or null\");\n    if (isBadBool(insertAtEnd))\n        throw new Error(\"insertAtEnd must be a boolean or null\");\n    return new Promise(function (resolve, reject) {\n        try {\n            var fetch_body = __assign({}, newRecord);\n            if (authentication !== undefined)\n                fetch_body.authentication = authentication;\n            if (insertAtEnd !== undefined)\n                fetch_body.insertAtEnd = insertAtEnd;\n            fetch(generateBareUrl('post', integrationID), {\n                method: \"POST\",\n                body: JSON.stringify(fetch_body),\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                }\n            })\n                .then(function (res) { return res.json(); })\n                .then(function (resData) {\n                if ({}.hasOwnProperty.call(resData, 'ErrorCode'))\n                    console.error(resData.message);\n                resolve(resData);\n            });\n        }\n        catch (err) {\n            reject(err);\n        }\n    });\n}\n/**\n *\n * @param {UpdateOptions} options UpdateOptions\n * @returns {Promise<String>} Update status.\n */\nexport function update(options) {\n    var defaultValues = {\n        integrationID: \"\",\n        updateValues: undefined,\n        authentication: undefined,\n        customQuery: undefined\n    };\n    var _a = __assign(__assign({}, defaultValues), options), integrationID = _a.integrationID, updateValues = _a.updateValues, authentication = _a.authentication, customQuery = _a.customQuery;\n    if (isBadIntegrationID(integrationID))\n        throw new Error(\"integrationID is required and must be a string\");\n    if (isBadObject(updateValues) || updateValues === undefined)\n        throw new Error(\"updateValues is required and must be a string\");\n    if (isBadString(authentication))\n        throw new Error(\"authentication must be a string or null\");\n    if (isBadObject(customQuery))\n        throw new Error(\"customQuery must be an object or null\");\n    return new Promise(function (resolve, reject) {\n        try {\n            var fetch_body = __assign({ updateValues: updateValues }, customQuery);\n            if (authentication !== undefined)\n                fetch_body.authentication = authentication;\n            fetch(generateBareUrl('update', integrationID), {\n                method: \"POST\",\n                body: JSON.stringify(fetch_body),\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                }\n            })\n                .then(function (res) { return res.json(); })\n                .then(function (resData) {\n                if ({}.hasOwnProperty.call(resData, 'ErrorCode'))\n                    console.error(resData.message);\n                resolve(resData.message);\n            });\n        }\n        catch (err) {\n            reject(err);\n        }\n    });\n}\n/**\n *\n * @param {DeleteOptions} options DeleteOptions\n * @return {Promise<String>} Delete status.\n */\nexport function Delete(options) {\n    var defaultValues = {\n        integrationID: \"\",\n        authentication: undefined,\n        customQuery: undefined\n    };\n    var _a = __assign(__assign({}, defaultValues), options), integrationID = _a.integrationID, authentication = _a.authentication, customQuery = _a.customQuery;\n    if (isBadIntegrationID(integrationID))\n        throw new Error(\"integrationID is required and must be a string\");\n    if (isBadString(authentication))\n        throw new Error(\"authentication must be a string or null\");\n    if (isBadObject(customQuery))\n        throw new Error(\"customQuery must be an object or null\");\n    return new Promise(function (resolve, reject) {\n        try {\n            var fetch_body = __assign({}, customQuery);\n            if (authentication !== undefined)\n                fetch_body.authentication = authentication;\n            fetch(generateBareUrl('delete', integrationID), {\n                method: \"POST\",\n                body: JSON.stringify(fetch_body),\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                }\n            })\n                .then(function (res) { return res.json(); })\n                .then(function (resData) {\n                if ({}.hasOwnProperty.call(resData, 'ErrorCode'))\n                    console.error(resData.message);\n                resolve(resData.message);\n            });\n        }\n        catch (err) {\n            reject(err);\n        }\n    });\n}\n/**\n * @async\n * Call a cloud function, created in Easybase interface.\n * @param {string} route Route as detailed in Easybase. Found under 'Deploy'. Will be in the form of ####...####-function-name.\n * @param {Record<string, any>} postBody Optional object to pass as the body of the POST request. This object will available in your cloud function's event.body.\n * @return {Promise<string>} Response from your cloud function. Detailed with a call to 'return context.succeed(\"RESPONSE\")'.\n */\nexport function callFunction(route, postBody) {\n    return __awaiter(this, void 0, void 0, function () {\n        var res, rawDataText;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4 /*yield*/, fetch(generateBareUrl('function', route.split(\"/\").pop()), {\n                        method: \"POST\",\n                        headers: {\n                            'Content-Type': 'application/json'\n                        },\n                        body: JSON.stringify(postBody) || \"\"\n                    })];\n                case 1:\n                    res = _a.sent();\n                    return [4 /*yield*/, res.text()];\n                case 2:\n                    rawDataText = _a.sent();\n                    return [2 /*return*/, rawDataText];\n            }\n        });\n    });\n}\n"],"sourceRoot":""}