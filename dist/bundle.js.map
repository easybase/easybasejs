{"version":3,"sources":["webpack://EasyBase/webpack/universalModuleDefinition","webpack://EasyBase/webpack/bootstrap","webpack://EasyBase/./node_modules/EasyQB/src/lib-util/index.js","webpack://EasyBase/./node_modules/cross-fetch/dist/browser-ponyfill.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-sq/common/from_items.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-sq/common/values_array.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-sq/common/conditions.js","webpack://EasyBase/./node_modules/fast-deep-equal/index.js","webpack://EasyBase/./node_modules/EasyQB/src/index.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-sq/common/expressions.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-sq/common/limit_offset.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-util/tagged_template.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-sq/clauses/index.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-core/index.js","webpack://EasyBase/./node_modules/EasyQB/src/builder-sq/index.js","webpack://EasyBase/./node_modules/EasyQB/src/builder-sq/context.js","webpack://EasyBase/./node_modules/EasyQB/src/builder-expression/index.js","webpack://EasyBase/./node_modules/EasyQB/src/builder-expression/compile.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-util/build_utils.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-util/change_case.js","webpack://EasyBase/./node_modules/EasyQB/src/dialect-postgres/index.js","webpack://EasyBase/./node_modules/EasyQB/src/dialect-postgres/query.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-sq/index.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-sq/methods.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-sq/query.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-sq/clauses/with.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-sq/clauses/select.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-sq/clauses/from.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-sq/clauses/where.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-sq/clauses/group.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-sq/clauses/having.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-sq/clauses/setop.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-sq/clauses/order.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-sq/clauses/limit.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-sq/clauses/offset.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-sq/clauses/delete.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-sq/clauses/returning.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-sq/clauses/insert.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-sq/clauses/update.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-sq/clauses/set.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-sq/common/index.js","webpack://EasyBase/./node_modules/EasyQB/src/dialect-postgres/expression.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-expression/index.js","webpack://EasyBase/./node_modules/EasyQB/src/lib-expression/util.js","webpack://EasyBase/./node_modules/EasyQB/src/dialect-postgres/parameterize.js","webpack://EasyBase/./src/EasybaseProvider/types.ts","webpack://EasyBase/./src/EasybaseProvider/g.ts","webpack://EasyBase/./src/EasybaseProvider/object-observer.js","webpack://EasyBase/./src/EasybaseProvider/utils.ts","webpack://EasyBase/./src/EasybaseProvider/auth.ts","webpack://EasyBase/./src/EasybaseProvider/EasybaseProvider.ts","webpack://EasyBase/./src/EasybaseProvider/table.ts","webpack://EasyBase/./src/EasybaseProvider/db.ts","webpack://EasyBase/./src/index.ts"],"names":["root","factory","exports","module","define","amd","window","installedModules","__webpack_require__","moduleId","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","buildUtils","changeCase","taggedTemplate","__self__","F","this","fetch","DOMException","self","support","Blob","e","viewClasses","isArrayBufferView","ArrayBuffer","isView","obj","indexOf","toString","normalizeName","String","test","TypeError","toLowerCase","normalizeValue","iteratorFor","items","iterator","next","shift","done","undefined","Headers","headers","map","forEach","append","Array","isArray","header","getOwnPropertyNames","consumed","body","bodyUsed","Promise","reject","fileReaderReady","reader","resolve","onload","result","onerror","error","readBlobAsArrayBuffer","blob","FileReader","promise","readAsArrayBuffer","bufferClone","buf","slice","view","Uint8Array","byteLength","set","buffer","Body","_initBody","_bodyInit","_bodyText","isPrototypeOf","_bodyBlob","FormData","_bodyFormData","URLSearchParams","DataView","_bodyArrayBuffer","type","rejected","Error","arrayBuffer","then","text","readAsText","chars","length","fromCharCode","join","readArrayBufferAsText","formData","decode","json","JSON","parse","oldValue","has","callback","thisArg","keys","push","values","entries","methods","Request","input","options","method","upcased","url","credentials","signal","toUpperCase","referrer","form","trim","split","bytes","replace","decodeURIComponent","Response","bodyInit","status","ok","statusText","clone","response","redirectStatuses","redirect","RangeError","location","err","message","stack","constructor","init","request","aborted","xhr","XMLHttpRequest","abortXhr","abort","rawHeaders","getAllResponseHeaders","line","parts","responseURL","responseText","ontimeout","onabort","open","withCredentials","responseType","setRequestHeader","addEventListener","onreadystatechange","readyState","removeEventListener","send","polyfill","default","isObject","buildCall","mapJoin","objectMapJoin","conditions","valuesArray","ctx","start","end","txt","item","fromItem","args","on","using","arg","build","buildObject","mapKey","columns","array","uniqueKeys","source","j","isTaggedTemplate","buildTaggedTemplate","valuesList","callbackfn","equal","a","b","RegExp","flags","valueOf","core","dialect","from","parameterize","strings","raw","wth","select","where","group","having","setop","order","limit","offset","del","returning","insert","update","createQueryBuilder","createExpressionBuilder","memoize","normalKey","_build","unparameterized","escape","config","query","expression","defaultContext","createNewContext","createChain","chain","fn","prev","setPrototypeOf","createReducers","reducers","updateContext","properties","applyReducers","express","id","builderProperties","newContext","queries","inheritedContext","methodProperties","extend","arr","builder","executeProperties","one","async","oneCallback","tableName","userAssociatedRecordsOnly","all","allCallback","_tableName","_methodProperties","defineProperties","inherit","params","whr","target","separator","sql","ret","frm","grp","hav","ord","with","createExpressionCompiler","aggregator","op","columnName","expressions","compile","max","min","avg","count","sum","current","buildCalls","calls","last","pushCall","tag","createCallsCompiler","expressionTable","exp","minArgs","maxArgs","numArgs","callsCompiler","mapJoinWrap","close","cache","given_key","clauses","common","fromItems","distinctOn","distinct","delete","rollup","cube","groupingSets","withRecursive","recursive","return","groupBy","union","unionAll","intersect","intersectAll","except","exceptAll","orderBy","leftJoin","rightJoin","fullJoin","crossJoin","naturalJoin","naturalLeftJoin","naturalRightJoin","naturalFullJoin","clause","str","userType","buildDistinct","buildArg","buildArrayArg","buildCubeOrRollupArg","buildCubeOrRollupArrayArg","first","by","sort","nulls","limitOffset","buildValuesArray","unaryPre","unaryPost","unaryFunction","binary","ternary","nary","naryFunction","oneValue","compositeValue","membership","quantifiedComparison","dateBinary","row","unknown","boolean","number","string","table","and","or","not","isTrue","isNotTrue","isFalse","isNotFalse","isUnknown","isNotUnknown","comparison","eq","neq","lt","gt","lte","gte","between","isDistinctFrom","isNotDistinctFrom","isNull","isNotNull","in","notIn","eqAny","neqAny","ltAny","gtAny","lteAny","gteAny","eqAll","neqAll","ltAll","gtAll","lteAll","gteAll","dateComparison","dateLt","dateGt","dateLte","dateGte","math","add","sub","mul","div","mod","sqrt","cbrt","fact","abs","like","notLike","unnest","Number","MAX_SAFE_INTEGER","op1","op2","arg1","arg2","buildValuesList","inDate","getMonth","getFullYear","getDate","escapeLiteral","stringify","hasBackslash","escaped","POST_TYPES","DB_STATUS","EXECUTE_COUNT","GlobalNamespace","oMetaKey","validObservableOptionKeys","validObserverOptionKeys","path","pathsOf","pathsFrom","propertiesBluePrint","observe","observer","observers","some","console","warn","opts","filter","invalidOptions","option","processObserveOptions","unobserve","oMeta","ol","al","arguments","splice","prepareObject","getObservedOf","prepareArray","prepareTypedArray","filterChanges","changes","oPath","change","oPathsOf","oPathsFrom","startsWith","callObserverSafe","listener","callObserversFromMT","batches","callObservers","relevantChanges","newPath","tmp","currentObservable","queueMicrotask","rb","find","apply","tmpa","parent","ownKey","ArrayOMeta","proxy","TypedArrayOMeta","Date","ObjectOMeta","proxiedReverse","reverse","tmpObserved","proxiedSort","comparator","proxiedFill","filVal","tarLen","Math","fill","tmpTarget","detach","proxiedCopyWithin","dest","len","copyWithin","nItem","oItem","proxiedArrayMethods","pop","poppedIndex","popResult","pushContent","initialLength","pushResult","Reflect","shiftResult","unshift","unshiftContent","unshiftResult","splLen","spliceContent","startIndex","removed","inserted","spliceResult","newTarLen","index","proxiedTypedArrayMethods","souLen","OMetaBase","cloningFunction","targetClone","revocable","Proxy","processOptions","assign","newValue","super","Observable","freeze","utilsFactory","globals","g","generateAuthBody","stamp","now","token","token_time","session","generateBareUrl","integrationID","log","logging","authFactory","initAuth","t1","floor","random","instance","integrationType","ebconfig","integration","res","HANDSHAKE","version","tt","resData","mounted","validTokenRes","tokenPost","VALID_TOKEN","elapsed","success","postType","_auth","code","req_res","REQUEST_TOKEN","refreshToken","data","newTokenCallback","tokenPostAttachment","customHeaders","regularAuthbody","attachmentAuth","UPLOAD_ATTACHMENT","signUp","newUserID","password","userAttributes","signUpRes","SIGN_UP","setUserAttribute","setAttrsRes","SET_ATTRIBUTE","getUserAttributes","USER_ATTRIBUTES","isUserSignedIn","signIn","userID","signOut","EasybaseProvider","Query","fullTableSize","tableTypes","fullOptions","queryName","GET_QUERY","TABLE_SIZE","COLUMN_TYPES","tableFactory","db","dbEventListener","_listenerIndex","_listeners","_runListeners","cb","trx","PENDING","ALL","EASY_QB","SUCCESS","ERROR","ONE","currKey","dbFactory","document","_isFrameInitialized","_frameConfiguration","_observedChangeStack","_recordIdMap","WeakMap","_observableFrame","_","_frame","isSyncing","sync","SYNC_STACK","GET_FRAME","newData","isNewDataTheSame","newDataNoId","_id","oldframe","currNewEle","allChanges","_realignFrames","_updateRecordAttachment","_frameRecord","ele","record","ext","attachment","includes","uri","configureFrame","addRecord","insertAtEnd","newRecord","SYNC_INSERT","deleteRecord","SYNC_DELETE","Frame","currentConfiguration","updateRecordImage","updateRecordVideo","updateRecordFile","isBadInt","my_int","isBadString","my_string","isBadIntegrationID","isBadObject","my_obj","defaultOptions","authentication","customQuery","fetch_body","post","defaultValues","my_bool","updateValues","Delete","callFunction","route","postBody"],"mappings":"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","file":"bundle.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"EasyBase\"] = factory();\n\telse\n\t\troot[\"EasyBase\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 45);\n","const buildUtils = require('./build_utils')\nconst changeCase = require('./change_case')\nconst taggedTemplate = require('./tagged_template')\n\nmodule.exports = {\n  ...buildUtils,\n  ...changeCase,\n  ...taggedTemplate\n}","var __self__ = (function (root) {\nfunction F() {\nthis.fetch = false;\nthis.DOMException = root.DOMException\n}\nF.prototype = root;\nreturn new F();\n})(typeof self !== 'undefined' ? self : this);\n(function(self) {\n\nvar irrelevant = (function (exports) {\n\n  var support = {\n    searchParams: 'URLSearchParams' in self,\n    iterable: 'Symbol' in self && 'iterator' in Symbol,\n    blob:\n      'FileReader' in self &&\n      'Blob' in self &&\n      (function() {\n        try {\n          new Blob();\n          return true\n        } catch (e) {\n          return false\n        }\n      })(),\n    formData: 'FormData' in self,\n    arrayBuffer: 'ArrayBuffer' in self\n  };\n\n  function isDataView(obj) {\n    return obj && DataView.prototype.isPrototypeOf(obj)\n  }\n\n  if (support.arrayBuffer) {\n    var viewClasses = [\n      '[object Int8Array]',\n      '[object Uint8Array]',\n      '[object Uint8ClampedArray]',\n      '[object Int16Array]',\n      '[object Uint16Array]',\n      '[object Int32Array]',\n      '[object Uint32Array]',\n      '[object Float32Array]',\n      '[object Float64Array]'\n    ];\n\n    var isArrayBufferView =\n      ArrayBuffer.isView ||\n      function(obj) {\n        return obj && viewClasses.indexOf(Object.prototype.toString.call(obj)) > -1\n      };\n  }\n\n  function normalizeName(name) {\n    if (typeof name !== 'string') {\n      name = String(name);\n    }\n    if (/[^a-z0-9\\-#$%&'*+.^_`|~]/i.test(name)) {\n      throw new TypeError('Invalid character in header field name')\n    }\n    return name.toLowerCase()\n  }\n\n  function normalizeValue(value) {\n    if (typeof value !== 'string') {\n      value = String(value);\n    }\n    return value\n  }\n\n  // Build a destructive iterator for the value list\n  function iteratorFor(items) {\n    var iterator = {\n      next: function() {\n        var value = items.shift();\n        return {done: value === undefined, value: value}\n      }\n    };\n\n    if (support.iterable) {\n      iterator[Symbol.iterator] = function() {\n        return iterator\n      };\n    }\n\n    return iterator\n  }\n\n  function Headers(headers) {\n    this.map = {};\n\n    if (headers instanceof Headers) {\n      headers.forEach(function(value, name) {\n        this.append(name, value);\n      }, this);\n    } else if (Array.isArray(headers)) {\n      headers.forEach(function(header) {\n        this.append(header[0], header[1]);\n      }, this);\n    } else if (headers) {\n      Object.getOwnPropertyNames(headers).forEach(function(name) {\n        this.append(name, headers[name]);\n      }, this);\n    }\n  }\n\n  Headers.prototype.append = function(name, value) {\n    name = normalizeName(name);\n    value = normalizeValue(value);\n    var oldValue = this.map[name];\n    this.map[name] = oldValue ? oldValue + ', ' + value : value;\n  };\n\n  Headers.prototype['delete'] = function(name) {\n    delete this.map[normalizeName(name)];\n  };\n\n  Headers.prototype.get = function(name) {\n    name = normalizeName(name);\n    return this.has(name) ? this.map[name] : null\n  };\n\n  Headers.prototype.has = function(name) {\n    return this.map.hasOwnProperty(normalizeName(name))\n  };\n\n  Headers.prototype.set = function(name, value) {\n    this.map[normalizeName(name)] = normalizeValue(value);\n  };\n\n  Headers.prototype.forEach = function(callback, thisArg) {\n    for (var name in this.map) {\n      if (this.map.hasOwnProperty(name)) {\n        callback.call(thisArg, this.map[name], name, this);\n      }\n    }\n  };\n\n  Headers.prototype.keys = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push(name);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.values = function() {\n    var items = [];\n    this.forEach(function(value) {\n      items.push(value);\n    });\n    return iteratorFor(items)\n  };\n\n  Headers.prototype.entries = function() {\n    var items = [];\n    this.forEach(function(value, name) {\n      items.push([name, value]);\n    });\n    return iteratorFor(items)\n  };\n\n  if (support.iterable) {\n    Headers.prototype[Symbol.iterator] = Headers.prototype.entries;\n  }\n\n  function consumed(body) {\n    if (body.bodyUsed) {\n      return Promise.reject(new TypeError('Already read'))\n    }\n    body.bodyUsed = true;\n  }\n\n  function fileReaderReady(reader) {\n    return new Promise(function(resolve, reject) {\n      reader.onload = function() {\n        resolve(reader.result);\n      };\n      reader.onerror = function() {\n        reject(reader.error);\n      };\n    })\n  }\n\n  function readBlobAsArrayBuffer(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsArrayBuffer(blob);\n    return promise\n  }\n\n  function readBlobAsText(blob) {\n    var reader = new FileReader();\n    var promise = fileReaderReady(reader);\n    reader.readAsText(blob);\n    return promise\n  }\n\n  function readArrayBufferAsText(buf) {\n    var view = new Uint8Array(buf);\n    var chars = new Array(view.length);\n\n    for (var i = 0; i < view.length; i++) {\n      chars[i] = String.fromCharCode(view[i]);\n    }\n    return chars.join('')\n  }\n\n  function bufferClone(buf) {\n    if (buf.slice) {\n      return buf.slice(0)\n    } else {\n      var view = new Uint8Array(buf.byteLength);\n      view.set(new Uint8Array(buf));\n      return view.buffer\n    }\n  }\n\n  function Body() {\n    this.bodyUsed = false;\n\n    this._initBody = function(body) {\n      this._bodyInit = body;\n      if (!body) {\n        this._bodyText = '';\n      } else if (typeof body === 'string') {\n        this._bodyText = body;\n      } else if (support.blob && Blob.prototype.isPrototypeOf(body)) {\n        this._bodyBlob = body;\n      } else if (support.formData && FormData.prototype.isPrototypeOf(body)) {\n        this._bodyFormData = body;\n      } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n        this._bodyText = body.toString();\n      } else if (support.arrayBuffer && support.blob && isDataView(body)) {\n        this._bodyArrayBuffer = bufferClone(body.buffer);\n        // IE 10-11 can't handle a DataView body.\n        this._bodyInit = new Blob([this._bodyArrayBuffer]);\n      } else if (support.arrayBuffer && (ArrayBuffer.prototype.isPrototypeOf(body) || isArrayBufferView(body))) {\n        this._bodyArrayBuffer = bufferClone(body);\n      } else {\n        this._bodyText = body = Object.prototype.toString.call(body);\n      }\n\n      if (!this.headers.get('content-type')) {\n        if (typeof body === 'string') {\n          this.headers.set('content-type', 'text/plain;charset=UTF-8');\n        } else if (this._bodyBlob && this._bodyBlob.type) {\n          this.headers.set('content-type', this._bodyBlob.type);\n        } else if (support.searchParams && URLSearchParams.prototype.isPrototypeOf(body)) {\n          this.headers.set('content-type', 'application/x-www-form-urlencoded;charset=UTF-8');\n        }\n      }\n    };\n\n    if (support.blob) {\n      this.blob = function() {\n        var rejected = consumed(this);\n        if (rejected) {\n          return rejected\n        }\n\n        if (this._bodyBlob) {\n          return Promise.resolve(this._bodyBlob)\n        } else if (this._bodyArrayBuffer) {\n          return Promise.resolve(new Blob([this._bodyArrayBuffer]))\n        } else if (this._bodyFormData) {\n          throw new Error('could not read FormData body as blob')\n        } else {\n          return Promise.resolve(new Blob([this._bodyText]))\n        }\n      };\n\n      this.arrayBuffer = function() {\n        if (this._bodyArrayBuffer) {\n          return consumed(this) || Promise.resolve(this._bodyArrayBuffer)\n        } else {\n          return this.blob().then(readBlobAsArrayBuffer)\n        }\n      };\n    }\n\n    this.text = function() {\n      var rejected = consumed(this);\n      if (rejected) {\n        return rejected\n      }\n\n      if (this._bodyBlob) {\n        return readBlobAsText(this._bodyBlob)\n      } else if (this._bodyArrayBuffer) {\n        return Promise.resolve(readArrayBufferAsText(this._bodyArrayBuffer))\n      } else if (this._bodyFormData) {\n        throw new Error('could not read FormData body as text')\n      } else {\n        return Promise.resolve(this._bodyText)\n      }\n    };\n\n    if (support.formData) {\n      this.formData = function() {\n        return this.text().then(decode)\n      };\n    }\n\n    this.json = function() {\n      return this.text().then(JSON.parse)\n    };\n\n    return this\n  }\n\n  // HTTP methods whose capitalization should be normalized\n  var methods = ['DELETE', 'GET', 'HEAD', 'OPTIONS', 'POST', 'PUT'];\n\n  function normalizeMethod(method) {\n    var upcased = method.toUpperCase();\n    return methods.indexOf(upcased) > -1 ? upcased : method\n  }\n\n  function Request(input, options) {\n    options = options || {};\n    var body = options.body;\n\n    if (input instanceof Request) {\n      if (input.bodyUsed) {\n        throw new TypeError('Already read')\n      }\n      this.url = input.url;\n      this.credentials = input.credentials;\n      if (!options.headers) {\n        this.headers = new Headers(input.headers);\n      }\n      this.method = input.method;\n      this.mode = input.mode;\n      this.signal = input.signal;\n      if (!body && input._bodyInit != null) {\n        body = input._bodyInit;\n        input.bodyUsed = true;\n      }\n    } else {\n      this.url = String(input);\n    }\n\n    this.credentials = options.credentials || this.credentials || 'same-origin';\n    if (options.headers || !this.headers) {\n      this.headers = new Headers(options.headers);\n    }\n    this.method = normalizeMethod(options.method || this.method || 'GET');\n    this.mode = options.mode || this.mode || null;\n    this.signal = options.signal || this.signal;\n    this.referrer = null;\n\n    if ((this.method === 'GET' || this.method === 'HEAD') && body) {\n      throw new TypeError('Body not allowed for GET or HEAD requests')\n    }\n    this._initBody(body);\n  }\n\n  Request.prototype.clone = function() {\n    return new Request(this, {body: this._bodyInit})\n  };\n\n  function decode(body) {\n    var form = new FormData();\n    body\n      .trim()\n      .split('&')\n      .forEach(function(bytes) {\n        if (bytes) {\n          var split = bytes.split('=');\n          var name = split.shift().replace(/\\+/g, ' ');\n          var value = split.join('=').replace(/\\+/g, ' ');\n          form.append(decodeURIComponent(name), decodeURIComponent(value));\n        }\n      });\n    return form\n  }\n\n  function parseHeaders(rawHeaders) {\n    var headers = new Headers();\n    // Replace instances of \\r\\n and \\n followed by at least one space or horizontal tab with a space\n    // https://tools.ietf.org/html/rfc7230#section-3.2\n    var preProcessedHeaders = rawHeaders.replace(/\\r?\\n[\\t ]+/g, ' ');\n    preProcessedHeaders.split(/\\r?\\n/).forEach(function(line) {\n      var parts = line.split(':');\n      var key = parts.shift().trim();\n      if (key) {\n        var value = parts.join(':').trim();\n        headers.append(key, value);\n      }\n    });\n    return headers\n  }\n\n  Body.call(Request.prototype);\n\n  function Response(bodyInit, options) {\n    if (!options) {\n      options = {};\n    }\n\n    this.type = 'default';\n    this.status = options.status === undefined ? 200 : options.status;\n    this.ok = this.status >= 200 && this.status < 300;\n    this.statusText = 'statusText' in options ? options.statusText : 'OK';\n    this.headers = new Headers(options.headers);\n    this.url = options.url || '';\n    this._initBody(bodyInit);\n  }\n\n  Body.call(Response.prototype);\n\n  Response.prototype.clone = function() {\n    return new Response(this._bodyInit, {\n      status: this.status,\n      statusText: this.statusText,\n      headers: new Headers(this.headers),\n      url: this.url\n    })\n  };\n\n  Response.error = function() {\n    var response = new Response(null, {status: 0, statusText: ''});\n    response.type = 'error';\n    return response\n  };\n\n  var redirectStatuses = [301, 302, 303, 307, 308];\n\n  Response.redirect = function(url, status) {\n    if (redirectStatuses.indexOf(status) === -1) {\n      throw new RangeError('Invalid status code')\n    }\n\n    return new Response(null, {status: status, headers: {location: url}})\n  };\n\n  exports.DOMException = self.DOMException;\n  try {\n    new exports.DOMException();\n  } catch (err) {\n    exports.DOMException = function(message, name) {\n      this.message = message;\n      this.name = name;\n      var error = Error(message);\n      this.stack = error.stack;\n    };\n    exports.DOMException.prototype = Object.create(Error.prototype);\n    exports.DOMException.prototype.constructor = exports.DOMException;\n  }\n\n  function fetch(input, init) {\n    return new Promise(function(resolve, reject) {\n      var request = new Request(input, init);\n\n      if (request.signal && request.signal.aborted) {\n        return reject(new exports.DOMException('Aborted', 'AbortError'))\n      }\n\n      var xhr = new XMLHttpRequest();\n\n      function abortXhr() {\n        xhr.abort();\n      }\n\n      xhr.onload = function() {\n        var options = {\n          status: xhr.status,\n          statusText: xhr.statusText,\n          headers: parseHeaders(xhr.getAllResponseHeaders() || '')\n        };\n        options.url = 'responseURL' in xhr ? xhr.responseURL : options.headers.get('X-Request-URL');\n        var body = 'response' in xhr ? xhr.response : xhr.responseText;\n        resolve(new Response(body, options));\n      };\n\n      xhr.onerror = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.ontimeout = function() {\n        reject(new TypeError('Network request failed'));\n      };\n\n      xhr.onabort = function() {\n        reject(new exports.DOMException('Aborted', 'AbortError'));\n      };\n\n      xhr.open(request.method, request.url, true);\n\n      if (request.credentials === 'include') {\n        xhr.withCredentials = true;\n      } else if (request.credentials === 'omit') {\n        xhr.withCredentials = false;\n      }\n\n      if ('responseType' in xhr && support.blob) {\n        xhr.responseType = 'blob';\n      }\n\n      request.headers.forEach(function(value, name) {\n        xhr.setRequestHeader(name, value);\n      });\n\n      if (request.signal) {\n        request.signal.addEventListener('abort', abortXhr);\n\n        xhr.onreadystatechange = function() {\n          // DONE (success or failure)\n          if (xhr.readyState === 4) {\n            request.signal.removeEventListener('abort', abortXhr);\n          }\n        };\n      }\n\n      xhr.send(typeof request._bodyInit === 'undefined' ? null : request._bodyInit);\n    })\n  }\n\n  fetch.polyfill = true;\n\n  if (!self.fetch) {\n    self.fetch = fetch;\n    self.Headers = Headers;\n    self.Request = Request;\n    self.Response = Response;\n  }\n\n  exports.Headers = Headers;\n  exports.Request = Request;\n  exports.Response = Response;\n  exports.fetch = fetch;\n\n  return exports;\n\n}({}));\n})(__self__);\ndelete __self__.fetch.polyfill\nexports = __self__.fetch // To enable: import fetch from 'cross-fetch'\nexports.default = __self__.fetch // For TypeScript consumers without esModuleInterop.\nexports.fetch = __self__.fetch // To enable: import {fetch} from 'cross-fetch'\nexports.Headers = __self__.Headers\nexports.Request = __self__.Request\nexports.Response = __self__.Response\nmodule.exports = exports\n","const {\n  isObject,\n  buildCall,\n  mapJoin,\n  objectMapJoin\n} = require('../../lib-util')\nconst conditions = require('./conditions')\nconst valuesArray = require('./values_array')\n\nmodule.exports = (ctx, items, start = 0, end = items.length) => {\n  if (end > items.length) end = items.length\n  let txt = ''\n  for (let i = start; i < end; ++i) {\n    const item = items[i]\n    if (i !== start) txt += item.join\n    txt += fromItem(ctx, item.args)\n    if (item.on) txt += ` on ${conditions(ctx, item.on)}`\n    else if (item.using) txt += ` using (${using(ctx, item.using)})`\n  }\n  return txt\n}\n\nconst usingArg = (ctx, arg) => {\n  if (typeof arg === 'string') return arg\n  if (typeof arg === 'function') return ctx.build(arg)\n  throw Error('Error: Invalid .using arg')\n}\nconst using = mapJoin(buildCall(mapJoin(usingArg)))\n\nconst fromArg = (ctx, arg) => {\n  if (typeof arg === 'string') return arg\n  if (typeof arg === 'function') return ctx.build(arg)\n  if (isObject(arg)) return buildObject(ctx, arg)\n  throw Error('Error: Invalid .from argument:', arg)\n}\n\nconst buildProperty = (ctx, key, value) => {\n  if (typeof value === 'string') return `${value} ${ctx.mapKey(key)}`\n  if (typeof value === 'function')\n    return `${ctx.build(value)} ${ctx.mapKey(key)}`\n  if (Array.isArray(value)) {\n    const { columns, values } = valuesArray(ctx, value)\n    return `(${values}) ${ctx.mapKey(key)}(${columns})`\n  }\n  throw Error('Error: Invalid .from argument')\n}\n\nconst buildObject = objectMapJoin(buildProperty)\nconst fromItem = buildCall(mapJoin(fromArg))\n","const { mapJoin } = require('../../lib-util')\n\nmodule.exports = (ctx, array) => {\n  const keys = uniqueKeys(array)\n  return {\n    columns: columns(ctx, keys),\n    values: values(ctx, array, keys)\n  }\n}\n\n// gets unique keys in object array\nconst uniqueKeys = array => {\n  const keys = {}\n  for (const object of array) {\n    for (const key in object) {\n      keys[key] = true\n    }\n  }\n  return Object.keys(keys)\n}\n\n// gets column string from unique keys of object array\nconst columns = mapJoin((ctx, arg) => ctx.mapKey(arg))\n\n// gets values string of object array\nconst values = (ctx, source, keys) => {\n  let txt = 'values '\n  for (let i = 0; i < source.length; ++i) {\n    if (i !== 0) txt += ', '\n    txt += '('\n    const object = source[i]\n    for (let j = 0; j < keys.length; ++j) {\n      if (j !== 0) txt += ', '\n      txt += value(ctx, object[keys[j]])\n    }\n    txt += ')'\n  }\n  return txt\n}\n\nconst value = (ctx, arg) => {\n  if (arg === undefined) return 'default'\n  return ctx.build(arg)\n}\n","const {\n  isTaggedTemplate,\n  buildTaggedTemplate,\n  isObject,\n  mapJoin,\n  objectMapJoin\n} = require('../../lib-util')\n\nconst buildCall = callbackfn => (ctx, args) =>\n  isTaggedTemplate(args)\n    ? `(${buildTaggedTemplate(ctx, args)})`\n    : callbackfn(ctx, args)\n\nconst buildArg = (ctx, arg) =>\n  isObject(arg) ? buildObject(ctx, arg) : ctx.build(arg)\n\nconst valuesList = mapJoin((ctx, arg) => ctx.build(arg))\n\nconst buildProperty = (ctx, key, value) => {\n  const name = ctx.mapKey(key)\n  if (value === null) return `(${name} is null)`\n  if (Array.isArray(value)) return `(${name} in (${valuesList(ctx, value)}))`\n  return `(${name} = ${ctx.build(value)})`\n}\n\nconst buildObject = objectMapJoin(buildProperty, ' and ')\nmodule.exports = mapJoin(buildCall(mapJoin(buildArg, ' and ')), ' and ')\n","'use strict';\n\n// do not edit .js files directly - edit src/index.jst\n\n\n\nmodule.exports = function equal(a, b) {\n  if (a === b) return true;\n\n  if (a && b && typeof a == 'object' && typeof b == 'object') {\n    if (a.constructor !== b.constructor) return false;\n\n    var length, i, keys;\n    if (Array.isArray(a)) {\n      length = a.length;\n      if (length != b.length) return false;\n      for (i = length; i-- !== 0;)\n        if (!equal(a[i], b[i])) return false;\n      return true;\n    }\n\n\n\n    if (a.constructor === RegExp) return a.source === b.source && a.flags === b.flags;\n    if (a.valueOf !== Object.prototype.valueOf) return a.valueOf() === b.valueOf();\n    if (a.toString !== Object.prototype.toString) return a.toString() === b.toString();\n\n    keys = Object.keys(a);\n    length = keys.length;\n    if (length !== Object.keys(b).length) return false;\n\n    for (i = length; i-- !== 0;)\n      if (!Object.prototype.hasOwnProperty.call(b, keys[i])) return false;\n\n    for (i = length; i-- !== 0;) {\n      var key = keys[i];\n\n      if (!equal(a[key], b[key])) return false;\n    }\n\n    return true;\n  }\n\n  // true if both NaN, false otherwise\n  return a!==a && b!==b;\n};\n","const core = require('./lib-core')\nconst dialect = require('./dialect-postgres')\n\nconst a = core({ dialect });\na.from = undefined;\nmodule.exports = a;\n","const {\n  isObject,\n  buildCall,\n  mapJoin,\n  objectMapJoin\n} = require('../../lib-util')\n\nconst buildArg = (ctx, arg) => {\n  if (typeof arg === 'string') return arg\n  if (isObject(arg)) return buildObject(ctx, arg)\n  return ctx.build(arg)\n}\n\nconst buildProperty = (ctx, key, value) => {\n  const expression = typeof value === 'string' ? value : ctx.build(value)\n  return `${expression} ${ctx.mapKey(key)}`\n}\n\nconst buildObject = objectMapJoin(buildProperty)\nmodule.exports = mapJoin(buildCall(mapJoin(buildArg)))\n","const { isTaggedTemplate, buildTaggedTemplate } = require('../../lib-util')\n\nmodule.exports = (ctx, args) => {\n  if (isTaggedTemplate(args)) return buildTaggedTemplate(ctx, args)\n  const arg = args[0]\n  if (typeof arg === 'number') return ctx.parameterize(arg)\n  if (typeof arg === 'function') return ctx.build(arg)\n  throw Error('Error: Invalid limit/offset argument')\n}\n","const isTaggedTemplate = ([strings]) => Array.isArray(strings) && strings.raw\n\nconst buildTaggedTemplate = (ctx, [strings, ...args]) => {\n  let txt = strings[0]\n  for (let i = 0; i < args.length; ++i) {\n    txt += ctx.build(args[i]) + strings[i + 1]\n  }\n  return txt\n}\n\nmodule.exports = {\n  isTaggedTemplate,\n  buildTaggedTemplate\n}","module.exports = {\n  wth: require('./with'),\n  select: require('./select'),\n  from: require('./from'),\n  where: require('./where'),\n  group: require('./group'),\n  having: require('./having'),\n  setop: require('./setop'),\n  order: require('./order'),\n  limit: require('./limit'),\n  offset: require('./offset'),\n  del: require('./delete'),\n  returning: require('./returning'),\n  insert: require('./insert'),\n  update: require('./update'),\n  set: require('./set')\n}\n","const createQueryBuilder = require('../builder-sq')\nconst createExpressionBuilder = require('../builder-expression')\nconst { memoize, normalKey } = require('../lib-util')\n\n\n/**\n * Creates a version of EasyQB for the given SQL dialect and database adapter.\n *\n * A dialect is variant of the SQL language,\n * while an adapter is the driver that communicates with the database.\n *\n * This design makes it easy to swap drivers, e.g. mysql vs mysql2 or\n * add new databases just by connecting a new adapter to an existing dialect.\n *\n */\n\nconst createSqorn = ({ dialect }) => (config = {}) => {\n  const { query, expression, parameterize, escape } = dialect\n\n  // 1. Create default context properties passed through build tree\n  const mapKey = memoize(normalKey)\n  const defaultContext = { parameterize, escape, mapKey, build }\n\n  // 2. Create Expression Builder\n  const e = createExpressionBuilder({ defaultContext, expression })\n\n  // 3. Create Query Builder\n  const sq = createQueryBuilder({ defaultContext, query, e, config })\n\n  // 4. TODO: Build Executor, Attach e and execute functions\n\n  // 5. TODO: Return { sq, e, transaction, db }\n  return sq\n}\n\nfunction build(arg) {\n  if (arg === undefined) throw Error('Error: undefined argument')\n  if (typeof arg === 'function') {\n    if (arg._build) {\n      const { type, text } = arg._build(this)\n      if (type === 'expression') return text\n      if (type === 'fragment') return text\n      return `(${text})`\n    }\n    return arg(this)\n  }\n  return this.unparameterized ? this.escape(arg) : this.parameterize(arg)\n}\n\nmodule.exports = createSqorn","const createNewContext = require('./context')\nconst createQueryBuilder = ({ defaultContext, query, e, config }) => {\n    const { queries, methods, properties } = query\n    const newContext = createNewContext(defaultContext)\n    const reducers = createReducers(methods)\n    const updateContext = applyReducers(reducers)\n    reducers.extend = (ctx, args) => {\n        const arr = Array.isArray(args[0]) ? args[0] : args\n        for (let i = 0; i < arr.length; ++i) {\n            updateContext(arr[i].method, ctx)\n        }\n    }\n    const builder = () => { } // must not be object literal\n    const chain = createChain(builder)\n\n    const executeProperties = {\n        one: {\n            value: async function () {\n                const ret = await config.oneCallback(this.query, config.tableName, config.userAssociatedRecordsOnly)\n                return ret;\n            }\n        },\n        all: {\n            value: async function () {\n                const ret = await config.allCallback(this.query, config.tableName, config.userAssociatedRecordsOnly)\n                return ret;\n            }\n        },\n        _tableName: {\n            get: function () {\n                return config.tableName\n            }\n        }\n    }\n\n    // EasyQB no access to from\n    const _methodProperties = methodProperties({ methods, chain });\n    delete _methodProperties.from;\n\n    Object.defineProperties(builder, {\n        ...builderProperties({ chain, newContext, updateContext, queries }),\n        ..._methodProperties,\n        ...executeProperties,\n        ...properties,\n        e: {\n            value: e\n        }\n    })\n    return chain()\n}\n\n/** Creates a new builder instance */\nconst createChain = prototype => {\n    const chain = method => {\n        const fn = (...args) => chain({ name: 'express', args, prev: method })\n        fn.method = method\n        Object.setPrototypeOf(fn, prototype)\n        return fn\n    }\n    return chain\n}\n\n/** Creates an object containing all method reducers */\nconst createReducers = methods => {\n    const reducers = {}\n    for (const name in methods) {\n        const { updateContext, properties = {} } = methods[name]\n        reducers[name] = updateContext\n        // some methods have subproperties, e.g. .unionAll\n        for (const key in properties) {\n            reducers[`${name}.${key}`] = properties[key]\n        }\n    }\n    return reducers\n}\n\n/** Follows a method chain, applying each method's reducer, to ctx */\nconst applyReducers = reducers => (method, ctx) => {\n    // follow method links to construct methods array (in reverse)\n    const methods = []\n    for (; method !== undefined; method = method.prev) {\n        methods.push(method)\n    }\n    // build methods object by processing methods in call order\n    const express = { id: 0 }\n    for (let i = methods.length - 1; i >= 0; --i) {\n        const method = methods[i]\n        reducers[method.name](ctx, method.args, express)\n    }\n    return ctx\n}\n\n/** Default properties of all SQL Query Builders */\nconst builderProperties = ({ newContext, updateContext, queries }) => ({\n    _build: {\n        value: function (inheritedContext) {\n            const ctx = updateContext(this.method, newContext(inheritedContext))\n            return queries[ctx.type](ctx)\n        }\n    },\n    query: {\n        get: function () {\n            return this._build()\n        }\n    },\n    unparameterized: {\n        get: function () {\n            return this._build({ unparameterized: true }).text\n        }\n    }\n})\n\n/** Builds object containing a property for every query building method */\nconst methodProperties = ({ methods, chain }) => {\n    const properties = {}\n    for (const name in methods) {\n        const { getter } = methods[name]\n        if (getter) {\n            // add getter methods\n            properties[name] = {\n                get: function () {\n                    return chain({ name, prev: this.method })\n                }\n            }\n        } else {\n            // add function call methods\n            properties[name] = {\n                value: function (...args) {\n                    return chain({ name, args, prev: this.method })\n                }\n            }\n        }\n    }\n    return properties\n}\n\nmodule.exports = createQueryBuilder","/** Returns a function the creates a new context */\nconst createNewContext = defaultContext => {\n    const { parameterize, escape, mapKey, build } = defaultContext\n\n    return (inherit = {}) => {\n        const { params = [], unparameterized = false } = inherit\n\n        const whr = []\n        return {\n            // properties set by the EasyQB instance\n            parameterize,\n            escape,\n            mapKey,\n            build,\n\n            // properties inherited from the parent query\n            params,\n            unparameterized,\n\n            // properties of the current query\n            type: 'select',\n            // | sql' | 'select' | 'delete' | 'insert' | 'update'\n            target: whr,\n            join: undefined,\n            separator: ' ',\n            sql: [],\n            ret: [],\n            frm: [],\n            whr,\n            grp: [],\n            hav: [],\n            setop: [],\n            ord: [],\n            with: [],\n            set: []\n\n            // properties that may be added dynamically:\n            // userType\n            // distinct\n        }\n    }\n}\n\nmodule.exports = createNewContext\n","const createExpressionCompiler = require('./compile')\nconst { normalKey } = require('../lib-util');\n\nconst aggregator = (op) => (columnName) => `${op}(${normalKey(columnName)})`;\n\nmodule.exports = ({ defaultContext, expression }) => {\n  const { expressions } = expression\n  const newContext = createNewContext(defaultContext)\n  const compile = createExpressionCompiler(expressions)\n  const builder = () => {} // must not be object literal\n  const chain = createChain(builder)\n  Object.defineProperties(builder, {\n    ...builderProperties({ compile, newContext }),\n    ...methodProperties({ expressions, chain }),\n  })\n  const ret = chain();\n  ret.max = aggregator('max');\n  ret.min = aggregator('min');\n  ret.avg = aggregator('avg');\n  ret.count = aggregator('count');\n  ret.sum = aggregator('sum');\n  return ret;\n}\n\nconst builderProperties = ({ compile, newContext }) => ({\n  _build: {\n    value: function(inherit) {\n      return compile(newContext(inherit), this.current)\n    }\n  },\n  query: {\n    get: function() {\n      return this._build()\n    }\n  },\n  unparameterized: {\n    get: function() {\n      return this._build({ unparameterized: true }).text\n    }\n  }\n})\n\nconst createNewContext = defaultContext => {\n  const { build, parameterize, escape, mapKey } = defaultContext\n  return inherit => {\n    const { params = [], unparameterized = false } = inherit || {}\n    return {\n      // EasyQB instance properties\n      build,\n      parameterize,\n      escape,\n      mapKey,\n\n      // inherited properties\n      params,\n      unparameterized\n    }\n  }\n}\n\nconst createChain = prototype => {\n  const chain = current => {\n    const fn = (...args) => chain({ prev: current, args })\n    fn.current = current\n    Object.setPrototypeOf(fn, prototype)\n    return fn\n  }\n  return chain\n}\n\nconst methodProperties = ({ expressions, chain }) => {\n  const properties = {}\n  for (const name in expressions) {\n    properties[name] = {\n      get: function() {\n        return chain({ prev: this.current, name })\n      }\n    }\n  }\n  return properties\n}\n","const { isTaggedTemplate } = require('../lib-util')\n\nconst createExpressionCompiler = expressionTable => {\n  const callsCompiler = createCallsCompiler(expressionTable)\n  return (ctx, current) => {\n    const calls = buildCalls(current)\n    const text = callsCompiler(ctx, calls)\n    return {\n      text,\n      args: ctx.params,\n      type: 'expression'\n    }\n  }\n}\n\n// TODO: Performance optimization:\n// inline expression building with this method so at most only one array\n// is allocated in total, no array of object containing arrays nonsense\nconst buildCalls = current => {\n  // get call nodes\n  const calls = []\n  for (; current; current = current.prev) calls.push(current)\n  if (calls.length === 0) throw Error('Error: Empty expression')\n\n  // build expression list\n  let expression = { name: 'arg', args: [] }\n  const expressions = [expression]\n  const last = calls.length - 1\n  for (let i = last; i >= 0; --i) {\n    const { name, args } = calls[i]\n    if (i === last) {\n      if (name) expression.name = name\n      else pushCall(expression.args, args)\n    } else {\n      if (name) expressions.push((expression = { name, args: [undefined] }))\n      else pushCall(expression.args, args)\n    }\n  }\n  return expressions\n}\n\nconst pushCall = (array, args) => {\n  if (isTaggedTemplate(args)) {\n    array.push({ tag: args })\n  } else {\n    if (args.length === 0)\n      throw Error('Error: Expression call requires at least one argument')\n    for (let i = 0; i < args.length; ++i) {\n      array.push({ arg: args[i] })\n    }\n  }\n}\n\nconst createCallsCompiler = expressionTable => (ctx, calls) => {\n  let exp\n  for (let i = 0; i < calls.length; ++i) {\n    const { name, args } = calls[i]\n    const { build, minArgs, maxArgs } = expressionTable[name]\n    if (i !== 0) args[0] = { exp }\n    const numArgs = args.length\n    if (numArgs < minArgs)\n      throw Error(`Error: ${name} requires at least ${minArgs} arguments`)\n    if (numArgs > maxArgs)\n      throw Error(`Error: ${name} accepts at most ${maxArgs} arguments`)\n    exp = build(ctx, args)\n  }\n  return exp\n}\n\nmodule.exports = createExpressionCompiler\n","const { isTaggedTemplate, buildTaggedTemplate } = require('./tagged_template')\n\nconst isObject = arg => arg && arg.constructor.prototype === Object.prototype\n\nconst buildCall = callbackfn => (ctx, args) =>\n  isTaggedTemplate(args)\n    ? buildTaggedTemplate(ctx, args)\n    : callbackfn(ctx, args)\n\nconst mapJoin = (callbackfn, separator = ', ') => (ctx, args) => {\n  let txt = ''\n  for (let i = 0; i < args.length; ++i) {\n    if (i !== 0) txt += separator\n    txt += callbackfn(ctx, args[i])\n  }\n  return txt\n}\n\nconst mapJoinWrap = (callbackfn, separator = ', ', open = '(', close = ')') => (\n  ctx,\n  args\n) => {\n  let txt = open\n  for (let i = 0; i < args.length; ++i) {\n    if (i !== 0) txt += separator\n    txt += callbackfn(ctx, args[i])\n  }\n  return txt + close\n}\n\nconst objectMapJoin = (callbackfn, separator = ', ') => (ctx, object) => {\n  let txt = ''\n  const keys = Object.keys(object)\n  for (let i = 0; i < keys.length; ++i) {\n    if (i !== 0) txt += separator\n    const key = keys[i]\n    txt += callbackfn(ctx, key, object[key])\n  }\n  return txt\n}\n\nmodule.exports = {\n  isObject,\n  buildCall,\n  mapJoin,\n  mapJoinWrap,\n  objectMapJoin\n}","// included to mitigate cost of case conversion\nconst memoize = fn => {\n  const cache = {}\n  return key => cache[key] || (cache[key] = fn(key))\n}\n\nconst normalKey = given_key => given_key.indexOf('(') === -1 ? given_key.toLowerCase().trim().replace(/ /g, '_') : given_key;\n\nmodule.exports = {\n  memoize,\n  normalKey\n}","const query = require('./query')\nconst expression = require('./expression')\nconst { parameterize, escape } = require('./parameterize')\n\nmodule.exports = {\n  query,\n  expression,\n  parameterize,\n  escape\n}","const { methods, queries, query, clauses, common } = require('../lib-sq')\n\nconst { fromItems, expressions } = common\nconst {\n  wth,\n  from,\n  where,\n  group,\n  having,\n  setop,\n  order,\n  limit,\n  offset,\n  returning,\n  set\n} = clauses\n\nconst postgresMethods = {\n  distinctOn: {\n    updateContext: (ctx, args) => {\n      if (ctx.distinct) {\n        ctx.distinct.push(args)\n      } else {\n        ctx.distinct = [args]\n      }\n    }\n  }\n}\n\n// SELECT supports .distinctOn(...expressions)\nconst select = ctx => {\n  let txt = 'select '\n  if (ctx.distinct) {\n    txt += 'distinct '\n    if (ctx.distinct.length) {\n      txt += `on (${expressions(ctx, ctx.distinct)}) `\n    }\n  }\n  txt += expressions(ctx, ctx.ret) || '*'\n  return txt\n}\n// DELETE: first .from call is used in the DELETE clause\n// subsequent .from calls are used in the USING clause\nconst del = ctx => {\n  const txt = fromItems(ctx, ctx.frm, 0, 1)\n  return txt && `delete from ${txt}`\n}\nconst using = ctx => {\n  const txt = fromItems(ctx, ctx.frm, 1)\n  return txt && `using ${txt}`\n}\n// UPDATE: first .from call is used in the UPDATE clause\n// subsequent .from calls are used in the FROM clause\nconst update = ctx => {\n  const txt = fromItems(ctx, ctx.frm, 0, 1)\n  return txt && `update ${txt}`\n}\nconst updateFrom = ctx => {\n  const txt = fromItems(ctx, ctx.frm, 1)\n  return txt && `from ${txt}`\n}\n\nmodule.exports = {\n  methods: { ...methods, ...postgresMethods },\n  queries: {\n    ...queries,\n    select: query(\n      wth,\n      select,\n      from,\n      where,\n      group,\n      having,\n      setop,\n      order,\n      limit,\n      offset\n    ),\n    delete: query(wth, del, using, where, returning),\n    update: query(wth, update, set, updateFrom, where, returning)\n  },\n  properties: {\n    rollup: {\n      value: (...args) => {\n        return {\n          type: 'rollup',\n          args\n        }\n      }\n    },\n    cube: {\n      value: (...args) => {\n        return {\n          type: 'cube',\n          args\n        }\n      }\n    },\n    groupingSets: {\n      value: (...args) => {\n        return {\n          type: 'grouping sets',\n          args\n        }\n      }\n    }\n  }\n}","const methods = require('./methods')\nconst { query, queries } = require('./query')\nconst clauses = require('./clauses')\nconst common = require('./common')\n\nmodule.exports = {\n  methods,\n  query,\n  queries,\n  clauses,\n  common\n}","const { normalKey } = require('../lib-util')\n\n/** Query building methods */\nconst methods = {\n    with: {\n        updateContext: (ctx, args) => {\n            ctx.with.push(args)\n        }\n    },\n    withRecursive: {\n        updateContext: (ctx, args) => {\n            ctx.recursive = true\n            ctx.with.push(args)\n        }\n    },\n    from: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push({ args, join: ', ' })\n        }\n    },\n    where: {\n        updateContext: (ctx, args) => {\n            ctx.whr.push(args)\n            ctx.target = ctx.whr\n        }\n    },\n    return: {\n        updateContext: (ctx, args) => {\n            ctx.ret.push(Array.isArray(args) ? args.map(normalKey) : args)\n        }\n    },\n    distinct: {\n        getter: true,\n        updateContext: ctx => {\n            ctx.distinct = []\n        }\n    },\n    groupBy: {\n        updateContext: (ctx, args) => {\n            ctx.grp.push(args)\n        }\n    },\n    having: {\n        updateContext: (ctx, args) => {\n            ctx.hav.push(args)\n            ctx.target = ctx.hav\n        }\n    },\n    union: {\n        updateContext: (ctx, args) => {\n            ctx.setop.push({ type: 'union', args })\n        }\n    },\n    unionAll: {\n        updateContext: (ctx, args) => {\n            ctx.setop.push({ type: 'union all', args })\n        }\n    },\n    intersect: {\n        updateContext: (ctx, args) => {\n            ctx.setop.push({ type: 'intersect', args })\n        }\n    },\n    intersectAll: {\n        updateContext: (ctx, args) => {\n            ctx.setop.push({ type: 'intersect all', args })\n        }\n    },\n    except: {\n        updateContext: (ctx, args) => {\n            ctx.setop.push({ type: 'except', args })\n        }\n    },\n    exceptAll: {\n        updateContext: (ctx, args) => {\n            ctx.setop.push({ type: 'except all', args })\n        }\n    },\n    orderBy: {\n        updateContext: (ctx, args) => {\n            ctx.ord.push(args)\n        }\n    },\n    limit: {\n        updateContext: (ctx, args) => {\n            ctx.limit = args\n        }\n    },\n    offset: {\n        updateContext: (ctx, args) => {\n            ctx.offset = args\n        }\n    },\n    join: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' join ' }))\n        }\n    },\n    leftJoin: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' left join ' }))\n        }\n    },\n    rightJoin: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' right join ' }))\n        }\n    },\n    fullJoin: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' full join ' }))\n        }\n    },\n    crossJoin: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' cross join ' }))\n        }\n    },\n    naturalJoin: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' natural join ' }))\n        }\n    },\n    naturalLeftJoin: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' natural left join ' }))\n        }\n    },\n    naturalRightJoin: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' natural right join ' }))\n        }\n    },\n    naturalFullJoin: {\n        updateContext: (ctx, args) => {\n            ctx.frm.push((ctx.join = { args, join: ' natural full join ' }))\n        }\n    },\n    on: {\n        updateContext: (ctx, args) => {\n            const { join } = ctx\n            if (join.on) {\n                join.on.push(args)\n            } else {\n                ctx.target = join.on = [args]\n            }\n        }\n    },\n    using: {\n        updateContext: (ctx, args) => {\n            const { join } = ctx\n            if (join.using) {\n                join.using.push(args)\n            } else {\n                join.using = [args]\n            }\n        }\n    },\n    delete: {\n        // getter: true,\n        updateContext: ctx => {\n            ctx.type = 'delete'\n        }\n    },\n    insert: {\n        updateContext: (ctx, args) => {\n            ctx.type = 'insert'\n            ctx.insert = args\n        }\n    },\n    set: {\n        updateContext: (ctx, args) => {\n            ctx.type = 'update'\n            ctx.set.push(args)\n        }\n    },\n    express: {\n        updateContext: (ctx, args, count) => {\n            if (count.id === 0) {\n                count.id++\n                ctx.frm.push((ctx.join = { type: 'from', args, join: ', ' }))\n            } else if (count.id === 1) {\n                count.id++\n                ctx.whr.push(args)\n            } else if (count.id === 2) {\n                count.id++\n                ctx.ret.push(args)\n            } else throw Error('Invalid express call')\n        }\n    }\n}\n\nmodule.exports = methods;","const {\n    wth,\n    select,\n    from,\n    where,\n    group,\n    having,\n    setop,\n    order,\n    limit,\n    offset,\n    del,\n    returning,\n    insert,\n    update,\n    set,\n} = require('./clauses')\n\nconst query = (...clauses) => ctx => {\n    let text = ''\n    for (const clause of clauses) {\n        const str = clause && clause(ctx)\n        if (str) {\n            if (text) text += ctx.separator\n            text += str\n        }\n    }\n    return { text, args: ctx.params, type: ctx.userType || ctx.type }\n}\n\nconst queries = {\n    select: query(\n        wth,\n        select,\n        from,\n        where,\n        group,\n        having,\n        setop,\n        order,\n        limit,\n        offset\n    ),\n    update: query(wth, update, set, where, returning),\n    delete: query(wth, del, where, returning),\n    insert: query(wth, insert, returning)\n}\n\nmodule.exports = { query, queries }","const {\n  isObject,\n  buildCall,\n  mapJoin,\n  objectMapJoin\n} = require('../../lib-util')\nconst valuesArray = require('../common/values_array')\n\nmodule.exports = ctx => {\n  if (ctx.with.length === 0) return\n  const txt = calls(ctx, ctx.with)\n  return txt && `with ${ctx.recursive ? 'recursive ' : ''}${txt}`\n}\n\nconst buildArg = (ctx, arg) => {\n  if (isObject(arg)) return buildObject(ctx, arg)\n  throw Error('Invalid with argument:', arg)\n}\n\nconst buildProperty = (ctx, key, value) => {\n  if (typeof value === 'function') {\n    return `${ctx.mapKey(key)} ${ctx.build(value)}`\n  }\n  if (Array.isArray(value)) {\n    const { columns, values } = valuesArray(ctx, value)\n    return `${ctx.mapKey(key)}(${columns}) (${values})`\n  }\n  throw Error(`Error: Invalid .with argument`)\n}\n\nconst buildObject = objectMapJoin(buildProperty)\nconst calls = mapJoin(buildCall(mapJoin(buildArg)))\n","const expressions = require('../common/expressions')\n\nmodule.exports = ctx =>\n  `select ${buildDistinct(ctx)}${expressions(ctx, ctx.ret) || '*'}`\n\nconst buildDistinct = ctx =>\n  ctx.distinct\n    ? ctx.distinct.length\n      ? // TODO: expressions shouldn't be aliasable here\n        `distinct on (${expressions(ctx, ctx.distinct)})`\n      : 'distinct'\n    : ''\n","const fromItems = require('../common/from_items')\n\nmodule.exports = ctx => {\n  const txt = fromItems(ctx, ctx.frm)\n  return txt && `from ${txt}`\n}\n","const conditions = require('../common/conditions')\n\nmodule.exports = ctx => {\n  if (ctx.whr.length === 0) return\n  const txt = conditions(ctx, ctx.whr)\n  return txt && 'where ' + txt\n}\n","const { isObject, buildCall, mapJoin, mapJoinWrap } = require('../../lib-util')\n\nmodule.exports = ctx => {\n  if (ctx.grp.length === 0) return\n  const txt = calls(ctx, ctx.grp)\n  return txt && `group by ${txt}`\n}\n\nconst buildArg = (ctx, arg) => {\n  if (typeof arg === 'string') return arg\n  if (typeof arg === 'function') return ctx.build(arg)\n  if (Array.isArray(arg)) return buildArrayArg(ctx, arg)\n  if (isObject(arg)) return buildObject(ctx, arg)\n  throw Error('Invalid order by argument:', arg)\n}\n\nconst buildArrayArg = mapJoinWrap(buildArg)\n\n// postgres only\n// clone of buildArg() without support for object args\nconst buildCubeOrRollupArg = (ctx, arg) => {\n  if (typeof arg === 'string') return arg\n  if (typeof arg === 'function') return ctx.build(arg)\n  if (Array.isArray(arg)) return buildCubeOrRollupArrayArg(ctx, arg)\n  throw Error('Invalid cube/rollup argument')\n}\n\n// postgres only\n// clone of buildArrayArg() without support for object args\nconst buildCubeOrRollupArrayArg = mapJoinWrap(buildCubeOrRollupArg)\n\n// postgres only\nconst buildObject = (ctx, obj) => {\n  const { type, args } = obj\n  if (type === 'rollup') {\n    return `rollup ${buildCubeOrRollupArg(ctx, args)}`\n  }\n  if (type === 'cube') {\n    return `cube ${buildCubeOrRollupArg(ctx, args)}`\n  }\n  if (type === 'grouping sets') {\n    return `grouping sets ${buildArg(ctx, args)}`\n  }\n  throw Error('Invalid group by argument')\n}\n\nconst calls = mapJoin(buildCall(mapJoin(buildArg)))\n","const conditions = require('../common/conditions')\n\nmodule.exports = ctx => {\n  if (ctx.hav.length === 0) return\n  const txt = conditions(ctx, ctx.hav)\n  return txt && 'having ' + txt\n}\n","module.exports = ctx => {\n  if (ctx.setop.length === 0) return\n  let txt = ''\n  let first = true\n  const { setop } = ctx\n  for (let i = 0; i < setop.length; ++i) {\n    const { type, args } = ctx.setop[i]\n    for (let j = 0; j < args.length; ++j) {\n      if (!first) {\n        txt += ' '\n      } else {\n        first = false\n      }\n      txt += `${type} ${ctx.build(args[j])}`\n    }\n  }\n  return txt\n}\n","const { isObject, buildCall, mapJoin } = require('../../lib-util')\n\nmodule.exports = ctx => {\n  if (ctx.ord.length === 0) return\n  const txt = calls(ctx, ctx.ord)\n  return txt && `order by ${txt}`\n}\n\nconst buildArg = (ctx, arg) => {\n  if (typeof arg === 'string') return arg\n  if (typeof arg === 'function') return ctx.build(arg)\n  if (isObject(arg)) return buildObject(ctx, arg)\n  throw Error('Invalid order by argument:', arg)\n}\n\nconst buildObject = (ctx, obj) => {\n  let txt = ''\n  const { by, sort, using, nulls } = obj\n  // by\n  if (typeof by === 'string') txt += by\n  else if (typeof by === 'function') txt += ctx.build(by)\n  else throw Error('Invalid order by property \"by\"')\n  // sort\n  if (sort) {\n    if (sort === 'desc') txt += ' desc'\n    else if (sort === 'asc') txt += ' asc'\n    else if (typeof sort === 'string') txt += ` using ${sort}`\n    else throw Error('Invalid order by property \"sort\"')\n  } else if (using) {\n    if (typeof using === 'string') txt += ` using ${using}`\n    else throw Error('Invalid order by property \"using\"')\n  }\n  // nulls\n  if (nulls === undefined);\n  else if (nulls === 'last') txt += ' nulls last'\n  else if (nulls === 'first') txt += ' nulls first'\n  else throw Error('Invalid order by property \"nulls\"')\n  // return\n  return txt\n}\n\nconst calls = mapJoin(buildCall(mapJoin(buildArg)))\n","const limitOffset = require('../common/limit_offset')\n\nmodule.exports = ctx => ctx.limit && `limit ${limitOffset(ctx, ctx.limit)}`\n","const limitOffset = require('../common/limit_offset')\n\nmodule.exports = ctx => ctx.offset && `offset ${limitOffset(ctx, ctx.offset)}`\n","const fromItems = require('../common/from_items')\n\nmodule.exports = ctx => {\n  const txt = fromItems(ctx, ctx.frm)\n  return txt && `delete from ${txt}`\n}\n","const expressions = require('../common/expressions')\n\nmodule.exports = ctx => {\n  if (!ctx.ret) return\n  const txt = expressions(ctx, ctx.ret)\n  return txt && `returning ${txt}`\n}\n","const { isTaggedTemplate, buildTaggedTemplate } = require('../../lib-util')\nconst fromItems = require('../common/from_items')\nconst valuesArray = require('../common/values_array')\n\nmodule.exports = ctx => {\n  const table = fromItems(ctx, ctx.frm)\n  const values = buildCall(ctx, ctx.insert)\n  return `insert into ${table}${values}`\n}\n\nconst buildCall = (ctx, args) => {\n  if (isTaggedTemplate(args)) return ' ' + buildTaggedTemplate(ctx, args)\n  if (args.length === 1 && args[0] === undefined) return ' default values'\n  if (Array.isArray(args[0])) return buildValuesArray(ctx, args[0])\n  if (typeof args[0] === 'function') return ' ' + ctx.build(args[0])\n  return buildValuesArray(ctx, args)\n}\n\nconst buildValuesArray = (ctx, array) => {\n  const { values, columns } = valuesArray(ctx, array)\n  return `(${columns}) ${values}`\n}\n","const fromItems = require('../common/from_items')\n\nmodule.exports = ctx => {\n  const txt = fromItems(ctx, ctx.frm)\n  return txt && `update ${txt}`\n}\n","const { buildCall, mapJoin, objectMapJoin } = require('../../lib-util')\n\nmodule.exports = ctx => {\n  if (!ctx.set) return\n  const txt = calls(ctx, ctx.set)\n  return txt && 'set ' + txt\n}\n\nconst buildProperty = (ctx, key, value) =>\n  `${ctx.mapKey(key)} = ${ctx.build(value)}`\n\nconst calls = mapJoin(buildCall(mapJoin(objectMapJoin(buildProperty))))\n","const conditions = require('./conditions')\nconst expressions = require('./expressions')\nconst fromItems = require('./from_items')\nconst limitOffset = require('./limit_offset')\nconst valuesArray = require('./values_array')\n\nmodule.exports = {\n  conditions,\n  expressions,\n  fromItems,\n  limitOffset,\n  valuesArray\n}\n","const expressions = require('../lib-expression')\n\nmodule.exports = { expressions }","const {\n    unaryPre,\n    unaryPost,\n    unaryFunction,\n    binary,\n    ternary,\n    nary,\n    naryFunction,\n    oneValue,\n    compositeValue,\n    membership,\n    quantifiedComparison,\n    dateBinary\n} = require('./util')\n\n// value\nconst value = {\n    arg: compositeValue,\n    row: compositeValue,\n    unknown: oneValue,\n    boolean: oneValue,\n    number: oneValue,\n    string: oneValue,\n    array: oneValue,\n    json: oneValue,\n    table: oneValue\n}\n\n// boolean\nconst boolean = {\n    // logical\n    and: nary('and'),\n    or: nary('or'),\n    not: unaryFunction('not'),\n    // comparison\n    isTrue: unaryPost('is true'),\n    isNotTrue: unaryPost('is not true'),\n    isFalse: unaryPost('is false'),\n    isNotFalse: unaryPost('is not false'),\n    isUnknown: unaryPost('is unknown'),\n    isNotUnknown: unaryPost('is not unknown')\n}\n\n// comparison\nconst comparison = {\n    // binary comparison\n    eq: binary('='),\n    neq: binary('<>'),\n    lt: binary('<'),\n    gt: binary('>'),\n    lte: binary('<='),\n    gte: binary('>='),\n    // misc\n    between: ternary('between', 'and'),\n    isDistinctFrom: binary('is distinct from'),\n    isNotDistinctFrom: binary('is not distinct from'),\n    isNull: unaryPost('is null'),\n    isNotNull: unaryPost('is not null'),\n    in: membership('in'),\n    notIn: membership('not in'),\n    // quantified any\n    eqAny: quantifiedComparison('= any'),\n    neqAny: quantifiedComparison('<> any'),\n    ltAny: quantifiedComparison('< any'),\n    gtAny: quantifiedComparison('> any'),\n    lteAny: quantifiedComparison('<= any'),\n    gteAny: quantifiedComparison('>= any'),\n    // quantified all\n    eqAll: quantifiedComparison('= all'),\n    neqAll: quantifiedComparison('<> all'),\n    ltAll: quantifiedComparison('< all'),\n    gtAll: quantifiedComparison('> all'),\n    lteAll: quantifiedComparison('<= all'),\n    gteAll: quantifiedComparison('>= all')\n}\n\n// dates\nconst dateComparison = {\n    // dateEq: dateBinary('='),\n    // dateNeq: dateBinary('<>'),\n    dateLt: dateBinary('<'),\n    dateGt: dateBinary('>'),\n    dateLte: dateBinary('<='),\n    dateGte: dateBinary('>=')\n}\n\n// math\nconst math = {\n    add: binary('+'),\n    sub: binary('-'),\n    mul: binary('*'),\n    div: binary('/'),\n    mod: binary('%'),\n    exp: binary('%'),\n    sqrt: unaryPre('|/'),\n    cbrt: unaryPre('||/'),\n    fact: unaryPre('!!'),\n    abs: unaryFunction('abs')\n}\n\n// string\nconst string = {\n    like: binary('like'),\n    notLike: binary('not like')\n}\n\nconst array = {\n    unnest: naryFunction('unnest')\n}\n\nmodule.exports = {\n    ...value,\n    ...boolean,\n    ...comparison,\n    ...math,\n    ...array,\n    ...dateComparison,\n    ...string\n}\n","const { buildTaggedTemplate } = require('../lib-util')\n\nconst dateToYYYYMMDD = d => [\n    d.getFullYear(),\n    ('0' + (d.getMonth() + 1)).slice(-2),\n    ('0' + d.getDate()).slice(-2)\n].join('-');\n\nconst build = (ctx, arg) => {\n    // compiled expression string\n    if (arg.exp) return arg.exp\n    // tagged template argument\n    if (arg.tag) return buildTaggedTemplate(ctx, arg.tag)\n    // expression, subquery or fragment argument\n    return ctx.build(arg.arg)\n}\n\nconst unaryPre = op => ({\n    minArgs: 1,\n    maxArgs: 1,\n    build: (ctx, args) => `(${op} ${build(ctx, args[0])})`\n})\n\nconst unaryPost = op => ({\n    minArgs: 1,\n    maxArgs: 1,\n    build: (ctx, args) => `(${build(ctx, args[0])} ${op})`\n})\n\nconst unaryFunction = op => ({\n    minArgs: 1,\n    maxArgs: 1,\n    build: (ctx, args) => `${op}(${build(ctx, args[0])})`\n})\n\nconst binary = op => ({\n    minArgs: 2,\n    maxArgs: 2,\n    build: (ctx, args) => `(${build(ctx, args[0])} ${op} ${build(ctx, args[1])})`\n})\n\nconst dateBinary = op => ({\n    minArgs: 2,\n    maxArgs: 2,\n    build: (ctx, args) => {\n        const inDate = args[1].arg;\n        if (typeof inDate.getMonth === 'function') {\n            args[1].arg = dateToYYYYMMDD(inDate);\n        }\n        return `date(${build(ctx, args[0])}, 'YYYY-MM-DD') ${op} ${build(ctx, args[1])}`\n    }\n})\n\n\nconst ternary = (op1, op2) => ({\n    minArgs: 3,\n    maxArgs: 3,\n    build: (ctx, args) =>\n        `(${build(ctx, args[0])} ${op1} ${build(ctx, args[1])} ${op2} ${build(\n            ctx,\n            args[2]\n        )})`\n})\n\nconst nary = op => ({\n    minArgs: 1,\n    maxArgs: Number.MAX_SAFE_INTEGER,\n    build: (ctx, args) => {\n        if (args.length === 1) return build(ctx, args[0])\n        let txt = '('\n        for (let i = 0; i < args.length; ++i) {\n            if (i !== 0) txt += ` ${op} `\n            txt += build(ctx, args[i])\n        }\n        return txt + ')'\n    }\n})\n\nconst naryFunction = fn => ({\n    minArgs: 1,\n    maxArgs: Number.MAX_SAFE_INTEGER,\n    build: (ctx, args) => {\n        let txt = `${fn}(`\n        for (let i = 0; i < args.length; ++i) {\n            if (i !== 0) txt += `, `\n            txt += build(ctx, args[i])\n        }\n        return txt + ')'\n    }\n})\n\nconst oneValue = {\n    minArgs: 1,\n    maxArgs: 1,\n    build: (ctx, args) => build(ctx, args[0])\n}\n\nconst compositeValue = {\n    minArgs: 1,\n    maxArgs: Number.MAX_SAFE_INTEGER,\n    build: (ctx, args) => {\n        if (args.length === 1) return build(ctx, args[0])\n        let txt = ''\n        for (let i = 0; i < args.length; ++i) {\n            if (i !== 0) txt += ', '\n            txt += build(ctx, args[i])\n        }\n        return args.length > 1 ? `(${txt})` : txt\n    }\n}\n\nconst buildValuesList = (ctx, values) => {\n    if (values.length === 0) throw Error('Error: .in operation values list empty')\n    let txt = '('\n    for (let i = 0; i < values.length; ++i) {\n        if (i !== 0) txt += ', '\n        txt += ctx.build(values[i])\n    }\n    return txt + ')'\n}\n\nconst membership = op => ({\n    minArgs: 2,\n    maxArgs: 2,\n    build: (ctx, [arg1, arg2]) =>\n        `(${build(ctx, arg1)} ${op} ${Array.isArray(arg2.arg)\n            ? buildValuesList(ctx, arg2.arg)\n            : build(ctx, arg2)\n        })`\n})\n\nconst quantifiedComparison = op => ({\n    minArgs: 2,\n    maxArgs: 2,\n    build: (ctx, args) => `(${build(ctx, args[0])} ${op}(${build(ctx, args[1])}))`\n})\n\nmodule.exports = {\n    build,\n    unaryFunction,\n    unaryPre,\n    unaryPost,\n    binary,\n    ternary,\n    nary,\n    naryFunction,\n    oneValue,\n    compositeValue,\n    membership,\n    quantifiedComparison,\n    dateBinary\n}\n","// parameterizes given argument, function should be attached to ctx\nfunction parameterize(arg) {\n    if (arg === undefined) throw Error('Error: parameter is undefined')\n    return `$${this.params.push(arg)}`\n}\n\n/** Escapes an argument for use in UNPARAMETERIZED queries. NOT SAFE AT ALL. */\nconst escape = arg => {\n    if (arg === undefined) throw Error('Error: parameter is undefined')\n    if (arg === null) return 'null'\n    if (typeof arg === 'string') return escapeLiteral(arg)\n    if (typeof arg === 'number') return '' + arg\n    if (typeof arg === 'boolean') return '' + arg\n    if (typeof arg === 'object') {\n        if (Array.isArray(arg)) {\n            return `array[${arg.map(e => escape(e)).join(', ')}]`\n        } else {\n            return escapeLiteral(JSON.stringify(arg))\n        }\n    }\n    throw Error(`Invalid argument SQL argument of type '${typeof arg}'`, arg)\n}\n\n// from https://github.com/brianc/node-postgres/blob/eb076db5d47a29c19d3212feac26cd7b6d257a95/lib/client.js#L351\nconst escapeLiteral = str => {\n    let hasBackslash = false\n    let escaped = \"'\"\n    for (let i = 0; i < str.length; i++) {\n        const c = str[i]\n        if (c === \"'\") {\n            escaped += c + c\n        } else if (c === '\\\\') {\n            escaped += c + c\n            hasBackslash = true\n        } else {\n            escaped += c\n        }\n    }\n    escaped += \"'\"\n    if (hasBackslash === true) {\n        escaped = ' E' + escaped\n    }\n    return escaped\n}\n\nmodule.exports = {\n    parameterize,\n    escape\n}\n","export var POST_TYPES;\n(function (POST_TYPES) {\n    POST_TYPES[\"UPLOAD_ATTACHMENT\"] = \"upload_attachment\";\n    POST_TYPES[\"HANDSHAKE\"] = \"handshake\";\n    POST_TYPES[\"VALID_TOKEN\"] = \"valid_token\";\n    POST_TYPES[\"GET_FRAME\"] = \"get_frame\";\n    POST_TYPES[\"TABLE_SIZE\"] = \"table_size\";\n    POST_TYPES[\"COLUMN_TYPES\"] = \"column_types\";\n    POST_TYPES[\"SYNC_STACK\"] = \"sync_stack\";\n    POST_TYPES[\"SYNC_DELETE\"] = \"sync_delete\";\n    POST_TYPES[\"SYNC_INSERT\"] = \"sync_insert\";\n    POST_TYPES[\"GET_QUERY\"] = \"get_query\";\n    POST_TYPES[\"USER_ATTRIBUTES\"] = \"user_attributes\";\n    POST_TYPES[\"SET_ATTRIBUTE\"] = \"set_attribute\";\n    POST_TYPES[\"SIGN_UP\"] = \"sign_up\";\n    POST_TYPES[\"REQUEST_TOKEN\"] = \"request_token\";\n    POST_TYPES[\"EASY_QB\"] = \"easyqb\";\n})(POST_TYPES || (POST_TYPES = {}));\nexport var DB_STATUS;\n(function (DB_STATUS) {\n    DB_STATUS[\"ERROR\"] = \"error\";\n    DB_STATUS[\"PENDING\"] = \"pending\";\n    DB_STATUS[\"SUCCESS\"] = \"success\";\n})(DB_STATUS || (DB_STATUS = {}));\nexport var EXECUTE_COUNT;\n(function (EXECUTE_COUNT) {\n    EXECUTE_COUNT[\"ALL\"] = \"all\";\n    EXECUTE_COUNT[\"ONE\"] = \"one\";\n})(EXECUTE_COUNT || (EXECUTE_COUNT = {}));\n","var GlobalNamespace;\n(function (GlobalNamespace) {\n})(GlobalNamespace || (GlobalNamespace = {}));\nconst _g = { ...GlobalNamespace };\nexport default _g;\nexport function gFactory() {\n    return { ...GlobalNamespace };\n}\n","const\n\tINSERT = 'insert',\n\tUPDATE = 'update',\n\tDELETE = 'delete',\n\tREVERSE = 'reverse',\n\tSHUFFLE = 'shuffle',\n\toMetaKey = Symbol('observable-meta-key'),\n\tvalidObservableOptionKeys = { async: 1 },\n\tvalidObserverOptionKeys = { path: 1, pathsOf: 1, pathsFrom: 1 },\n\tprocessObserveOptions = function processObserveOptions(options) {\n\t\tconst result = {};\n\t\tif (options.path !== undefined) {\n\t\t\tif (typeof options.path !== 'string' || options.path === '') {\n\t\t\t\tthrow new Error('\"path\" option, if/when provided, MUST be a non-empty string');\n\t\t\t}\n\t\t\tresult.path = options.path;\n\t\t}\n\t\tif (options.pathsOf !== undefined) {\n\t\t\tif (options.path) {\n\t\t\t\tthrow new Error('\"pathsOf\" option MAY NOT be specified together with \"path\" option');\n\t\t\t}\n\t\t\tif (typeof options.pathsOf !== 'string') {\n\t\t\t\tthrow new Error('\"pathsOf\" option, if/when provided, MUST be a string (MAY be empty)');\n\t\t\t}\n\t\t\tresult.pathsOf = options.pathsOf.split('.').filter(n => n);\n\t\t}\n\t\tif (options.pathsFrom !== undefined) {\n\t\t\tif (options.path || options.pathsOf) {\n\t\t\t\tthrow new Error('\"pathsFrom\" option MAY NOT be specified together with \"path\"/\"pathsOf\"  option/s');\n\t\t\t}\n\t\t\tif (typeof options.pathsFrom !== 'string' || options.pathsFrom === '') {\n\t\t\t\tthrow new Error('\"pathsFrom\" option, if/when provided, MUST be a non-empty string');\n\t\t\t}\n\t\t\tresult.pathsFrom = options.pathsFrom;\n\t\t}\n\t\tconst invalidOptions = Object.keys(options).filter(option => !validObserverOptionKeys.hasOwnProperty(option));\n\t\tif (invalidOptions.length) {\n\t\t\tthrow new Error(`'${invalidOptions.join(', ')}' is/are not a valid observer option/s`);\n\t\t}\n\t\treturn result;\n\t},\n\tobserve = function observe(observer, options) {\n\t\tif (typeof observer !== 'function') {\n\t\t\tthrow new Error(`observer MUST be a function, got '${observer}'`);\n\t\t}\n\n\t\tconst\n\t\t\toMeta = this[oMetaKey],\n\t\t\tobservers = oMeta.observers;\n\t\tif (!observers.some(o => o[0] === observer)) {\n\t\t\tlet opts;\n\t\t\tif (options) {\n\t\t\t\topts = processObserveOptions(options);\n\t\t\t} else {\n\t\t\t\topts = {};\n\t\t\t}\n\t\t\tobservers.push([observer, opts]);\n\t\t} else {\n\t\t\tconsole.warn('observer may be bound to an observable only once; will NOT rebind');\n\t\t}\n\t},\n\tunobserve = function unobserve() {\n\t\tconst oMeta = this[oMetaKey];\n\t\tconst observers = oMeta.observers;\n\t\tlet ol = observers.length;\n\t\tif (ol) {\n\t\t\tlet al = arguments.length;\n\t\t\tif (al) {\n\t\t\t\twhile (al--) {\n\t\t\t\t\tlet i = ol;\n\t\t\t\t\twhile (i--) {\n\t\t\t\t\t\tif (observers[i][0] === arguments[al]) {\n\t\t\t\t\t\t\tobservers.splice(i, 1);\n\t\t\t\t\t\t\tol--;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tobservers.splice(0);\n\t\t\t}\n\t\t}\n\t},\n\tpropertiesBluePrint = { [oMetaKey]: { value: null }, observe: { value: observe }, unobserve: { value: unobserve } },\n\tprepareObject = function prepareObject(source, oMeta) {\n\t\tpropertiesBluePrint[oMetaKey].value = oMeta;\n\t\tconst target = Object.defineProperties({}, propertiesBluePrint);\n\t\tfor (const key of Object.keys(source)) {\n\t\t\ttarget[key] = getObservedOf(source[key], key, oMeta);\n\t\t}\n\t\treturn target;\n\t},\n\tprepareArray = function prepareArray(source, oMeta) {\n\t\tlet i = 0, l = source.length;\n\t\tpropertiesBluePrint[oMetaKey].value = oMeta;\n\t\tconst target = Object.defineProperties(new Array(l), propertiesBluePrint);\n\t\tfor (; i < l; i++) {\n\t\t\ttarget[i] = getObservedOf(source[i], i, oMeta);\n\t\t}\n\t\treturn target;\n\t},\n\tprepareTypedArray = function prepareTypedArray(source, oMeta) {\n\t\tpropertiesBluePrint[oMetaKey].value = oMeta;\n\t\tObject.defineProperties(source, propertiesBluePrint);\n\t\treturn source;\n\t},\n\tfilterChanges = function filterChanges(options, changes) {\n\t\tlet result = changes;\n\t\tif (options.path) {\n\t\t\tconst oPath = options.path;\n\t\t\tresult = changes.filter(change =>\n\t\t\t\tchange.path.join('.') === oPath\n\t\t\t);\n\t\t} else if (options.pathsOf) {\n\t\t\tconst oPathsOf = options.pathsOf;\n\t\t\tresult = changes.filter(change =>\n\t\t\t\tchange.path.length === oPathsOf.length + 1 ||\n\t\t\t\t(change.path.length === oPathsOf.length && (change.type === REVERSE || change.type === SHUFFLE))\n\t\t\t);\n\t\t} else if (options.pathsFrom) {\n\t\t\tconst oPathsFrom = options.pathsFrom;\n\t\t\tresult = changes.filter(change =>\n\t\t\t\tchange.path.join('.').startsWith(oPathsFrom)\n\t\t\t);\n\t\t}\n\t\treturn result;\n\t},\n\tcallObserverSafe = function callObserverSafe(listener, changes) {\n\t\ttry {\n\t\t\tlistener(changes);\n\t\t} catch (e) {\n\t\t\tconsole.error(`failed to notify listener ${listener} with ${changes}`, e);\n\t\t}\n\t},\n\tcallObserversFromMT = function callObserversFromMT() {\n\t\tconst batches = this.batches;\n\t\tthis.batches = null;\n\t\tfor (const [listener, options] of batches) {\n\t\t\tcallObserverSafe(listener, options);\n\t\t}\n\t},\n\tcallObservers = function callObservers(oMeta, changes) {\n\t\tlet currentObservable = oMeta;\n\t\tlet observers, target, options, relevantChanges, i, newPath, tmp;\n\t\tconst l = changes.length;\n\t\tdo {\n\t\t\tobservers = currentObservable.observers;\n\t\t\ti = observers.length;\n\t\t\twhile (i--) {\n\t\t\t\t[target, options] = observers[i];\n\t\t\t\trelevantChanges = filterChanges(options, changes);\n\n\t\t\t\tif (relevantChanges.length) {\n\t\t\t\t\tif (currentObservable.options.async) {\n\t\t\t\t\t\t//\tthis is the async dispatch handling\n\t\t\t\t\t\tif (!currentObservable.batches) {\n\t\t\t\t\t\t\tcurrentObservable.batches = [];\n\t\t\t\t\t\t\tqueueMicrotask(callObserversFromMT.bind(currentObservable));\n\t\t\t\t\t\t}\n\t\t\t\t\t\tlet rb = currentObservable.batches.find(b => b[0] === target);\n\t\t\t\t\t\tif (!rb) {\n\t\t\t\t\t\t\trb = [target, []];\n\t\t\t\t\t\t\tcurrentObservable.batches.push(rb);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tArray.prototype.push.apply(rb[1], relevantChanges);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//\tthis is the naive straight forward synchronous dispatch\n\t\t\t\t\t\tcallObserverSafe(target, relevantChanges);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tlet tmpa;\n\t\t\tif (currentObservable.parent) {\n\t\t\t\ttmpa = new Array(l);\n\t\t\t\tfor (let i = 0; i < l; i++) {\n\t\t\t\t\ttmp = changes[i];\n\t\t\t\t\tnewPath = [currentObservable.ownKey, ...tmp.path];\n\t\t\t\t\ttmpa[i] = {\n\t\t\t\t\t\ttype: tmp.type,\n\t\t\t\t\t\tpath: newPath,\n\t\t\t\t\t\tvalue: tmp.value,\n\t\t\t\t\t\toldValue: tmp.oldValue,\n\t\t\t\t\t\tobject: tmp.object\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tchanges = tmpa;\n\t\t\t\tcurrentObservable = currentObservable.parent;\n\t\t\t} else {\n\t\t\t\tcurrentObservable = null;\n\t\t\t}\n\t\t} while (currentObservable);\n\t},\n\tgetObservedOf = function getObservedOf(item, key, parent) {\n\t\tif (!item || typeof item !== 'object') {\n\t\t\treturn item;\n\t\t} else if (Array.isArray(item)) {\n\t\t\treturn new ArrayOMeta({ target: item, ownKey: key, parent: parent }).proxy;\n\t\t} else if (ArrayBuffer.isView(item)) {\n\t\t\treturn new TypedArrayOMeta({ target: item, ownKey: key, parent: parent }).proxy;\n\t\t} else if (item instanceof Date || item instanceof Error) {\n\t\t\treturn item;\n\t\t} else {\n\t\t\treturn new ObjectOMeta({ target: item, ownKey: key, parent: parent }).proxy;\n\t\t}\n\t},\n\tproxiedPop = function proxiedPop() {\n\t\tconst oMeta = this[oMetaKey],\n\t\t\ttarget = oMeta.target,\n\t\t\tpoppedIndex = target.length - 1;\n\n\t\tlet popResult = target.pop();\n\t\tif (popResult && typeof popResult === 'object') {\n\t\t\tconst tmpObserved = popResult[oMetaKey];\n\t\t\tif (tmpObserved) {\n\t\t\t\tpopResult = tmpObserved.detach();\n\t\t\t}\n\t\t}\n\n\t\tconst changes = [{ type: DELETE, path: [poppedIndex], oldValue: popResult, object: this }];\n\t\tcallObservers(oMeta, changes);\n\n\t\treturn popResult;\n\t},\n\tproxiedPush = function proxiedPush() {\n\t\tconst\n\t\t\toMeta = this[oMetaKey],\n\t\t\ttarget = oMeta.target,\n\t\t\tl = arguments.length,\n\t\t\tpushContent = new Array(l),\n\t\t\tinitialLength = target.length;\n\n\t\tfor (let i = 0; i < l; i++) {\n\t\t\tpushContent[i] = getObservedOf(arguments[i], initialLength + i, oMeta);\n\t\t}\n\t\tconst pushResult = Reflect.apply(target.push, target, pushContent);\n\n\t\tconst changes = [];\n\t\tfor (let i = initialLength, l = target.length; i < l; i++) {\n\t\t\tchanges[i - initialLength] = { type: INSERT, path: [i], value: target[i], object: this };\n\t\t}\n\t\tcallObservers(oMeta, changes);\n\n\t\treturn pushResult;\n\t},\n\tproxiedShift = function proxiedShift() {\n\t\tconst\n\t\t\toMeta = this[oMetaKey],\n\t\t\ttarget = oMeta.target;\n\t\tlet shiftResult, i, l, item, tmpObserved;\n\n\t\tshiftResult = target.shift();\n\t\tif (shiftResult && typeof shiftResult === 'object') {\n\t\t\ttmpObserved = shiftResult[oMetaKey];\n\t\t\tif (tmpObserved) {\n\t\t\t\tshiftResult = tmpObserved.detach();\n\t\t\t}\n\t\t}\n\n\t\t//\tupdate indices of the remaining items\n\t\tfor (i = 0, l = target.length; i < l; i++) {\n\t\t\titem = target[i];\n\t\t\tif (item && typeof item === 'object') {\n\t\t\t\ttmpObserved = item[oMetaKey];\n\t\t\t\tif (tmpObserved) {\n\t\t\t\t\ttmpObserved.ownKey = i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst changes = [{ type: DELETE, path: [0], oldValue: shiftResult, object: this }];\n\t\tcallObservers(oMeta, changes);\n\n\t\treturn shiftResult;\n\t},\n\tproxiedUnshift = function proxiedUnshift() {\n\t\tconst\n\t\t\toMeta = this[oMetaKey],\n\t\t\ttarget = oMeta.target,\n\t\t\tal = arguments.length,\n\t\t\tunshiftContent = new Array(al);\n\n\t\tfor (let i = 0; i < al; i++) {\n\t\t\tunshiftContent[i] = getObservedOf(arguments[i], i, oMeta);\n\t\t}\n\t\tconst unshiftResult = Reflect.apply(target.unshift, target, unshiftContent);\n\n\t\tfor (let i = 0, l = target.length, item; i < l; i++) {\n\t\t\titem = target[i];\n\t\t\tif (item && typeof item === 'object') {\n\t\t\t\tconst tmpObserved = item[oMetaKey];\n\t\t\t\tif (tmpObserved) {\n\t\t\t\t\ttmpObserved.ownKey = i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//\tpublish changes\n\t\tconst l = unshiftContent.length;\n\t\tconst changes = new Array(l);\n\t\tfor (let i = 0; i < l; i++) {\n\t\t\tchanges[i] = { type: INSERT, path: [i], value: target[i], object: this };\n\t\t}\n\t\tcallObservers(oMeta, changes);\n\n\t\treturn unshiftResult;\n\t},\n\tproxiedReverse = function proxiedReverse() {\n\t\tconst\n\t\t\toMeta = this[oMetaKey],\n\t\t\ttarget = oMeta.target;\n\t\tlet i, l, item;\n\n\t\ttarget.reverse();\n\t\tfor (i = 0, l = target.length; i < l; i++) {\n\t\t\titem = target[i];\n\t\t\tif (item && typeof item === 'object') {\n\t\t\t\tconst tmpObserved = item[oMetaKey];\n\t\t\t\tif (tmpObserved) {\n\t\t\t\t\ttmpObserved.ownKey = i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst changes = [{ type: REVERSE, path: [], object: this }];\n\t\tcallObservers(oMeta, changes);\n\n\t\treturn this;\n\t},\n\tproxiedSort = function proxiedSort(comparator) {\n\t\tconst\n\t\t\toMeta = this[oMetaKey],\n\t\t\ttarget = oMeta.target;\n\t\tlet i, l, item;\n\n\t\ttarget.sort(comparator);\n\t\tfor (i = 0, l = target.length; i < l; i++) {\n\t\t\titem = target[i];\n\t\t\tif (item && typeof item === 'object') {\n\t\t\t\tconst tmpObserved = item[oMetaKey];\n\t\t\t\tif (tmpObserved) {\n\t\t\t\t\ttmpObserved.ownKey = i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst changes = [{ type: SHUFFLE, path: [], object: this }];\n\t\tcallObservers(oMeta, changes);\n\n\t\treturn this;\n\t},\n\tproxiedFill = function proxiedFill(filVal, start, end) {\n\t\tconst\n\t\t\toMeta = this[oMetaKey],\n\t\t\ttarget = oMeta.target,\n\t\t\tchanges = [],\n\t\t\ttarLen = target.length,\n\t\t\tprev = target.slice(0);\n\t\tstart = start === undefined ? 0 : (start < 0 ? Math.max(tarLen + start, 0) : Math.min(start, tarLen));\n\t\tend = end === undefined ? tarLen : (end < 0 ? Math.max(tarLen + end, 0) : Math.min(end, tarLen));\n\n\t\tif (start < tarLen && end > start) {\n\t\t\ttarget.fill(filVal, start, end);\n\n\t\t\tlet tmpObserved;\n\t\t\tfor (let i = start, item, tmpTarget; i < end; i++) {\n\t\t\t\titem = target[i];\n\t\t\t\ttarget[i] = getObservedOf(item, i, oMeta);\n\t\t\t\tif (prev.hasOwnProperty(i)) {\n\t\t\t\t\ttmpTarget = prev[i];\n\t\t\t\t\tif (tmpTarget && typeof tmpTarget === 'object') {\n\t\t\t\t\t\ttmpObserved = tmpTarget[oMetaKey];\n\t\t\t\t\t\tif (tmpObserved) {\n\t\t\t\t\t\t\ttmpTarget = tmpObserved.detach();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tchanges.push({ type: UPDATE, path: [i], value: target[i], oldValue: tmpTarget, object: this });\n\t\t\t\t} else {\n\t\t\t\t\tchanges.push({ type: INSERT, path: [i], value: target[i], object: this });\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tcallObservers(oMeta, changes);\n\t\t}\n\n\t\treturn this;\n\t},\n\tproxiedCopyWithin = function proxiedCopyWithin(dest, start, end) {\n\t\tconst\n\t\t\toMeta = this[oMetaKey],\n\t\t\ttarget = oMeta.target,\n\t\t\ttarLen = target.length;\n\t\tdest = dest < 0 ? Math.max(tarLen + dest, 0) : dest;\n\t\tstart = start === undefined ? 0 : (start < 0 ? Math.max(tarLen + start, 0) : Math.min(start, tarLen));\n\t\tend = end === undefined ? tarLen : (end < 0 ? Math.max(tarLen + end, 0) : Math.min(end, tarLen));\n\t\tconst len = Math.min(end - start, tarLen - dest);\n\n\t\tif (dest < tarLen && dest !== start && len > 0) {\n\t\t\tconst\n\t\t\t\tprev = target.slice(0),\n\t\t\t\tchanges = [];\n\n\t\t\ttarget.copyWithin(dest, start, end);\n\n\t\t\tfor (let i = dest, nItem, oItem, tmpObserved; i < dest + len; i++) {\n\t\t\t\t//\tupdate newly placed observables, if any\n\t\t\t\tnItem = target[i];\n\t\t\t\tif (nItem && typeof nItem === 'object') {\n\t\t\t\t\tnItem = getObservedOf(nItem, i, oMeta);\n\t\t\t\t\ttarget[i] = nItem;\n\t\t\t\t}\n\n\t\t\t\t//\tdetach overridden observables, if any\n\t\t\t\toItem = prev[i];\n\t\t\t\tif (oItem && typeof oItem === 'object') {\n\t\t\t\t\ttmpObserved = oItem[oMetaKey];\n\t\t\t\t\tif (tmpObserved) {\n\t\t\t\t\t\toItem = tmpObserved.detach();\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (typeof nItem !== 'object' && nItem === oItem) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tchanges.push({ type: UPDATE, path: [i], value: nItem, oldValue: oItem, object: this });\n\t\t\t}\n\n\t\t\tcallObservers(oMeta, changes);\n\t\t}\n\n\t\treturn this;\n\t},\n\tproxiedSplice = function proxiedSplice() {\n\t\tconst\n\t\t\toMeta = this[oMetaKey],\n\t\t\ttarget = oMeta.target,\n\t\t\tsplLen = arguments.length,\n\t\t\tspliceContent = new Array(splLen),\n\t\t\ttarLen = target.length;\n\n\t\t//\tobservify the newcomers\n\t\tfor (let i = 0; i < splLen; i++) {\n\t\t\tspliceContent[i] = getObservedOf(arguments[i], i, oMeta);\n\t\t}\n\n\t\t//\tcalculate pointers\n\t\tconst\n\t\t\tstartIndex = splLen === 0 ? 0 : (spliceContent[0] < 0 ? tarLen + spliceContent[0] : spliceContent[0]),\n\t\t\tremoved = splLen < 2 ? tarLen - startIndex : spliceContent[1],\n\t\t\tinserted = Math.max(splLen - 2, 0),\n\t\t\tspliceResult = Reflect.apply(target.splice, target, spliceContent),\n\t\t\tnewTarLen = target.length;\n\n\t\t//\treindex the paths\n\t\tlet tmpObserved;\n\t\tfor (let i = 0, item; i < newTarLen; i++) {\n\t\t\titem = target[i];\n\t\t\tif (item && typeof item === 'object') {\n\t\t\t\ttmpObserved = item[oMetaKey];\n\t\t\t\tif (tmpObserved) {\n\t\t\t\t\ttmpObserved.ownKey = i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t//\tdetach removed objects\n\t\tlet i, l, item;\n\t\tfor (i = 0, l = spliceResult.length; i < l; i++) {\n\t\t\titem = spliceResult[i];\n\t\t\tif (item && typeof item === 'object') {\n\t\t\t\ttmpObserved = item[oMetaKey];\n\t\t\t\tif (tmpObserved) {\n\t\t\t\t\tspliceResult[i] = tmpObserved.detach();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tconst changes = [];\n\t\tlet index;\n\t\tfor (index = 0; index < removed; index++) {\n\t\t\tif (index < inserted) {\n\t\t\t\tchanges.push({ type: UPDATE, path: [startIndex + index], value: target[startIndex + index], oldValue: spliceResult[index], object: this });\n\t\t\t} else {\n\t\t\t\tchanges.push({ type: DELETE, path: [startIndex + index], oldValue: spliceResult[index], object: this });\n\t\t\t}\n\t\t}\n\t\tfor (; index < inserted; index++) {\n\t\t\tchanges.push({ type: INSERT, path: [startIndex + index], value: target[startIndex + index], object: this });\n\t\t}\n\t\tcallObservers(oMeta, changes);\n\n\t\treturn spliceResult;\n\t},\n\tproxiedTypedArraySet = function proxiedTypedArraySet(source, offset) {\n\t\tconst\n\t\t\toMeta = this[oMetaKey],\n\t\t\ttarget = oMeta.target,\n\t\t\tsouLen = source.length,\n\t\t\tprev = target.slice(0);\n\t\toffset = offset || 0;\n\n\t\ttarget.set(source, offset);\n\t\tconst changes = new Array(souLen);\n\t\tfor (let i = offset; i < (souLen + offset); i++) {\n\t\t\tchanges[i - offset] = { type: UPDATE, path: [i], value: target[i], oldValue: prev[i], object: this };\n\t\t}\n\n\t\tcallObservers(oMeta, changes);\n\t},\n\tproxiedArrayMethods = {\n\t\tpop: proxiedPop,\n\t\tpush: proxiedPush,\n\t\tshift: proxiedShift,\n\t\tunshift: proxiedUnshift,\n\t\treverse: proxiedReverse,\n\t\tsort: proxiedSort,\n\t\tfill: proxiedFill,\n\t\tcopyWithin: proxiedCopyWithin,\n\t\tsplice: proxiedSplice\n\t},\n\tproxiedTypedArrayMethods = {\n\t\treverse: proxiedReverse,\n\t\tsort: proxiedSort,\n\t\tfill: proxiedFill,\n\t\tcopyWithin: proxiedCopyWithin,\n\t\tset: proxiedTypedArraySet\n\t};\n\nclass OMetaBase {\n\tconstructor(properties, cloningFunction) {\n\t\tconst { target, parent, ownKey } = properties;\n\t\tif (parent && ownKey !== undefined) {\n\t\t\tthis.parent = parent;\n\t\t\tthis.ownKey = ownKey;\n\t\t} else {\n\t\t\tthis.parent = null;\n\t\t\tthis.ownKey = null;\n\t\t}\n\t\tconst targetClone = cloningFunction(target, this);\n\t\tthis.observers = [];\n\t\tthis.revocable = Proxy.revocable(targetClone, this);\n\t\tthis.proxy = this.revocable.proxy;\n\t\tthis.target = targetClone;\n\t\tthis.options = this.processOptions(properties.options);\n\t}\n\n\tprocessOptions(options) {\n\t\tif (options) {\n\t\t\tif (typeof options !== 'object') {\n\t\t\t\tthrow new Error(`Observable options if/when provided, MAY only be an object, got '${options}'`);\n\t\t\t}\n\t\t\tconst invalidOptions = Object.keys(options).filter(option => !validObservableOptionKeys.hasOwnProperty(option));\n\t\t\tif (invalidOptions.length) {\n\t\t\t\tthrow new Error(`'${invalidOptions.join(', ')}' is/are not a valid Observable option/s`);\n\t\t\t}\n\t\t\treturn Object.assign({}, options);\n\t\t} else {\n\t\t\treturn {};\n\t\t}\n\t}\n\n\tdetach() {\n\t\tthis.parent = null;\n\t\treturn this.target;\n\t}\n\n\tset(target, key, value) {\n\t\tlet oldValue = target[key];\n\n\t\tif (value !== oldValue) {\n\t\t\tconst newValue = getObservedOf(value, key, this);\n\t\t\ttarget[key] = newValue;\n\n\t\t\tif (oldValue && typeof oldValue === 'object') {\n\t\t\t\tconst tmpObserved = oldValue[oMetaKey];\n\t\t\t\tif (tmpObserved) {\n\t\t\t\t\toldValue = tmpObserved.detach();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst changes = oldValue === undefined\n\t\t\t\t? [{ type: INSERT, path: [key], value: newValue, object: this.proxy }]\n\t\t\t\t: [{ type: UPDATE, path: [key], value: newValue, oldValue: oldValue, object: this.proxy }];\n\t\t\tcallObservers(this, changes);\n\t\t}\n\n\t\treturn true;\n\t}\n\n\tdeleteProperty(target, key) {\n\t\tlet oldValue = target[key];\n\n\t\tdelete target[key];\n\n\t\tif (oldValue && typeof oldValue === 'object') {\n\t\t\tconst tmpObserved = oldValue[oMetaKey];\n\t\t\tif (tmpObserved) {\n\t\t\t\toldValue = tmpObserved.detach();\n\t\t\t}\n\t\t}\n\n\t\tconst changes = [{ type: DELETE, path: [key], oldValue: oldValue, object: this.proxy }];\n\t\tcallObservers(this, changes);\n\n\t\treturn true;\n\t}\n}\n\nclass ObjectOMeta extends OMetaBase {\n\tconstructor(properties) {\n\t\tsuper(properties, prepareObject);\n\t}\n}\n\nclass ArrayOMeta extends OMetaBase {\n\tconstructor(properties) {\n\t\tsuper(properties, prepareArray);\n\t}\n\n\tget(target, key) {\n\t\tif (proxiedArrayMethods.hasOwnProperty(key)) {\n\t\t\treturn proxiedArrayMethods[key];\n\t\t} else {\n\t\t\treturn target[key];\n\t\t}\n\t}\n}\n\nclass TypedArrayOMeta extends OMetaBase {\n\tconstructor(properties) {\n\t\tsuper(properties, prepareTypedArray);\n\t}\n\n\tget(target, key) {\n\t\tif (proxiedTypedArrayMethods.hasOwnProperty(key)) {\n\t\t\treturn proxiedTypedArrayMethods[key];\n\t\t} else {\n\t\t\treturn target[key];\n\t\t}\n\t}\n}\n\nclass Observable {\n\tconstructor() {\n\t\tthrow new Error('Observable MAY NOT be created via constructor, see \"Observable.from\" API');\n\t}\n\n\tstatic from(target, options) {\n\t\tif (!target || typeof target !== 'object') {\n\t\t\tthrow new Error('observable MAY ONLY be created from a non-null object');\n\t\t} else if (target[oMetaKey]) {\n\t\t\treturn target;\n\t\t} else if (Array.isArray(target)) {\n\t\t\treturn new ArrayOMeta({ target: target, ownKey: null, parent: null, options: options }).proxy;\n\t\t} else if (ArrayBuffer.isView(target)) {\n\t\t\treturn new TypedArrayOMeta({ target: target, ownKey: null, parent: null, options: options }).proxy;\n\t\t} else if (target instanceof Date || target instanceof Error) {\n\t\t\tthrow new Error(`${target} found to be one of a on-observable types`);\n\t\t} else {\n\t\t\treturn new ObjectOMeta({ target: target, ownKey: null, parent: null, options: options }).proxy;\n\t\t}\n\t}\n\n\tstatic isObservable(input) {\n\t\treturn !!(input && input[oMetaKey]);\n\t}\n}\n\nObject.freeze(Observable);\n\nexport { Observable };","import _g from \"./g\";\nexport default function utilsFactory(globals) {\n    const g = globals || _g;\n    const generateBareUrl = (type, integrationID) => `https://api.easybase.io/${type}/${integrationID}`;\n    const generateAuthBody = () => {\n        const stamp = Date.now();\n        return {\n            token: g.token,\n            token_time: ~~(g.session / (stamp % 64)),\n            now: stamp\n        };\n    };\n    function log(...params) {\n        if (g.options.logging) {\n            console.log(\"EASYBASE — \", ...params);\n        }\n    }\n    return {\n        generateAuthBody,\n        generateBareUrl,\n        log\n    };\n}\n","import { POST_TYPES } from \"./types\";\nimport _g from \"./g\";\nimport utilsFactory from \"./utils\";\nimport fetch from 'cross-fetch';\nexport default function authFactory(globals) {\n    const g = globals || _g;\n    const { generateBareUrl, generateAuthBody, log } = utilsFactory(g);\n    const getUserAttributes = async () => {\n        try {\n            const attrsRes = await tokenPost(POST_TYPES.USER_ATTRIBUTES);\n            return attrsRes.data;\n        }\n        catch (error) {\n            return error;\n        }\n    };\n    const setUserAttribute = async (key, value) => {\n        try {\n            const setAttrsRes = await tokenPost(POST_TYPES.SET_ATTRIBUTE, {\n                key,\n                value\n            });\n            return {\n                success: setAttrsRes.success,\n                message: JSON.stringify(setAttrsRes.data)\n            };\n        }\n        catch (error) {\n            return {\n                success: false,\n                message: \"Error\",\n                error\n            };\n        }\n    };\n    const signUp = async (newUserID, password, userAttributes) => {\n        try {\n            const signUpRes = await tokenPost(POST_TYPES.SIGN_UP, {\n                newUserID,\n                password,\n                userAttributes\n            });\n            return {\n                success: signUpRes.success,\n                message: signUpRes.data\n            };\n        }\n        catch (error) {\n            return {\n                success: false,\n                message: \"Error\",\n                error\n            };\n        }\n    };\n    const signIn = async (userID, password) => {\n        const t1 = Date.now();\n        g.session = Math.floor(100000000 + Math.random() * 900000000);\n        const integrationType = g.ebconfig.integration.split(\"-\")[0].toUpperCase() === \"PROJECT\" ? \"PROJECT\" : \"REACT\";\n        try {\n            const res = await fetch(generateBareUrl(integrationType, g.integrationID), {\n                method: \"POST\",\n                headers: {\n                    'Eb-Post-Req': POST_TYPES.HANDSHAKE,\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    version: g.ebconfig.version,\n                    session: g.session,\n                    instance: g.instance,\n                    userID,\n                    password\n                })\n            });\n            const resData = await res.json();\n            if (resData.token) {\n                g.token = resData.token;\n                g.refreshToken = resData.refreshToken;\n                g.newTokenCallback();\n                g.mounted = true;\n                const validTokenRes = await tokenPost(POST_TYPES.VALID_TOKEN);\n                const elapsed = Date.now() - t1;\n                if (validTokenRes.success) {\n                    log(\"Valid auth initiation in \" + elapsed + \"ms\");\n                    return {\n                        success: true,\n                        message: \"Successfully signed in user\"\n                    };\n                }\n                else {\n                    return {\n                        success: false,\n                        message: \"Could not sign in user\"\n                    };\n                }\n            }\n            else {\n                return {\n                    success: false,\n                    message: \"Could not sign in user\"\n                };\n            }\n        }\n        catch (error) {\n            console.error(error);\n            return {\n                success: false,\n                message: error,\n                error\n            };\n        }\n    };\n    const isUserSignedIn = () => g.token.length > 0;\n    const signOut = () => {\n        g.token = \"\";\n        g.newTokenCallback();\n    };\n    const initAuth = async () => {\n        const t1 = Date.now();\n        g.session = Math.floor(100000000 + Math.random() * 900000000);\n        log(`Handshaking on${g.instance} instance`);\n        const integrationType = g.ebconfig.integration.split(\"-\")[0].toUpperCase() === \"PROJECT\" ? \"PROJECT\" : \"REACT\";\n        try {\n            const res = await fetch(generateBareUrl(integrationType, g.integrationID), {\n                method: \"POST\",\n                headers: {\n                    'Eb-Post-Req': POST_TYPES.HANDSHAKE,\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    version: g.ebconfig.version,\n                    tt: g.ebconfig.tt,\n                    session: g.session,\n                    instance: g.instance\n                })\n            });\n            const resData = await res.json();\n            if (resData.token) {\n                g.token = resData.token;\n                g.mounted = true;\n                const validTokenRes = await tokenPost(POST_TYPES.VALID_TOKEN);\n                const elapsed = Date.now() - t1;\n                if (validTokenRes.success) {\n                    log(\"Valid auth initiation in \" + elapsed + \"ms\");\n                    return true;\n                }\n                else {\n                    return false;\n                }\n            }\n            else {\n                return false;\n            }\n        }\n        catch (error) {\n            console.error(error);\n            return false;\n        }\n    };\n    const tokenPost = async (postType, body) => {\n        if (!g.mounted) {\n            await initAuth();\n        }\n        const integrationType = g.ebconfig.integration.split(\"-\")[0].toUpperCase() === \"PROJECT\" ? \"PROJECT\" : \"REACT\";\n        try {\n            const res = await fetch(generateBareUrl(integrationType, g.integrationID), {\n                method: \"POST\",\n                headers: {\n                    'Eb-Post-Req': postType,\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                },\n                body: JSON.stringify({\n                    _auth: generateAuthBody(),\n                    ...body\n                })\n            });\n            const resData = await res.json();\n            if ({}.hasOwnProperty.call(resData, 'ErrorCode') || {}.hasOwnProperty.call(resData, 'code')) {\n                if (resData.code === \"JWT EXPIRED\") {\n                    if (integrationType === \"PROJECT\") {\n                        const req_res = await tokenPost(POST_TYPES.REQUEST_TOKEN, {\n                            refreshToken: g.refreshToken,\n                            token: g.token\n                        });\n                        if (req_res.success) {\n                            g.token = req_res.data.token;\n                            g.newTokenCallback();\n                            return tokenPost(postType, body);\n                        }\n                        else {\n                            g.token = \"\";\n                            g.refreshToken = \"\";\n                            g.newTokenCallback();\n                            return {\n                                success: false,\n                                data: req_res.data\n                            };\n                        }\n                    }\n                    else {\n                        await initAuth();\n                    }\n                    return tokenPost(postType, body);\n                }\n                return {\n                    success: false,\n                    data: resData.body\n                };\n            }\n            else {\n                return {\n                    success: resData.success,\n                    data: resData.body\n                };\n            }\n        }\n        catch (error) {\n            return {\n                success: false,\n                data: error\n            };\n        }\n    };\n    const tokenPostAttachment = async (formData, customHeaders) => {\n        if (!g.mounted) {\n            await initAuth();\n        }\n        const regularAuthbody = generateAuthBody();\n        const attachmentAuth = {\n            'Eb-token': regularAuthbody.token,\n            'Eb-token-time': regularAuthbody.token_time,\n            'Eb-now': regularAuthbody.now\n        };\n        const integrationType = g.ebconfig.integration.split(\"-\")[0].toUpperCase() === \"PROJECT\" ? \"PROJECT\" : \"REACT\";\n        try {\n            const res = await fetch(generateBareUrl(integrationType, g.integrationID), {\n                method: \"POST\",\n                headers: {\n                    'Eb-Post-Req': POST_TYPES.UPLOAD_ATTACHMENT,\n                    ...customHeaders,\n                    ...attachmentAuth\n                },\n                body: formData\n            });\n            const resData = await res.json();\n            if ({}.hasOwnProperty.call(resData, 'ErrorCode') || {}.hasOwnProperty.call(resData, 'code')) {\n                if (resData.code === \"JWT EXPIRED\") {\n                    if (integrationType === \"PROJECT\") {\n                        const req_res = await tokenPost(POST_TYPES.REQUEST_TOKEN, {\n                            refreshToken: g.refreshToken,\n                            token: g.token\n                        });\n                        if (req_res.success) {\n                            g.token = req_res.data.token;\n                            g.newTokenCallback();\n                            return tokenPostAttachment(formData, customHeaders);\n                        }\n                        else {\n                            g.token = \"\";\n                            g.refreshToken = \"\";\n                            g.newTokenCallback();\n                            return {\n                                success: false,\n                                data: req_res.data\n                            };\n                        }\n                    }\n                    else {\n                        await initAuth();\n                    }\n                    return tokenPostAttachment(formData, customHeaders);\n                }\n                return {\n                    success: false,\n                    data: resData.body\n                };\n            }\n            else {\n                return {\n                    success: resData.success,\n                    data: resData.body\n                };\n            }\n        }\n        catch (error) {\n            return {\n                success: false,\n                data: error\n            };\n        }\n    };\n    return {\n        initAuth,\n        tokenPost,\n        tokenPostAttachment,\n        signUp,\n        setUserAttribute,\n        getUserAttributes,\n        isUserSignedIn,\n        signIn,\n        signOut\n    };\n}\n","import { POST_TYPES } from \"./types\";\nimport { gFactory } from \"./g\";\nimport deepEqual from \"fast-deep-equal\";\nimport { Observable } from \"./object-observer\";\nimport imageExtensions from \"./assets/image-extensions.json\";\nimport videoExtensions from \"./assets/video-extensions.json\";\nimport authFactory from \"./auth\";\nimport utilsFactory from \"./utils\";\nimport tableFactory from \"./table\";\nimport dbFactory from './db';\nexport default function EasybaseProvider({ ebconfig, options }) {\n    const g = gFactory();\n    const { tokenPost, tokenPostAttachment, signUp, setUserAttribute, getUserAttributes, isUserSignedIn, signIn, signOut } = authFactory(g);\n    const { Query, fullTableSize, tableTypes } = tableFactory(g);\n    const { db, dbEventListener, e } = dbFactory(g);\n    const { log } = utilsFactory(g);\n    if (typeof ebconfig !== 'object' || ebconfig === null || ebconfig === undefined) {\n        console.error(\"No ebconfig object passed. do `import ebconfig from \\\"ebconfig.js\\\"` and pass it to the Easybase provider\");\n        return;\n    }\n    else if (!ebconfig.integration) {\n        console.error(\"Invalid ebconfig object passed. Download ebconfig.js from Easybase.io and try again.\");\n        return;\n    }\n    // eslint-disable-next-line dot-notation\n    const isIE = typeof document !== 'undefined' && !!document['documentMode'];\n    if (isIE) {\n        console.error(\"EASYBASE — easybasejs does not support Internet Explorer. Please use a different browser.\");\n    }\n    g.options = { ...options };\n    g.integrationID = ebconfig.integration;\n    g.ebconfig = ebconfig;\n    if (g.ebconfig.tt && g.ebconfig.integration.split(\"-\")[0].toUpperCase() !== \"PROJECT\") {\n        g.mounted = false;\n    }\n    else {\n        g.mounted = true;\n    }\n    g.instance = \"Node\";\n    let _isFrameInitialized = true;\n    let _frameConfiguration = {\n        offset: 0,\n        limit: 0\n    };\n    const _observedChangeStack = [];\n    let _recordIdMap = new WeakMap();\n    let _observableFrame = {\n        observe: (_) => { },\n        unobserve: () => { }\n    };\n    let _frame = [];\n    let isSyncing = false;\n    function Frame(index) {\n        if (typeof index === \"number\") {\n            return _observableFrame[index];\n        }\n        else {\n            return _observableFrame;\n        }\n    }\n    const _recordIDExists = (record) => !!_recordIdMap.get(record);\n    const configureFrame = (options) => {\n        _frameConfiguration = { ..._frameConfiguration };\n        if (options.limit !== undefined)\n            _frameConfiguration.limit = options.limit;\n        if (options.offset !== undefined && options.offset >= 0)\n            _frameConfiguration.offset = options.offset;\n        if (options.tableName !== undefined)\n            _frameConfiguration.tableName = options.tableName;\n        _isFrameInitialized = false;\n        return {\n            message: \"Successfully configured frame. Run sync() for changes to be shown in frame\",\n            success: true\n        };\n    };\n    const currentConfiguration = () => ({ ..._frameConfiguration });\n    const deleteRecord = async (options) => {\n        const _frameRecord = _frame.find(ele => deepEqual(ele, options.record));\n        if (_frameRecord && _recordIdMap.get(_frameRecord)) {\n            const res = await tokenPost(POST_TYPES.SYNC_DELETE, {\n                _id: _recordIdMap.get(_frameRecord),\n                tableName: options.tableName\n            });\n            return {\n                success: res.success,\n                message: res.data\n            };\n        }\n        else {\n            try {\n                const res = await tokenPost(POST_TYPES.SYNC_DELETE, {\n                    record: options.record,\n                    tableName: options.tableName\n                });\n                return {\n                    success: res.success,\n                    message: res.data\n                };\n            }\n            catch (err) {\n                console.error(\"Easybase Error: deleteRecord failed \", err);\n                return {\n                    success: false,\n                    message: \"Easybase Error: deleteRecord failed \" + err,\n                    error: err\n                };\n            }\n        }\n    };\n    const addRecord = async (options) => {\n        const defaultValues = {\n            insertAtEnd: false,\n            newRecord: {},\n            tableName: undefined\n        };\n        const fullOptions = { ...defaultValues, ...options };\n        try {\n            const res = await tokenPost(POST_TYPES.SYNC_INSERT, fullOptions);\n            return {\n                message: res.data,\n                success: res.success\n            };\n        }\n        catch (err) {\n            console.error(\"Easybase Error: addRecord failed \", err);\n            return {\n                message: \"Easybase Error: addRecord failed \" + err,\n                success: false,\n                error: err\n            };\n        }\n    };\n    // Only allow the deletion of one element at a time\n    // First handle shifting of the array size. Then iterate\n    const sync = async () => {\n        const _realignFrames = (newData) => {\n            let isNewDataTheSame = true;\n            if (newData.length !== _frame.length) {\n                isNewDataTheSame = false;\n            }\n            else {\n                for (let i = 0; i < newData.length; i++) {\n                    const newDataNoId = { ...newData[i] };\n                    delete newDataNoId._id;\n                    if (!deepEqual(newDataNoId, _frame[i])) {\n                        isNewDataTheSame = false;\n                        break;\n                    }\n                }\n            }\n            if (!isNewDataTheSame) {\n                const oldframe = [..._frame];\n                oldframe.length = newData.length;\n                _recordIdMap = new WeakMap();\n                for (let i = 0; i < newData.length; i++) {\n                    const currNewEle = newData[i];\n                    _recordIdMap.set(currNewEle, currNewEle._id);\n                    delete currNewEle._id;\n                    oldframe[i] = currNewEle;\n                }\n                _frame = oldframe;\n                _observableFrame.unobserve();\n                _observableFrame = Observable.from(_frame);\n                _observableFrame.observe((allChanges) => {\n                    allChanges.forEach((change) => {\n                        _observedChangeStack.push({\n                            type: change.type,\n                            path: change.path,\n                            value: change.value,\n                            _id: _recordIdMap.get(_frame[Number(change.path[0])])\n                            // Not bringing change.object or change.oldValue\n                        });\n                        log(JSON.stringify({\n                            type: change.type,\n                            path: change.path,\n                            value: change.value,\n                            _id: _recordIdMap.get(_frame[Number(change.path[0])])\n                            // Not bringing change.object or change.oldValue\n                        }));\n                    });\n                });\n            }\n        };\n        if (isSyncing) {\n            return {\n                success: false,\n                message: \"Easybase Error: the provider is currently syncing, use 'await sync()' before calling sync() again\"\n            };\n        }\n        isSyncing = true;\n        if (_isFrameInitialized) {\n            if (_observedChangeStack.length > 0) {\n                log(\"Stack change: \", _observedChangeStack);\n                const res = await tokenPost(POST_TYPES.SYNC_STACK, {\n                    stack: _observedChangeStack,\n                    ..._frameConfiguration\n                });\n                console.log(res.data);\n                if (res.success) {\n                    _observedChangeStack.length = 0;\n                }\n            }\n        }\n        try {\n            const res = await tokenPost(POST_TYPES.GET_FRAME, _frameConfiguration);\n            // Check if the array recieved from db is the same as frame\n            // If not, update it and send useFrameEffect\n            if (res.success === false) {\n                console.error(res.data);\n                isSyncing = false;\n                return {\n                    success: false,\n                    message: \"\" + res.data\n                };\n            }\n            else {\n                _isFrameInitialized = true;\n                _realignFrames(res.data);\n                isSyncing = false;\n                return {\n                    message: 'Success. Call frame for data',\n                    success: true\n                };\n            }\n        }\n        catch (err) {\n            console.error(\"Easybase Error: get failed \", err);\n            isSyncing = false;\n            return {\n                success: false,\n                message: \"Easybase Error: get failed \" + err,\n                error: err\n            };\n        }\n    };\n    const updateRecordImage = async (options) => {\n        const res = await _updateRecordAttachment(options, \"image\");\n        return res;\n    };\n    const updateRecordVideo = async (options) => {\n        const res = await _updateRecordAttachment(options, \"video\");\n        return res;\n    };\n    const updateRecordFile = async (options) => {\n        const res = await _updateRecordAttachment(options, \"file\");\n        return res;\n    };\n    const _updateRecordAttachment = async (options, type) => {\n        const _frameRecord = _frame.find(ele => deepEqual(ele, options.record));\n        if (_frameRecord === undefined || !_recordIDExists(_frameRecord)) {\n            log(\"Attempting to add attachment to a new record that has not been synced. Please sync() before trying to add attachment.\");\n            return {\n                success: false,\n                message: \"Attempting to add attachment to a new record that has not been synced. Please sync() before trying to add attachment.\"\n            };\n        }\n        const ext = options.attachment.name.split(\".\").pop().toLowerCase();\n        log(ext);\n        if (type === \"image\" && !imageExtensions.includes(ext)) {\n            return {\n                success: false,\n                message: \"Image files must have a proper image extension in the file name\"\n            };\n        }\n        if (type === \"video\" && !videoExtensions.includes(ext)) {\n            return {\n                success: false,\n                message: \"Video files must have a proper video extension in the file name\"\n            };\n        }\n        function isFileFromURI(f) {\n            return f.uri !== undefined;\n        }\n        const formData = new FormData();\n        if (isFileFromURI(options.attachment)) {\n            formData.append(\"file\", options.attachment);\n            formData.append(\"name\", options.attachment.name);\n        }\n        else {\n            formData.append(\"file\", options.attachment);\n            formData.append(\"name\", options.attachment.name);\n        }\n        const customHeaders = {\n            'Eb-upload-type': type,\n            'Eb-column-name': options.columnName,\n            'Eb-record-id': _recordIdMap.get(_frameRecord),\n            'Eb-table-name': options.tableName\n        };\n        const res = await tokenPostAttachment(formData, customHeaders);\n        await sync();\n        return {\n            message: res.data,\n            success: res.success\n        };\n    };\n    const c = {\n        /** +++ Will be deprecated */\n        configureFrame,\n        addRecord,\n        deleteRecord,\n        sync,\n        Frame,\n        currentConfiguration,\n        /** --- */\n        updateRecordImage,\n        updateRecordVideo,\n        updateRecordFile,\n        fullTableSize,\n        tableTypes,\n        Query,\n        isUserSignedIn,\n        signIn,\n        signOut,\n        signUp,\n        setUserAttribute,\n        getUserAttributes,\n        db,\n        dbEventListener,\n        e\n    };\n    return c;\n}\n","import { POST_TYPES } from \"./types\";\nimport _g from \"./g\";\nimport authFactory from \"./auth\";\nexport default function tableFactory(globals) {\n    const g = globals || _g;\n    const { tokenPost } = authFactory(g);\n    const Query = async (options) => {\n        const defaultOptions = {\n            queryName: \"\"\n        };\n        const fullOptions = { ...defaultOptions, ...options };\n        try {\n            const res = await tokenPost(POST_TYPES.GET_QUERY, fullOptions);\n            return res.data;\n        }\n        catch (error) {\n            return [];\n        }\n    };\n    async function fullTableSize(tableName) {\n        const res = await tokenPost(POST_TYPES.TABLE_SIZE, tableName ? { tableName } : {});\n        if (res.success) {\n            return res.data;\n        }\n        else {\n            return 0;\n        }\n    }\n    async function tableTypes(tableName) {\n        const res = await tokenPost(POST_TYPES.COLUMN_TYPES, tableName ? { tableName } : {});\n        if (res.success) {\n            return res.data;\n        }\n        else {\n            return {};\n        }\n    }\n    return {\n        Query,\n        fullTableSize,\n        tableTypes\n    };\n}\n","import _g from \"./g\";\nimport easyqb from 'EasyQB';\nimport authFactory from \"./auth\";\nimport { POST_TYPES, DB_STATUS, EXECUTE_COUNT } from \"./types\";\nexport default function dbFactory(globals) {\n    const g = globals || _g;\n    const { tokenPost } = authFactory(g);\n    let _listenerIndex = 0;\n    const _listeners = {};\n    function _runListeners(...params) {\n        for (const cb of Object.values(_listeners)) {\n            cb(...params);\n        }\n    }\n    const dbEventListener = (callback) => {\n        const currKey = '' + _listenerIndex++;\n        _listeners[currKey] = callback;\n        return () => {\n            delete _listeners[currKey];\n        };\n    };\n    const allCallback = async (trx, tableName, userAssociatedRecordsOnly) => {\n        trx.count = \"all\";\n        trx.tableName = tableName;\n        if (userAssociatedRecordsOnly)\n            trx.userAssociatedRecordsOnly = userAssociatedRecordsOnly;\n        _runListeners(DB_STATUS.PENDING, trx.type, EXECUTE_COUNT.ALL, tableName !== \"untable\" ? tableName : null);\n        const res = await tokenPost(POST_TYPES.EASY_QB, trx);\n        if (res.success) {\n            _runListeners(DB_STATUS.SUCCESS, trx.type, EXECUTE_COUNT.ALL, tableName !== \"untable\" ? tableName : null, res.data);\n            return res.data;\n        }\n        else {\n            _runListeners(DB_STATUS.ERROR, trx.type, EXECUTE_COUNT.ALL, tableName !== \"untable\" ? tableName : null);\n            return res;\n        }\n    };\n    const oneCallback = async (trx, tableName, userAssociatedRecordsOnly) => {\n        trx.count = \"one\";\n        trx.tableName = tableName;\n        if (userAssociatedRecordsOnly)\n            trx.userAssociatedRecordsOnly = userAssociatedRecordsOnly;\n        _runListeners(DB_STATUS.PENDING, trx.type, EXECUTE_COUNT.ONE, tableName !== \"untable\" ? tableName : null);\n        const res = await tokenPost(POST_TYPES.EASY_QB, trx);\n        if (res.success) {\n            _runListeners(DB_STATUS.SUCCESS, trx.type, EXECUTE_COUNT.ONE, tableName !== \"untable\" ? tableName : null, res.data);\n            return res.data;\n        }\n        else {\n            _runListeners(DB_STATUS.ERROR, trx.type, EXECUTE_COUNT.ONE, tableName !== \"untable\" ? tableName : null);\n            return res;\n        }\n    };\n    const db = (tableName, userAssociatedRecordsOnly) => {\n        if (tableName && typeof tableName === \"string\") {\n            return easyqb({ allCallback, oneCallback, userAssociatedRecordsOnly, tableName: tableName.toUpperCase() })(tableName.replace(/[^0-9a-zA-Z]/g, '_').toUpperCase());\n        }\n        else {\n            return easyqb({ allCallback, oneCallback, userAssociatedRecordsOnly, tableName: \"untable\" })(\"untable\");\n        }\n    };\n    return {\n        db,\n        dbEventListener,\n        e: easyqb().e\n    };\n}\n","import fetch from 'cross-fetch';\nexport { default as EasybaseProvider } from \"./EasybaseProvider/EasybaseProvider\";\nconst generateBareUrl = (type, integrationID) => `https://api.easybase.io/${type}/${integrationID}`;\nconst isBadInt = (my_int) => my_int !== undefined && my_int !== null && Math.floor(my_int) !== my_int;\nconst isBadString = (my_string) => my_string !== undefined && my_string !== null && typeof my_string !== \"string\";\nconst isBadIntegrationID = (my_string) => my_string === undefined || my_string === null || typeof my_string !== \"string\";\nconst isBadObject = (my_obj) => my_obj !== undefined && my_obj !== null && typeof my_obj !== \"object\";\nconst isBadBool = (my_bool) => my_bool !== undefined && my_bool !== null && typeof my_bool !== \"boolean\";\n/**\n *\n * @param {GetOptions} options GetOptions.\n * @returns {Promise<Array>} Array of records.\n *\n */\nexport function get(options) {\n    const defaultOptions = {\n        integrationID: \"\",\n        offset: undefined,\n        limit: undefined,\n        authentication: undefined,\n        customQuery: undefined\n    };\n    const { integrationID, offset, limit, authentication, customQuery } = { ...defaultOptions, ...options };\n    if (isBadIntegrationID(integrationID))\n        throw new Error(\"integrationID is required and must be a string\");\n    if (isBadInt(offset))\n        throw new Error(\"offset must be an integer\");\n    if (isBadInt(limit))\n        throw new Error(\"limit must be an integer\");\n    if (isBadString(authentication))\n        throw new Error(\"authentication must be a string or null\");\n    if (isBadObject(customQuery))\n        throw new Error(\"customQuery must be an object or null\");\n    return new Promise((resolve, reject) => {\n        try {\n            let fetch_body = {};\n            if (typeof customQuery === \"object\")\n                fetch_body = { ...customQuery };\n            if (offset !== undefined)\n                fetch_body.offset = offset;\n            if (limit !== undefined)\n                fetch_body.limit = limit;\n            if (authentication !== undefined)\n                fetch_body.authentication = authentication;\n            fetch(generateBareUrl('get', integrationID), {\n                method: \"POST\",\n                body: JSON.stringify(fetch_body),\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                }\n            })\n                .then(res => res.json())\n                .then(resData => {\n                if ({}.hasOwnProperty.call(resData, 'ErrorCode')) {\n                    console.error(resData.message);\n                    resolve([resData.message]);\n                }\n                else\n                    resolve(resData);\n            });\n        }\n        catch (err) {\n            reject(err);\n        }\n    });\n}\n/**\n *\n * @param {PostOptions} options PostOptions\n * @returns {Promise<String>} Post status.\n *\n */\nexport function post(options) {\n    const defaultValues = {\n        integrationID: \"\",\n        newRecord: undefined,\n        authentication: undefined,\n        insertAtEnd: undefined\n    };\n    const { integrationID, newRecord, authentication, insertAtEnd } = { ...defaultValues, ...options };\n    if (isBadIntegrationID(integrationID))\n        throw new Error(\"integrationID is required and must be a string\");\n    if (isBadObject(newRecord))\n        throw new Error(\"newRecord is required and must be a string\");\n    if (isBadString(authentication))\n        throw new Error(\"authentication must be a string or null\");\n    if (isBadBool(insertAtEnd))\n        throw new Error(\"insertAtEnd must be a boolean or null\");\n    return new Promise((resolve, reject) => {\n        try {\n            const fetch_body = { ...newRecord };\n            if (authentication !== undefined)\n                fetch_body.authentication = authentication;\n            if (insertAtEnd !== undefined)\n                fetch_body.insertAtEnd = insertAtEnd;\n            fetch(generateBareUrl('post', integrationID), {\n                method: \"POST\",\n                body: JSON.stringify(fetch_body),\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                }\n            })\n                .then(res => res.json())\n                .then(resData => {\n                if ({}.hasOwnProperty.call(resData, 'ErrorCode'))\n                    console.error(resData.message);\n                resolve(resData);\n            });\n        }\n        catch (err) {\n            reject(err);\n        }\n    });\n}\n/**\n *\n * @param {UpdateOptions} options UpdateOptions\n * @returns {Promise<String>} Update status.\n */\nexport function update(options) {\n    const defaultValues = {\n        integrationID: \"\",\n        updateValues: undefined,\n        authentication: undefined,\n        customQuery: undefined\n    };\n    const { integrationID, updateValues, authentication, customQuery } = { ...defaultValues, ...options };\n    if (isBadIntegrationID(integrationID))\n        throw new Error(\"integrationID is required and must be a string\");\n    if (isBadObject(updateValues) || updateValues === undefined)\n        throw new Error(\"updateValues is required and must be a string\");\n    if (isBadString(authentication))\n        throw new Error(\"authentication must be a string or null\");\n    if (isBadObject(customQuery))\n        throw new Error(\"customQuery must be an object or null\");\n    return new Promise((resolve, reject) => {\n        try {\n            const fetch_body = { updateValues, ...customQuery };\n            if (authentication !== undefined)\n                fetch_body.authentication = authentication;\n            fetch(generateBareUrl('update', integrationID), {\n                method: \"POST\",\n                body: JSON.stringify(fetch_body),\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                }\n            })\n                .then(res => res.json())\n                .then(resData => {\n                if ({}.hasOwnProperty.call(resData, 'ErrorCode'))\n                    console.error(resData.message);\n                resolve(resData.message);\n            });\n        }\n        catch (err) {\n            reject(err);\n        }\n    });\n}\n/**\n *\n * @param {DeleteOptions} options DeleteOptions\n * @return {Promise<String>} Delete status.\n */\nexport function Delete(options) {\n    const defaultValues = {\n        integrationID: \"\",\n        authentication: undefined,\n        customQuery: undefined\n    };\n    const { integrationID, authentication, customQuery } = { ...defaultValues, ...options };\n    if (isBadIntegrationID(integrationID))\n        throw new Error(\"integrationID is required and must be a string\");\n    if (isBadString(authentication))\n        throw new Error(\"authentication must be a string or null\");\n    if (isBadObject(customQuery))\n        throw new Error(\"customQuery must be an object or null\");\n    return new Promise((resolve, reject) => {\n        try {\n            const fetch_body = { ...customQuery };\n            if (authentication !== undefined)\n                fetch_body.authentication = authentication;\n            fetch(generateBareUrl('delete', integrationID), {\n                method: \"POST\",\n                body: JSON.stringify(fetch_body),\n                headers: {\n                    'Accept': 'application/json',\n                    'Content-Type': 'application/json'\n                }\n            })\n                .then(res => res.json())\n                .then(resData => {\n                if ({}.hasOwnProperty.call(resData, 'ErrorCode'))\n                    console.error(resData.message);\n                resolve(resData.message);\n            });\n        }\n        catch (err) {\n            reject(err);\n        }\n    });\n}\n/**\n * @async\n * Call a cloud function, created in Easybase interface.\n * @param {string} route Route as detailed in Easybase. Found under 'Deploy'. Will be in the form of ####...####-function-name.\n * @param {Record<string, any>} postBody Optional object to pass as the body of the POST request. This object will available in your cloud function's event.body.\n * @return {Promise<string>} Response from your cloud function. Detailed with a call to 'return context.succeed(\"RESPONSE\")'.\n */\nexport async function callFunction(route, postBody) {\n    const res = await fetch(generateBareUrl('function', route.split(\"/\").pop()), {\n        method: \"POST\",\n        headers: {\n            'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(postBody) || \"\"\n    });\n    const rawDataText = await res.text();\n    return rawDataText;\n}\n"],"sourceRoot":""}